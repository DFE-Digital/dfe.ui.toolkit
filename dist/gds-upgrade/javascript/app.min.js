var COOKIE_NAMES={PREFERENCES_SET:"cookies_preferences_set",POLICY:"cookies_policy",GA:"_ga",GA_GID:"_gid",GA_GAT:"_gat",USER_BANNER_LAST_SEEN:"user_banner_last_seen"},GOVUK_COOKIE_OPTIONS={expires:365,secure:!0,domain:".education.gov.uk"},GovUKCookie={getRaw:function(e){if(window.Cookies)return window.Cookies.get(e)},get:function(e){if(window.Cookies){var t=window.Cookies.get(e);return t?JSON.parse(t):t}},set:function(e,t){if(window.Cookies)return window.Cookies.set(e,t,GOVUK_COOKIE_OPTIONS)},remove:function(e){if(window.Cookies)return window.Cookies.remove(e,GOVUK_COOKIE_OPTIONS)}};function checkConditionForUsersBanner(){var e=GovUKCookie.getRaw(COOKIE_NAMES.USER_BANNER_LAST_SEEN);return!e||((new Date).getTime()-e)/864e5>90}function showReviewUsersBanner(){$("#review-users-banner").show()}function setReviewUsersBannerLastSeen(){GovUKCookie.set(COOKIE_NAMES.USER_BANNER_LAST_SEEN,(new Date).getTime())}function loadReviewUsersBanner(){checkConditionForUsersBanner()&&showReviewUsersBanner()}function updateCookieReviewUsersBanner(){checkConditionForUsersBanner()&&setReviewUsersBannerLastSeen()}GovUKCookie.remove(COOKIE_NAMES.POLICY),GovUKCookie.remove(COOKIE_NAMES.PREFERENCES_SET),GovUKCookie.remove(COOKIE_NAMES.GA),GovUKCookie.remove(COOKIE_NAMES.GA_GAT),GovUKCookie.remove(COOKIE_NAMES.GA_GID),function(e){"use strict";var t=e.GOVUK||{};t.details={NATIVE_DETAILS:"boolean"==typeof document.createElement("details").open,KEY_ENTER:13,KEY_SPACE:32,started:!1,addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,(function(e){n(e,e.target)}),!1):e.attachEvent&&e.attachEvent("on"+t,(function(e){n(e,e.srcElement)}))},removeEvent:function(e,t){e.removeEventListener?e.removeEventListener(t,(function(e){}),!1):e.detachEvent&&e.detachEvent("on"+t,(function(e){}))},charCode:function(e){return"number"==typeof e.which?e.which:e.keyCode},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},addClickEvent:function(e,n){t.details.addEvent(e,"keypress",(function(e,a){t.details.charCode(e)!==t.details.KEY_ENTER&&t.details.charCode(e)!==t.details.KEY_SPACE||"summary"===a.nodeName.toLowerCase()&&(t.details.preventDefault(e),a.click?a.click():n(e,a))})),t.details.addEvent(e,"keyup",(function(e,n){t.details.charCode(e)===t.details.KEY_SPACE&&"SUMMARY"===n.nodeName&&t.details.preventDefault(e)})),t.details.addEvent(e,"click",(function(e,t){n(e,t)}))},getAncestor:function(e,t){do{if(!e||e.nodeName.toLowerCase()===t)break;e=e.parentNode}while(e);return e},addDetailsPolyfill:function(e,n){if(n=n||document.body,!t.details.started&&(t.details.started=!0,0!==(e=n.getElementsByTagName("details")).length)){for(var a=e.length,i=0;i<a;i++){var o=e[i];if(o.__summary=o.getElementsByTagName("summary").item(0),o.__content=o.getElementsByTagName("div").item(0),!o.__summary||!o.__content)return;o.__content.id||(o.__content.id="details-content-"+i),o.setAttribute("role","group"),o.__summary.setAttribute("role","button"),o.__summary.setAttribute("aria-controls",o.__content.id),t.details.NATIVE_DETAILS||(o.__summary.tabIndex=0);var r=null!==o.getAttribute("open");if(!0===r?(o.__summary.setAttribute("aria-expanded","true"),o.__content.setAttribute("aria-hidden","false")):(o.__summary.setAttribute("aria-expanded","false"),o.__content.setAttribute("aria-hidden","true"),t.details.NATIVE_DETAILS||(o.__content.style.display="none")),o.__summary.__details=o,!t.details.NATIVE_DETAILS){var s=document.createElement("i");!0===r?(s.className="arrow arrow-open",s.appendChild(document.createTextNode("▼"))):(s.className="arrow arrow-closed",s.appendChild(document.createTextNode("►"))),o.__summary.__twisty=o.__summary.insertBefore(s,o.__summary.firstChild),o.__summary.__twisty.setAttribute("aria-hidden","true")}}t.details.addClickEvent(n,(function(e,n){return!(n=t.details.getAncestor(n,"summary"))||t.details.statechange(n)}))}},statechange:function(e){var n="true"===e.__details.__summary.getAttribute("aria-expanded"),a="true"===e.__details.__content.getAttribute("aria-hidden");(e.__details.__summary.setAttribute("aria-expanded",n?"false":"true"),e.__details.__content.setAttribute("aria-hidden",a?"false":"true"),t.details.NATIVE_DETAILS)||(e.__details.__content.style.display=n?"none":"",null!==e.__details.getAttribute("open")?e.__details.removeAttribute("open"):e.__details.setAttribute("open","open"));return e.__twisty&&(e.__twisty.firstChild.nodeValue=n?"►":"▼",e.__twisty.setAttribute("class",n?"arrow arrow-closed":"arrow arrow-open")),!0},destroy:function(e){t.details.removeEvent(e,"click")},init:function(e){t.details.addEvent(document,"DOMContentLoaded",t.details.addDetailsPolyfill),t.details.addEvent(window,"load",t.details.addDetailsPolyfill)}},e.GOVUK=t}(window);var NSA=NSA||{},filterBoxes=$(".filter-box");function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function sortTable(e){var t,n,a,i,o,r,s,l,d=0;for(t=$("table.sortable"),a=!0,l="a";a;){for(a=!1,n=t.find("tr"),i=1;i<n.length-1;i++)if(s=!1,o=n[i].getElementsByTagName("TD")[e],r=n[i+1].getElementsByTagName("TD")[e],"a"===l){if(o.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){s=!0;break}}else if("d"===l&&o.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){s=!0;break}s?(n[i].parentNode.insertBefore(n[i+1],n[i]),a=!0,d++):0===d&&"a"===l&&(l="d",a=!0)}return l}NSA.filters={init:function(){filterBoxes.each((function(){var e=$(this),t=e.find(".container-head"),n=t.find(".option-select-label"),a=e.find("input:checkbox"),i=$("<button />").addClass("js-container-head"),o=$("<div />").addClass("js-selected-counter");i.on("click",(function(e){var t=$(this).next();$(this).hasClass("closed")?(t.show(),$(this).removeClass("closed").attr("aria-expanded",!0)):(t.hide(),$(this).addClass("closed").attr("aria-expanded",!1)),e.preventDefault()})).append(n,o),t.replaceWith(i),a.on("change",(function(){o.text((function(){return a.filter(":checked").length>0?a.filter(":checked").length+" selected":""}))}))}))}},filterBoxes.length>0&&NSA.filters.init(),(NSA=NSA||{}).modal={elems:{links:$(".modal-link"),modals:$(".modal")},init:function(){this.modalBg(),this.setUpEvents()},modalBg:function(){var e=this,t=$("<div>").addClass("modal-bg").hide().on("click",(function(){e.hideModals()}));$("body").append(t)},setUpEvents:function(){var e=this;this.elems.links.on("click",(function(t){var n=$(this).attr("href");e.showModal($(n)),t.preventDefault()})),e.elems.modals.find(".close").on("click",(function(t){e.hideModals(),t.preventDefault()})),$("body").on("keydown",(function(t){27===(t.keyCode||t.which)&&e.hideModals()}))},showModal:function(e){$("html").addClass("modal-open"),$(".modal-bg").show(),e.show()},hideModals:function(){$("html").removeClass("modal-open"),$(".modal-bg").hide(),this.elems.modals.hide()}},NSA.modal.init(),function(e){"use strict";var t=e.jQuery,n=e.GOVUK||{};function a(){var e=this,n="ShowHideContent",a='[data-target] > input[type="radio"]',i='[data-target] > input[type="checkbox"]',o="a.js-toggle-content";function r(){var e=t(this),n=s(e);n.length&&(e.attr("aria-controls",n.attr("id")),e.attr("aria-expanded","false"),n.attr("aria-hidden","true"))}function s(e){var n=e.attr("aria-controls");return n||(n=e.closest("[data-target]").data("target")),t("#"+n)}function l(e,t){t.hasClass("js-hidden")&&(t.removeClass("js-hidden"),t.attr("aria-hidden","false"),e.attr("aria-controls")&&e.attr("aria-expanded","true"))}function d(e,t){(t=t||s(e)).hasClass("js-hidden")||(t.addClass("js-hidden"),t.attr("aria-hidden","true"),e.attr("aria-controls")&&e.attr("aria-expanded","false"))}function c(e,n){var i=a+"[name="+(e.attr("name").replace("[","\\[").replace("]","\\]")+"][aria-controls]"),o=e.closest("form");(o.length?o.find(i):t(i)).each((function(){d(t(this))})),e.is("[aria-controls]")&&l(e,n)}function u(e,t){e.is(":checked")?l(e,t):d(e,t)}function h(e,t,n){t.hasClass("js-hidden")?l(e,t):d(e,t),n.preventDefault()}function f(e,a,i,o){function l(e){var n=t(this);o(n,s(n),e)}e=e||t(document.body);var d=t(a);d.each(r),t.each(i,(function(t,a){e.on("click."+n,a,l)})),d.is(":checked")&&d.filter(":checked").each(l)}e.showHideRadioToggledContent=function(e){var n;f(e,a,(n=[],t(a).map((function(){var e=t(this).attr("name");return-1===t.inArray(e,n)?(n.push(e),'input[type="radio"][name="'+t(this).attr("name")+'"]'):null}))),c)},e.showHideCheckboxToggledContent=function(e){f(e,i,[i],u)},e.showHideLinkToggledContent=function(e){f(e,o,[o],h)},e.destroy=function(e){(e=e||t(document.body)).off("."+n)}}a.prototype.init=function(e){this.showHideRadioToggledContent(e),this.showHideCheckboxToggledContent(e),this.showHideLinkToggledContent(e)},n.ShowHideContent=a,e.GOVUK=n}(window),(NSA=NSA||{}).signin={form:$(".form-signin"),init:function(){this.setupEvents()},setupEvents:function(){this.form.on("submit",this,this.handleSubmit)},handleSubmit:function(e){var t=$(this),n=t.find("input").not(":checkbox"),a={},i=$(this).find("button:submit"),o=i.eq(0);i.attr("disabled","disabled"),o.css("min-width",o.outerWidth()+"px"),o.find(".loader").removeClass("vh"),n.each((function(){a[this.name]=$(this).val()})),$(".password-input").each((function(e){$(this).attr("type","password"),$(this).siblings(".show-password").html("Show")})),$.ajax({type:"POST",data:a,url:t.attr("action"),context:e.data,dataType:"json",success:function(e){e.redirect?window.location.href=e.uri:e.isFailedLogin?(this.resetValidation(t),e.delayTill?this.showValidationMessage(e.validationMessages,!0):(this.showValidationMessage(e.validationMessages),i.removeAttr("disabled")),this.showInlineValidation(e.validationMessages),o.find(".loader").addClass("vh")):this.buildFormAndSubmit(e)},error:function(){this.resetValidation(t),this.showValidationMessage(),i.removeAttr("disabled"),o.find(".loader").addClass("vh")}}),e.preventDefault()},resetValidation:function(e){$(".govuk-error-summary").remove(),e.find(".govuk-form-group").each((function(){var e=$(this).find("input").eq(0);$(this).hasClass("govuk-form-group--error")&&($(this).removeClass("govuk-form-group--error"),$(this).find("span.govuk-error-message").remove(),e.removeAttr("aria-describedby").removeAttr("aria-invalid"))}))},showValidationMessage:function(e,t){var n=$("<div />").attr("class","govuk-error-summary govuk-!-margin-top-6").attr("role","alert").attr("tabindex","-1").attr("aria-labelledby","error-summary-title"),a=$("<h2 />").attr("class","govuk-error-summary__title").attr("id","error-summary"),i=$("<div />").attr("class","govuk-error-summary__body"),o=$("<ul />").attr("class","govuk-list govuk-error-summary__list");if(e){if(a.text("There is a problem"),$.each(e,(function(e,t){"loginError"===e&&(e="username");var n=$("<a />").attr("class","govuk-link").attr("href","#"+e).text(t),a=$("<li />").append(n);o.append(a)})),t){var r=$("<a />").attr("class","govuk-link-bold").attr("href","").attr("onclick","window.location.reload()").text("Refresh this page").css("color","#1d70b8"),s=$("<li />").append(r);o.append(s)}}else{a.text("There has been an error");s=$("<li />").html('Please try again later. If the problem continues, follow the link to <a href="https://help.signin.education.gov.uk/contact/form">submit a support request</a>');o.append(s)}n.append(a).append(i.append(o)),$("main").prepend(n),$("html, body").animate({scrollTop:n.offset().top-15},300)},showInlineValidation:function(e){$.each(e,(function(e,t){var n=$("input[name="+e+"]"),a=n.parent(),i=a.find("label").first();if(!a.hasClass("govuk-form-group--error"))var o=$('<span class="govuk-body">').html(t).prop("class","govuk-error-message").prop("id","validation-"+e);i.after(o),a.addClass("govuk-form-group--error"),n.attr({"aria-describedby":"validation-"+e,"aria-invalid":"true"})}))},buildFormAndSubmit:function(e){var t=$("<form />").attr({method:"post",action:e.destination,id:"dfesigninform"});$.each(e.postbackData,(function(e,n){var a=$("<input />").attr({type:"hidden",name:e,value:n});t.append(a)})),$("#dfesigninform").remove(),$("body").append(t),t.submit()}},$(".form-signin").length>0&&NSA.signin.init(),$((function(){$("table.sortable thead th").on("click",(function(){var e=$("table.sortable thead tr th");e.removeClass("sorted").removeClass("dir-a").removeClass("dir-d");var t=sortTable(e.index($(this)));$(this).addClass("sorted dir-"+t)}))}));var toggleTips=$(".toggle-help");function validatePassword(){var e=$(this).attr("id");$(`#validation-feedback-${e}`).slideDown();var t=[{Pattern:"[A-Z]{2}",Target:`upper-case-${e}`},{Pattern:"[a-z]{2}",Target:`lower-case-${e}`},{Pattern:"[0-9]{2}",Target:`numbers-${e}`}],n=$(this).val();$(`#length-${e}`).removeClass(n.length>7?"icon-remove":"icon-ok"),$(`#length-${e}`).addClass(n.length>7?"icon-ok":"icon-remove");for(var a=0;a<t.length;a++)$("#"+t[a].Target).removeClass(new RegExp(t[a].Pattern).test(n)?"icon-remove":"icon-ok"),$("#"+t[a].Target).addClass(new RegExp(t[a].Pattern).test(n)?"icon-ok":"icon-remove")}function initialiseValidatePassword(){var e=$(this),t=e.attr("id"),n=$(`<div id='validation-feedback-${t}' style='display: none;'>`).append(`<div id='length-${t}' class='icon-remove'>8 charcters minimum</div>`).append(`<div id='upper-case-${t}' class='icon-remove'>contain at least 2 upper-case characters</div>`).append(`<div id='lower-case-${t}' class='icon-remove'>contain at least 2 lower-case characters</div>`).append(`<div id='numbers-${t}' class='icon-remove'>contain at least 2 numbers</div>`);e.before(n)}toggleTips.each((function(){var e,t,n,a;e=$(this),n=$("<span />").attr("class","toggletip"),a=$("<button />").attr("type","button").attr("aria-label","Help").attr("data-toggletip-content",e.html()).text("?").on("click",(function(){var t=$(this).data("toggletip-content"),n=$(this).next();window.setTimeout((function(){n.html((function(){return $("<span />").attr("class",(function(){return e.html().length>50?"bubble long":"bubble"})).text(t)}))}),100)})).on("keydown",(function(e){27===(e.keyCode||e.which)&&t.html("")})),t=$("<span />").attr("role","status"),n.append(a,t),e.before(n).remove(),$(document).on("click",(function(n){e[0]!==$(n.target)&&t.html("")}))})),$(".password-input-check").one("click",initialiseValidatePassword),$(".password-input-check").on("keyup",validatePassword);var forms=$("#content form");forms.attr("novalidate","novalidate");NSA=NSA||{};function select2ModelMatcher(e,t){if(t.parentText=t.parentText||"",void 0===e.term||!e.term||""===e.term.trim())return t;if(t.children&&t.children.length>0){for(var n=$.extend(!0,{},t),a=t.children.length-1;a>=0;a--){var i=t.children[a];i.parentText+=t.parentText+" "+t.text,null==select2ModelMatcher(e,i)&&n.children.splice(a,1)}return n.children.length>0?n:select2ModelMatcher(e,n)}var o=(t.parentText+" "+t.text).toUpperCase(),r=e.term.toUpperCase();return o.indexOf(r)>-1?t:null}NSA={initialiseShowPassword:function(){$(".password-input").each((function(e){var t=$(this),n=$("<button />").prop({type:"button",class:"show-password govuk-button govuk-button--secondary govuk-!-margin-bottom-1"});n.html("Show"),n.on("click",(function(){"password"===t.attr("type")?(t.attr("type","text"),n.text("Hide")):(t.attr("type","password"),n.text("Show"))})),t.after(n)}))},backLink:function(){var e=$("<a>").attr({href:"#",class:"govuk-back-link-bold"}).text("Back").on("click",(function(e){window.history.back(),e.preventDefault()}));$(".js-back-link").html(e)}},$("select.select2").length>0&&$("select.select2").select2({matcher:select2ModelMatcher}),$(".password-input").length>0&&NSA.initialiseShowPassword(),$(".js-back-link")&&NSA.backLink(),$(".under-construction").on("click",(function(e){alert("This functionality is not available yet"),e.preventDefault()})),$(".notification span.icon").length>0&&$(".notification span.icon").on("click",(function(){$(this).parent().hide()})),$("article.organisation-services").length>0&&($(".information").on("click",(function(e){var t=$(this).parent().parent().find(".service-description");e.preventDefault(),t.toggle()})),$(".info-link").on("click",(function(e){var t=$(this).parent().next();e.preventDefault(),t.toggle()})));var searchFields=$("form .search-field");if(searchFields.length>0){var loader=$("<span />").addClass("loader spinner-inline"),b1=$("<span />").addClass("ball b-1"),b2=$("<span />").addClass("ball b-2");loader.append(b1).append(b2),searchFields.each((function(){var e=$(this).parent(),t=e.find("button");e.on("submit",(function(){t.after(loader).hide()}))}))}var redirect=$("#redirect-url");$("#add-redirect").on("click",(function(){return $('<p class="govuk-body"><label for="redirect-url"><input class="form-control inputConfig" name="redirect_uris"></label></p>').appendTo(redirect),!1}));var logout=$("#logout-url");$("#add-logout").on("click",(function(){return $('<p class="govuk-body"><label for="logout-url"><input class="form-control inputConfig" name="post_logout_redirect_uris"></label></p>').appendTo(logout),!1})),$("#generate-client-secret").on("click",(function(){var e=window.niceware.generatePassphrase(8).join("-");return confirm("Are you sure you want to regenerate the client secret?")&&$("input#clientSecret").attr("value",e),!1})),$("#generate-api-secret").on("click",(function(){var e=window.niceware.generatePassphrase(8).join("-");return confirm("Are you sure you want to regenerate the api secret?")&&$("input#apiSecret").attr("value",e),!1}));var formRegister=$(".prevent-form-double-submission");formRegister.length>0&&formRegister.each((function(){var e=$(formRegister).find("button:submit"),t=e.eq(0);formRegister.on("submit",(function(){e.attr("disabled","disabled"),t.css("min-width",t.outerWidth()+"px"),t.append("<span class='loader spinner-inline'> <span class='ball b-1'></span> <span class='ball b-2'></span> <span class='ball b-3'></span> </span>")}))})),$(".auto-scroll-on-change").on("change",(function(e){$(window).scrollTop($(".auto-scroll-dest").position().top)})),$(".close-button").on("click",(function(e){e.target.closest(".govuk-notification-banner").remove()})),$(".toggle-open").on("click",(function(e){var t=$(this).next();e.preventDefault(),t.removeClass("govuk-visually-hidden"),$(this).addClass("govuk-visually-hidden")}));var showHideContent=new GOVUK.ShowHideContent;showHideContent.init(),GOVUK.details.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb29raWVzLmpzIiwiX2RldGFpbHMucG9seWZpbGwuanMiLCJfZmlsdGVyLWJveGVzLmpzIiwiX3NpZ25pbi5qcyIsIl90YWJsZXNvcnQuanMiLCJfbW9kYWwuanMiLCJfc2hvdy1oaWRlLWNvbnRlbnQuanMiLCJfdG9vbHRpcC5qcyIsIl92YWxpZGF0ZS1wYXNzd29yZC5qcyIsIl92YWxpZGF0aW9uLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbIkNPT0tJRV9OQU1FUyIsIlBSRUZFUkVOQ0VTX1NFVCIsIlBPTElDWSIsIkdBIiwiR0FfR0lEIiwiR0FfR0FUIiwiVVNFUl9CQU5ORVJfTEFTVF9TRUVOIiwiR09WVUtfQ09PS0lFX09QVElPTlMiLCJleHBpcmVzIiwic2VjdXJlIiwiZG9tYWluIiwiR292VUtDb29raWUiLCJnZXRSYXciLCJuYW1lIiwid2luZG93IiwiQ29va2llcyIsImdldCIsInZhbHVlIiwiSlNPTiIsInBhcnNlIiwic2V0IiwicmVtb3ZlIiwiY2hlY2tDb25kaXRpb25Gb3JVc2Vyc0Jhbm5lciIsImxhc3RTZWVuIiwiRGF0ZSIsImdldFRpbWUiLCJzaG93UmV2aWV3VXNlcnNCYW5uZXIiLCIkIiwic2hvdyIsInNldFJldmlld1VzZXJzQmFubmVyTGFzdFNlZW4iLCJsb2FkUmV2aWV3VXNlcnNCYW5uZXIiLCJ1cGRhdGVDb29raWVSZXZpZXdVc2Vyc0Jhbm5lciIsImdsb2JhbCIsIkdPVlVLIiwiZGV0YWlscyIsIk5BVElWRV9ERVRBSUxTIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwib3BlbiIsIktFWV9FTlRFUiIsIktFWV9TUEFDRSIsInN0YXJ0ZWQiLCJhZGRFdmVudCIsIm5vZGUiLCJ0eXBlIiwiY2FsbGJhY2siLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsImF0dGFjaEV2ZW50Iiwic3JjRWxlbWVudCIsInJlbW92ZUV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwiY2hhckNvZGUiLCJ3aGljaCIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiYWRkQ2xpY2tFdmVudCIsIm5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJjbGljayIsImdldEFuY2VzdG9yIiwibWF0Y2giLCJwYXJlbnROb2RlIiwiYWRkRGV0YWlsc1BvbHlmaWxsIiwibGlzdCIsImNvbnRhaW5lciIsImJvZHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIm4iLCJpIiwiX19zdW1tYXJ5IiwiaXRlbSIsIl9fY29udGVudCIsImlkIiwic2V0QXR0cmlidXRlIiwidGFiSW5kZXgiLCJvcGVuQXR0ciIsImdldEF0dHJpYnV0ZSIsInN0eWxlIiwiZGlzcGxheSIsIl9fZGV0YWlscyIsInR3aXN0eSIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJfX3R3aXN0eSIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJzdW1tYXJ5Iiwic3RhdGVjaGFuZ2UiLCJleHBhbmRlZCIsImhpZGRlbiIsInJlbW92ZUF0dHJpYnV0ZSIsIm5vZGVWYWx1ZSIsImRlc3Ryb3kiLCJpbml0IiwiJGNvbnRhaW5lciIsIk5TQSIsImZpbHRlckJveGVzIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwidXJsIiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic29ydFRhYmxlIiwidGFibGUiLCJyb3dzIiwic3dpdGNoaW5nIiwieCIsInkiLCJzaG91bGRTd2l0Y2giLCJkaXJlY3Rpb24iLCJzd2l0Y2hjb3VudCIsImZpbmQiLCJpbm5lckhUTUwiLCJmaWx0ZXJzIiwiZWFjaCIsIiR0aGF0IiwidGhpcyIsImhlYWRlciIsInRpdGxlIiwiY2hlY2tib3hlcyIsImJ1dHRvbiIsImFkZENsYXNzIiwiY2hlY2tDb3VudCIsIm9uIiwib3B0aW9ucyIsIm5leHQiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYXR0ciIsImhpZGUiLCJhcHBlbmQiLCJyZXBsYWNlV2l0aCIsInRleHQiLCJmaWx0ZXIiLCJtb2RhbCIsImVsZW1zIiwibGlua3MiLCJtb2RhbHMiLCJtb2RhbEJnIiwic2V0VXBFdmVudHMiLCJ0aGF0IiwiYmciLCJoaWRlTW9kYWxzIiwic2hvd01vZGFsIiwialF1ZXJ5IiwiU2hvd0hpZGVDb250ZW50Iiwic2VsZiIsInNlbGVjdG9ycyIsImluaXRUb2dnbGVkQ29udGVudCIsIiRjb250cm9sIiwiJGNvbnRlbnQiLCJnZXRUb2dnbGVkQ29udGVudCIsImNsb3Nlc3QiLCJkYXRhIiwic2hvd1RvZ2dsZWRDb250ZW50IiwiaGlkZVRvZ2dsZWRDb250ZW50IiwiaGFuZGxlUmFkaW9Db250ZW50Iiwic2VsZWN0b3IiLCIkZm9ybSIsImlzIiwiaGFuZGxlQ2hlY2tib3hDb250ZW50IiwiaGFuZGxlTGlua0NvbnRlbnQiLCIkZXZlbnQiLCJlbGVtZW50U2VsZWN0b3IiLCJldmVudFNlbGVjdG9ycyIsImhhbmRsZXIiLCJkZWZlcnJlZCIsImV2ZW50IiwiJGNvbnRyb2xzIiwiaWR4IiwiZXZlbnRTZWxlY3RvciIsInNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCIsInJhZGlvR3JvdXBzIiwibWFwIiwiZ3JvdXBOYW1lIiwiaW5BcnJheSIsInB1c2giLCJzaG93SGlkZUNoZWNrYm94VG9nZ2xlZENvbnRlbnQiLCJzaG93SGlkZUxpbmtUb2dnbGVkQ29udGVudCIsIm9mZiIsInByb3RvdHlwZSIsInNpZ25pbiIsImZvcm0iLCJzZXR1cEV2ZW50cyIsImhhbmRsZVN1Ym1pdCIsIiRpbnB1dHMiLCJub3QiLCJwb3N0RGF0YSIsIiRzdWJtaXRCdXR0b25zIiwiJHN1Ym1pdEJ1dHRvbiIsImVxIiwiY3NzIiwib3V0ZXJXaWR0aCIsInZhbCIsInNpYmxpbmdzIiwiaHRtbCIsImFqYXgiLCJjb250ZXh0IiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwicmVkaXJlY3QiLCJ1cmkiLCJpc0ZhaWxlZExvZ2luIiwicmVzZXRWYWxpZGF0aW9uIiwiZGVsYXlUaWxsIiwic2hvd1ZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2VzIiwicmVtb3ZlQXR0ciIsInNob3dJbmxpbmVWYWxpZGF0aW9uIiwiYnVpbGRGb3JtQW5kU3VibWl0IiwiZXJyb3IiLCIkZmllbGQiLCJtZXNzYWdlcyIsInNob3dSZWZyZXNoTGluayIsIiRkaXYiLCIkaDIiLCIkdWxDb250YWluZXIiLCIkdWwiLCJpbmRleCIsIiRhIiwiJGxpIiwicHJlcGVuZCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCIkcGFyZW50IiwicGFyZW50IiwiJGxhYmVsIiwiZmlyc3QiLCJlcnJvck1lc3NhZ2UiLCJwcm9wIiwiYWZ0ZXIiLCJtZXRob2QiLCJhY3Rpb24iLCJkZXN0aW5hdGlvbiIsInBvc3RiYWNrRGF0YSIsInN1Ym1pdCIsImhlYWRpbmdDZWxscyIsInRvZ2dsZVRpcHMiLCJ2YWxpZGF0ZVBhc3N3b3JkIiwic2xpZGVEb3duIiwicnVsZXMiLCJQYXR0ZXJuIiwiVGFyZ2V0IiwicGFzc3dvcmQiLCJ0ZXN0IiwiaW5pdGlhbGlzZVZhbGlkYXRlUGFzc3dvcmQiLCIkcGFzc3dvcmRJbnB1dCIsInZhbGlkYXRlUGFzc3dvcmRIdG1sIiwiYmVmb3JlIiwibGl2ZVJlZ2lvbiIsInRvZ2dsZVRpcCIsIm1lc3NhZ2UiLCJzZXRUaW1lb3V0Iiwib25lIiwiZm9ybXMiLCJzZWxlY3QyTW9kZWxNYXRjaGVyIiwicGFyYW1zIiwicGFyZW50VGV4dCIsInRlcm0iLCJ0cmltIiwiY2hpbGRyZW4iLCJleHRlbmQiLCJjIiwiY2hpbGQiLCJzcGxpY2UiLCJvcmlnaW5hbCIsInRvVXBwZXJDYXNlIiwiaW5kZXhPZiIsImluaXRpYWxpc2VTaG93UGFzc3dvcmQiLCIkc2hvd0J1dHRvbiIsImNsYXNzIiwiYmFja0xpbmsiLCJoaXN0b3J5IiwiYmFjayIsInNlbGVjdDIiLCJtYXRjaGVyIiwiYWxlcnQiLCJpbmZvIiwidG9nZ2xlIiwibWV0YSIsInNlYXJjaEZpZWxkcyIsImxvYWRlciIsImIxIiwiYjIiLCJhcHBlbmRUbyIsImxvZ291dCIsInNlY3JldCIsIm5pY2V3YXJlIiwiZ2VuZXJhdGVQYXNzcGhyYXNlIiwiam9pbiIsImNvbmZpcm0iLCJmb3JtUmVnaXN0ZXIiLCJwb3NpdGlvbiIsInNob3dIaWRlQ29udGVudCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQUEsYUFBQSxDQUNBQyxnQkFBQSwwQkFDQUMsT0FBQSxpQkFDQUMsR0FBQSxNQUNBQyxPQUFBLE9BQ0FDLE9BQUEsT0FDQUMsc0JBQUEseUJBR0FDLHFCQUFBLENBQ0FDLFFBQUEsSUFDQUMsUUFBQSxFQUNBQyxPQUFBLHFCQUdBQyxZQUFBLENBQ0FDLE9BQUEsU0FBQUMsR0FDQSxHQUFBQyxPQUFBQyxRQUlBLE9BQUFELE9BQUFDLFFBQUFDLElBQUFILElBRUFHLElBQUEsU0FBQUgsR0FDQSxHQUFBQyxPQUFBQyxRQUFBLENBSUEsSUFBQUUsRUFBQUgsT0FBQUMsUUFBQUMsSUFBQUgsR0FDQSxPQUFBSSxFQUNBQyxLQUFBQyxNQUFBRixHQUVBQSxJQUVBRyxJQUFBLFNBQUFQLEVBQUFJLEdBQ0EsR0FBQUgsT0FBQUMsUUFJQSxPQUFBRCxPQUFBQyxRQUFBSyxJQUNBUCxFQUNBSSxFQUNBVix1QkFHQWMsT0FBQSxTQUFBUixHQUNBLEdBQUFDLE9BQUFDLFFBSUEsT0FBQUQsT0FBQUMsUUFBQU0sT0FDQVIsRUFDQU4sd0JBb0JBLFNBQUFlLCtCQUNBLElBQUFDLEVBQUFaLFlBQUFDLE9BQUFaLGFBQUFNLHVCQUNBLE9BQUFpQixLQUNBLElBQUFDLE1BQUFDLFVBQUFGLEdBQUEsTUFDQSxHQVdBLFNBQUFHLHdCQUNBQyxFQUFBLHdCQUFBQyxPQUdBLFNBQUFDLCtCQUNBbEIsWUFBQVMsSUFBQXBCLGFBQUFNLHVCQUFBLElBQUFrQixNQUFBQyxXQUdBLFNBQUFLLHdCQUNBUixnQ0FDQUksd0JBSUEsU0FBQUssZ0NBQ0FULGdDQUNBTywrQkE1Q0FsQixZQUFBVSxPQUFBckIsYUFBQUUs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LFNBQUF0RixHQUNBcEIsRUFBQWIsUUFBQTJOLFVBQUE5TSxFQUFBLHFCQUFBcVIsV0FBQXJFLFFBR0FoTixFQUFBLGlCQUFBMEcsR0FBQSxTQUFBLFNBQUF0RixHQUNBQSxFQUFBQyxPQUFBa0gsUUFBQSw4QkFDQTdJLFlBSUFNLEVBQUEsZ0JBQUEwRyxHQUFBLFNBQUEsU0FBQXRGLEdBQ0EsSUFBQW9QLEVBQUF4USxFQUFBbUcsTUFBQVMsT0FDQXhGLEVBQUFVLGlCQUNBME8sRUFBQTFKLFlBQUEseUJBQ0E5RyxFQUFBbUcsTUFBQUssU0FBQSw0QkFHQSxJQUFBOEssZ0JBQUEsSUFBQWhSLE1BQUEwSCxnQkFDQXNKLGdCQUFBOU0sT0FFQWxFLE1BQUFDLFFBQUFpRSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIENPT0tJRV9OQU1FUyA9IHtcbiAgUFJFRkVSRU5DRVNfU0VUOiAnY29va2llc19wcmVmZXJlbmNlc19zZXQnLFxuICBQT0xJQ1k6ICdjb29raWVzX3BvbGljeScsXG4gIEdBOiAnX2dhJyxcbiAgR0FfR0lEOiAnX2dpZCcsXG4gIEdBX0dBVDogJ19nYXQnLFxuICBVU0VSX0JBTk5FUl9MQVNUX1NFRU46ICd1c2VyX2Jhbm5lcl9sYXN0X3NlZW4nXG59O1xuXG52YXIgR09WVUtfQ09PS0lFX09QVElPTlMgPSB7XG4gIGV4cGlyZXM6IDM2NSwgLy8gZGF5c1xuICBzZWN1cmU6IHRydWUsXG4gIGRvbWFpbjogJy5lZHVjYXRpb24uZ292LnVrJ1xufTtcblxudmFyIEdvdlVLQ29va2llID0ge1xuICBnZXRSYXc6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5kb3cuQ29va2llcy5nZXQobmFtZSk7XG4gIH0sXG4gIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAoIXdpbmRvdy5Db29raWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gd2luZG93LkNvb2tpZXMuZ2V0KG5hbWUpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5kb3cuQ29va2llcy5zZXQoXG4gICAgICBuYW1lLFxuICAgICAgdmFsdWUsXG4gICAgICBHT1ZVS19DT09LSUVfT1BUSU9OU1xuICAgICk7XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAoIXdpbmRvdy5Db29raWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHdpbmRvdy5Db29raWVzLnJlbW92ZShcbiAgICAgIG5hbWUsXG4gICAgICBHT1ZVS19DT09LSUVfT1BUSU9OU1xuICAgICk7XG4gIH1cbn07XG5cbi8vIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgYW55IGV4aXN0aW5nIHRyYWNraW5nIGNvb2tpZXMgb24gcGFnZSBsb2FkXG4oZnVuY3Rpb24gKCkge1xuICBHb3ZVS0Nvb2tpZS5yZW1vdmUoQ09PS0lFX05BTUVTLlBPTElDWSk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuUFJFRkVSRU5DRVNfU0VUKTtcbiAgR292VUtDb29raWUucmVtb3ZlKENPT0tJRV9OQU1FUy5HQSk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuR0FfR0FUKTtcbiAgR292VUtDb29raWUucmVtb3ZlKENPT0tJRV9OQU1FUy5HQV9HSUQpO1xufSkoKTtcblxuXG4vKipcbiAqIFNlY3Rpb24gdG8gaGFuZGxlIHJldmlldyB1c2VycyBiYW5uZXJcbiAqIEl0IHVzZXMgYSBkZWRpY2F0ZWQgY29va2llICd1c2VyX2Jhbm5lcl9sYXN0X3NlZW4nXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb25kaXRpb25Gb3JVc2Vyc0Jhbm5lcigpIHtcbiAgdmFyIGxhc3RTZWVuID0gR292VUtDb29raWUuZ2V0UmF3KENPT0tJRV9OQU1FUy5VU0VSX0JBTk5FUl9MQVNUX1NFRU4pO1xuICBpZiAoISFsYXN0U2Vlbikge1xuICAgIHZhciBudW1iZXJPZkRheXMgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0U2VlbikgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgaWYgKG51bWJlck9mRGF5cyA+IDkwKSB7XG4gICAgICAvLyBpZiB0aGUgcGVyaW9kIGlzIGxvbmdlciB0aGFuIDkwIGRheXMgc2hvdy91cGRhdGUgdGhlIGJhbm5lclxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGlmIHRoZXJlIGlzIG5vIHZhbHVlIHRoZW4gc2hvdy91cGRhdGUgdGhlIGJhbm5lclxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2hvd1Jldmlld1VzZXJzQmFubmVyKCkge1xuICAkKCcjcmV2aWV3LXVzZXJzLWJhbm5lcicpLnNob3coKTtcbn1cblxuZnVuY3Rpb24gc2V0UmV2aWV3VXNlcnNCYW5uZXJMYXN0U2VlbigpIHtcbiAgR292VUtDb29raWUuc2V0KENPT0tJRV9OQU1FUy5VU0VSX0JBTk5FUl9MQVNUX1NFRU4sIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbn1cblxuZnVuY3Rpb24gbG9hZFJldmlld1VzZXJzQmFubmVyKCkge1xuICBpZiAoY2hlY2tDb25kaXRpb25Gb3JVc2Vyc0Jhbm5lcigpKSB7XG4gICAgc2hvd1Jldmlld1VzZXJzQmFubmVyKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29va2llUmV2aWV3VXNlcnNCYW5uZXIoKSB7XG4gIGlmIChjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyKCkpIHtcbiAgICBzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuKCk7XG4gIH1cbn1cbiIsIi8vIDxkZXRhaWxzPiBwb2x5ZmlsbFxuLy8gaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWRldGFpbHNcblxuLy8gRkYgU3VwcG9ydCBmb3IgSFRNTDUncyA8ZGV0YWlscz4gYW5kIDxzdW1tYXJ5PlxuLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTkxNzM3XG5cbi8vIGh0dHA6Ly93d3cuc2l0ZXBvaW50LmNvbS9maXhpbmctdGhlLWRldGFpbHMtZWxlbWVudC9cblxuOyhmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHZhciBHT1ZVSyA9IGdsb2JhbC5HT1ZVSyB8fCB7fVxuXG4gIEdPVlVLLmRldGFpbHMgPSB7XG4gICAgTkFUSVZFX0RFVEFJTFM6IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJykub3BlbiA9PT0gJ2Jvb2xlYW4nLFxuICAgIEtFWV9FTlRFUjogMTMsXG4gICAgS0VZX1NQQUNFOiAzMixcblxuICAgIC8vIENyZWF0ZSBhIHN0YXJ0ZWQgZmxhZyBzbyB3ZSBjYW4gcHJldmVudCB0aGUgaW5pdGlhbGlzYXRpb25cbiAgICAvLyBmdW5jdGlvbiBmaXJpbmcgZnJvbSBib3RoIERPTUNvbnRlbnRMb2FkZWQgYW5kIHdpbmRvdy5vbmxvYWRcbiAgICBzdGFydGVkOiBmYWxzZSxcblxuICAgIC8vIEFkZCBldmVudCBjb25zdHJ1Y3QgZm9yIG1vZGVybiBicm93c2VycyBvciBJRVxuICAgIC8vIHdoaWNoIGZpcmVzIHRoZSBjYWxsYmFjayB3aXRoIGEgcHJlLWNvbnZlcnRlZCB0YXJnZXQgcmVmZXJlbmNlXG4gICAgYWRkRXZlbnQ6IGZ1bmN0aW9uIChub2RlLCB0eXBlLCBjYWxsYmFjaykge1xuICAgICAgaWYgKG5vZGUuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhlLCBlLnRhcmdldClcbiAgICAgICAgfSwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKG5vZGUuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgbm9kZS5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhlLCBlLnNyY0VsZW1lbnQpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZUV2ZW50OiBmdW5jdGlvbiAobm9kZSwgdHlwZSkge1xuICAgICAgaWYgKG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgfSwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKG5vZGUuZGV0YWNoRXZlbnQpIHtcbiAgICAgICAgbm9kZS5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gQ3Jvc3MtYnJvd3NlciBjaGFyYWN0ZXIgY29kZSAvIGtleSBwcmVzc2VkXG4gICAgY2hhckNvZGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gKHR5cGVvZiBlLndoaWNoID09PSAnbnVtYmVyJykgPyBlLndoaWNoIDogZS5rZXlDb2RlXG4gICAgfSxcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgcHJldmVudGluZyBkZWZhdWx0IGFjdGlvblxuICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gSGFuZGxlIGNyb3NzLW1vZGFsIGNsaWNrIGV2ZW50c1xuICAgIGFkZENsaWNrRXZlbnQ6IGZ1bmN0aW9uIChub2RlLCBjYWxsYmFjaykge1xuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCAna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIC8vIFdoZW4gdGhlIGtleSBnZXRzIHByZXNzZWQgLSBjaGVjayBpZiBpdCBpcyBlbnRlciBvciBzcGFjZVxuICAgICAgICBpZiAoR09WVUsuZGV0YWlscy5jaGFyQ29kZShlKSA9PT0gR09WVUsuZGV0YWlscy5LRVlfRU5URVIgfHwgR09WVUsuZGV0YWlscy5jaGFyQ29kZShlKSA9PT0gR09WVUsuZGV0YWlscy5LRVlfU1BBQ0UpIHtcbiAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzdW1tYXJ5Jykge1xuICAgICAgICAgICAgLy8gUHJldmVudCBzcGFjZSBmcm9tIHNjcm9sbGluZyB0aGUgcGFnZVxuICAgICAgICAgICAgLy8gYW5kIGVudGVyIGZyb20gc3VibWl0dGluZyBhIGZvcm1cbiAgICAgICAgICAgIEdPVlVLLmRldGFpbHMucHJldmVudERlZmF1bHQoZSlcbiAgICAgICAgICAgIC8vIENsaWNrIHRvIGxldCB0aGUgY2xpY2sgZXZlbnQgZG8gYWxsIHRoZSBuZWNlc3NhcnkgYWN0aW9uXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsaWNrKSB7XG4gICAgICAgICAgICAgIHRhcmdldC5jbGljaygpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBleGNlcHQgU2FmYXJpIDUuMSBhbmQgdW5kZXIgZG9uJ3Qgc3VwcG9ydCAuY2xpY2soKSBoZXJlXG4gICAgICAgICAgICAgIGNhbGxiYWNrKGUsIHRhcmdldClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIFByZXZlbnQga2V5dXAgdG8gcHJldmVudCBjbGlja2luZyB0d2ljZSBpbiBGaXJlZm94IHdoZW4gdXNpbmcgc3BhY2Uga2V5XG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KG5vZGUsICdrZXl1cCcsIGZ1bmN0aW9uIChlLCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX1NQQUNFKSB7XG4gICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZSA9PT0gJ1NVTU1BUlknKSB7XG4gICAgICAgICAgICBHT1ZVSy5kZXRhaWxzLnByZXZlbnREZWZhdWx0KGUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KG5vZGUsICdjbGljaycsIGZ1bmN0aW9uIChlLCB0YXJnZXQpIHtcbiAgICAgICAgY2FsbGJhY2soZSwgdGFyZ2V0KVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBuZWFyZXN0IGFuY2VzdG9yIGVsZW1lbnQgb2YgYSBub2RlIHRoYXQgbWF0Y2hlcyBhIGdpdmVuIHRhZyBuYW1lXG4gICAgZ2V0QW5jZXN0b3I6IGZ1bmN0aW9uIChub2RlLCBtYXRjaCkge1xuICAgICAgZG8ge1xuICAgICAgICBpZiAoIW5vZGUgfHwgbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBtYXRjaCkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZVxuICAgICAgfSB3aGlsZSAobm9kZSlcblxuICAgICAgcmV0dXJuIG5vZGVcbiAgICB9LFxuXG4gICAgLy8gSW5pdGlhbGlzYXRpb24gZnVuY3Rpb25cbiAgICBhZGREZXRhaWxzUG9seWZpbGw6IGZ1bmN0aW9uIChsaXN0LCBjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCBkb2N1bWVudC5ib2R5XG4gICAgICAvLyBJZiB0aGlzIGhhcyBhbHJlYWR5IGhhcHBlbmVkLCBqdXN0IHJldHVyblxuICAgICAgLy8gZWxzZSBzZXQgdGhlIGZsYWcgc28gaXQgZG9lc24ndCBoYXBwZW4gYWdhaW5cbiAgICAgIGlmIChHT1ZVSy5kZXRhaWxzLnN0YXJ0ZWQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBHT1ZVSy5kZXRhaWxzLnN0YXJ0ZWQgPSB0cnVlXG4gICAgICAvLyBHZXQgdGhlIGNvbGxlY3Rpb24gb2YgZGV0YWlscyBlbGVtZW50cywgYnV0IGlmIHRoYXQncyBlbXB0eVxuICAgICAgLy8gdGhlbiB3ZSBkb24ndCBuZWVkIHRvIGJvdGhlciB3aXRoIHRoZSByZXN0IG9mIHRoZSBzY3JpcHRpbmdcbiAgICAgIGlmICgobGlzdCA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGV0YWlscycpKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICAvLyBlbHNlIGl0ZXJhdGUgdGhyb3VnaCB0aGVtIHRvIGFwcGx5IHRoZWlyIGluaXRpYWwgc3RhdGVcbiAgICAgIHZhciBuID0gbGlzdC5sZW5ndGhcbiAgICAgIHZhciBpID0gMFxuICAgICAgZm9yIChpOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIHZhciBkZXRhaWxzID0gbGlzdFtpXVxuXG4gICAgICAgIC8vIFNhdmUgc2hvcnRjdXRzIHRvIHRoZSBpbm5lciBzdW1tYXJ5IGFuZCBjb250ZW50IGVsZW1lbnRzXG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5ID0gZGV0YWlscy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3VtbWFyeScpLml0ZW0oMClcbiAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQgPSBkZXRhaWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKS5pdGVtKDApXG5cbiAgICAgICAgaWYgKCFkZXRhaWxzLl9fc3VtbWFyeSB8fCAhZGV0YWlscy5fX2NvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgY29udGVudCBkb2Vzbid0IGhhdmUgYW4gSUQsIGFzc2lnbiBpdCBvbmUgbm93XG4gICAgICAgIC8vIHdoaWNoIHdlJ2xsIG5lZWQgZm9yIHRoZSBzdW1tYXJ5J3MgYXJpYS1jb250cm9scyBhc3NpZ25tZW50XG4gICAgICAgIGlmICghZGV0YWlscy5fX2NvbnRlbnQuaWQpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5pZCA9ICdkZXRhaWxzLWNvbnRlbnQtJyArIGlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBBUklBIHJvbGU9XCJncm91cFwiIHRvIGRldGFpbHNcbiAgICAgICAgZGV0YWlscy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZ3JvdXAnKVxuXG4gICAgICAgIC8vIEFkZCByb2xlPWJ1dHRvbiB0byBzdW1tYXJ5XG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKVxuXG4gICAgICAgIC8vIEFkZCBhcmlhLWNvbnRyb2xzXG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGRldGFpbHMuX19jb250ZW50LmlkKVxuXG4gICAgICAgIC8vIFNldCB0YWJJbmRleCBzbyB0aGUgc3VtbWFyeSBpcyBrZXlib2FyZCBhY2Nlc3NpYmxlIGZvciBub24tbmF0aXZlIGVsZW1lbnRzXG4gICAgICAgIC8vIGh0dHA6Ly93d3cuc2FsaWVuY2VzLmNvbS9icm93c2VyQnVncy90YWJJbmRleC5odG1sXG4gICAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnRhYkluZGV4ID0gMFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV0ZWN0IGluaXRpYWwgb3BlbiBzdGF0ZVxuICAgICAgICB2YXIgb3BlbkF0dHIgPSBkZXRhaWxzLmdldEF0dHJpYnV0ZSgnb3BlbicpICE9PSBudWxsXG4gICAgICAgIGlmIChvcGVuQXR0ciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJylcbiAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuICAgICAgICAgIGRldGFpbHMuX19jb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpXG4gICAgICAgICAgaWYgKCFHT1ZVSy5kZXRhaWxzLk5BVElWRV9ERVRBSUxTKSB7XG4gICAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgY2lyY3VsYXIgcmVmZXJlbmNlIGZyb20gdGhlIHN1bW1hcnkgYmFjayB0byBpdHNcbiAgICAgICAgLy8gcGFyZW50IGRldGFpbHMgZWxlbWVudCwgZm9yIGNvbnZlbmllbmNlIGluIHRoZSBjbGljayBoYW5kbGVyXG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5Ll9fZGV0YWlscyA9IGRldGFpbHNcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIG5vdCBhIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgY3JlYXRlIGFuIGFycm93XG4gICAgICAgIC8vIGluc2lkZSB0aGUgc3VtbWFyeVxuICAgICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgICB2YXIgdHdpc3R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpXG5cbiAgICAgICAgICBpZiAob3BlbkF0dHIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHR3aXN0eS5jbGFzc05hbWUgPSAnYXJyb3cgYXJyb3ctb3BlbidcbiAgICAgICAgICAgIHR3aXN0eS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXFx1MjViYycpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0d2lzdHkuY2xhc3NOYW1lID0gJ2Fycm93IGFycm93LWNsb3NlZCdcbiAgICAgICAgICAgIHR3aXN0eS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXFx1MjViYScpKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5Ll9fdHdpc3R5ID0gZGV0YWlscy5fX3N1bW1hcnkuaW5zZXJ0QmVmb3JlKHR3aXN0eSwgZGV0YWlscy5fX3N1bW1hcnkuZmlyc3RDaGlsZClcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5fX3R3aXN0eS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEJpbmQgYSBjbGljayBldmVudCB0byBoYW5kbGUgc3VtbWFyeSBlbGVtZW50c1xuICAgICAgR09WVUsuZGV0YWlscy5hZGRDbGlja0V2ZW50KGNvbnRhaW5lciwgZnVuY3Rpb24gKGUsIHN1bW1hcnkpIHtcbiAgICAgICAgaWYgKCEoc3VtbWFyeSA9IEdPVlVLLmRldGFpbHMuZ2V0QW5jZXN0b3Ioc3VtbWFyeSwgJ3N1bW1hcnknKSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHT1ZVSy5kZXRhaWxzLnN0YXRlY2hhbmdlKHN1bW1hcnkpXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICAvLyBEZWZpbmUgYSBzdGF0ZWNoYW5nZSBmdW5jdGlvbiB0aGF0IHVwZGF0ZXMgYXJpYS1leHBhbmRlZCBhbmQgc3R5bGUuZGlzcGxheVxuICAgIC8vIEFsc28gdXBkYXRlIHRoZSBhcnJvdyBwb3NpdGlvblxuICAgIHN0YXRlY2hhbmdlOiBmdW5jdGlvbiAoc3VtbWFyeSkge1xuICAgICAgdmFyIGV4cGFuZGVkID0gc3VtbWFyeS5fX2RldGFpbHMuX19zdW1tYXJ5LmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAndHJ1ZSdcbiAgICAgIHZhciBoaWRkZW4gPSBzdW1tYXJ5Ll9fZGV0YWlscy5fX2NvbnRlbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpID09PSAndHJ1ZSdcblxuICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIChleHBhbmRlZCA/ICdmYWxzZScgOiAndHJ1ZScpKVxuICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAoaGlkZGVuID8gJ2ZhbHNlJyA6ICd0cnVlJykpXG5cbiAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5fX2NvbnRlbnQuc3R5bGUuZGlzcGxheSA9IChleHBhbmRlZCA/ICdub25lJyA6ICcnKVxuXG4gICAgICAgIHZhciBoYXNPcGVuQXR0ciA9IHN1bW1hcnkuX19kZXRhaWxzLmdldEF0dHJpYnV0ZSgnb3BlbicpICE9PSBudWxsXG4gICAgICAgIGlmICghaGFzT3BlbkF0dHIpIHtcbiAgICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5zZXRBdHRyaWJ1dGUoJ29wZW4nLCAnb3BlbicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMucmVtb3ZlQXR0cmlidXRlKCdvcGVuJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3VtbWFyeS5fX3R3aXN0eSkge1xuICAgICAgICBzdW1tYXJ5Ll9fdHdpc3R5LmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gKGV4cGFuZGVkID8gJ1xcdTI1YmEnIDogJ1xcdTI1YmMnKVxuICAgICAgICBzdW1tYXJ5Ll9fdHdpc3R5LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoZXhwYW5kZWQgPyAnYXJyb3cgYXJyb3ctY2xvc2VkJyA6ICdhcnJvdyBhcnJvdy1vcGVuJykpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBHT1ZVSy5kZXRhaWxzLnJlbW92ZUV2ZW50KG5vZGUsICdjbGljaycpXG4gICAgfSxcblxuICAgIC8vIEJpbmQgdHdvIGxvYWQgZXZlbnRzIGZvciBtb2Rlcm4gYW5kIG9sZGVyIGJyb3dzZXJzXG4gICAgLy8gSWYgdGhlIGZpcnN0IG9uZSBmaXJlcyBpdCB3aWxsIHNldCBhIGZsYWcgdG8gYmxvY2sgdGhlIHNlY29uZCBvbmVcbiAgICAvLyBidXQgaWYgaXQncyBub3Qgc3VwcG9ydGVkIHRoZW4gdGhlIHNlY29uZCBvbmUgd2lsbCBmaXJlXG4gICAgaW5pdDogZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkRXZlbnQoZG9jdW1lbnQsICdET01Db250ZW50TG9hZGVkJywgR09WVUsuZGV0YWlscy5hZGREZXRhaWxzUG9seWZpbGwpXG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KHdpbmRvdywgJ2xvYWQnLCBHT1ZVSy5kZXRhaWxzLmFkZERldGFpbHNQb2x5ZmlsbClcbiAgICB9XG4gIH1cbiAgZ2xvYmFsLkdPVlVLID0gR09WVUtcbn0pKHdpbmRvdylcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgTlNBID0gTlNBIHx8IHt9O1xudmFyIGZpbHRlckJveGVzID0gJCgnLmZpbHRlci1ib3gnKTtcblxuTlNBLmZpbHRlcnMgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBmaWx0ZXJCb3hlcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhhdCA9ICQodGhpcyksXG4gICAgICAgICAgaGVhZGVyID0gJHRoYXQuZmluZCgnLmNvbnRhaW5lci1oZWFkJyksXG4gICAgICAgICAgdGl0bGUgPSBoZWFkZXIuZmluZCgnLm9wdGlvbi1zZWxlY3QtbGFiZWwnKSxcbiAgICAgICAgICBjaGVja2JveGVzID0gJHRoYXQuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKSxcbiAgICAgICAgICBidXR0b24gPSAkKCc8YnV0dG9uIC8+JykuYWRkQ2xhc3MoJ2pzLWNvbnRhaW5lci1oZWFkJyksXG4gICAgICAgICAgY2hlY2tDb3VudCA9ICQoJzxkaXYgLz4nKS5hZGRDbGFzcygnanMtc2VsZWN0ZWQtY291bnRlcicpO1xuXG4gICAgICBidXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAkKHRoaXMpLm5leHQoKTtcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Nsb3NlZCcpKSB7XG4gICAgICAgICAgb3B0aW9ucy5zaG93KCk7XG4gICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdjbG9zZWQnKVxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zLmhpZGUoKTtcbiAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2Nsb3NlZCcpXG4gICAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KS5hcHBlbmQodGl0bGUsIGNoZWNrQ291bnQpO1xuXG4gICAgICBoZWFkZXIucmVwbGFjZVdpdGgoYnV0dG9uKTtcblxuICAgICAgY2hlY2tib3hlcy5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0NvdW50LnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGNoZWNrYm94ZXMuZmlsdGVyKCc6Y2hlY2tlZCcpLmxlbmd0aCA+IDAgPyBjaGVja2JveGVzLmZpbHRlcignOmNoZWNrZWQnKS5sZW5ndGggKyAnIHNlbGVjdGVkJyA6ICcnO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmlmIChmaWx0ZXJCb3hlcy5sZW5ndGggPiAwKSB7XG4gIE5TQS5maWx0ZXJzLmluaXQoKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgTlNBID0gTlNBIHx8IHt9O1xuXG5OU0Euc2lnbmluID0ge1xuICBmb3JtOiAkKCcuZm9ybS1zaWduaW4nKSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0dXBFdmVudHMoKTtcbiAgfSxcbiAgc2V0dXBFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZvcm0ub24oJ3N1Ym1pdCcsIHRoaXMsIHRoaXMuaGFuZGxlU3VibWl0KTtcbiAgfSxcbiAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiAoZSkge1xuXG4gICAgdmFyICRmb3JtID0gJCh0aGlzKTtcbiAgICB2YXIgJGlucHV0cyA9ICRmb3JtLmZpbmQoJ2lucHV0Jykubm90KCc6Y2hlY2tib3gnKSwgcG9zdERhdGEgPSB7fSwgJHN1Ym1pdEJ1dHRvbnMgPSAkKHRoaXMpLmZpbmQoJ2J1dHRvbjpzdWJtaXQnKSwgJHN1Ym1pdEJ1dHRvbiA9ICRzdWJtaXRCdXR0b25zLmVxKDApO1xuXG4gICAgJHN1Ym1pdEJ1dHRvbnMuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuICAgICRzdWJtaXRCdXR0b24uY3NzKCdtaW4td2lkdGgnLCAkc3VibWl0QnV0dG9uLm91dGVyV2lkdGgoKSArICdweCcpXG5cbiAgICAkc3VibWl0QnV0dG9uLmZpbmQoJy5sb2FkZXInKS5yZW1vdmVDbGFzcygndmgnKTtcblxuICAgICRpbnB1dHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHBvc3REYXRhW3RoaXMubmFtZV0gPSAkKHRoaXMpLnZhbCgpO1xuICAgIH0pO1xuXG4gICAgLy8gSGlkZSBhbnkgcGFzc3dvcmQgaW5wdXRzIHdlIG1heSBoYXZlIGluIHRoZSBmb3JtXG4gICAgdmFyICRwYXNzd29yZElucHV0cyA9ICQoJy5wYXNzd29yZC1pbnB1dCcpO1xuICAgICRwYXNzd29yZElucHV0cy5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAvLyBIaWRlIHBhc3N3b3JkXG4gICAgICAkKHRoaXMpLmF0dHIoXCJ0eXBlXCIsIFwicGFzc3dvcmRcIik7XG4gICAgICAvLyBVcGRhdGUgdGV4dCBpbiBzaG93L2hpZGUgYnV0dG9uXG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuc2hvdy1wYXNzd29yZCcpLmh0bWwoJ1Nob3cnKTtcbiAgICB9KTtcblxuICAgICQuYWpheCh7XG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICBkYXRhOiBwb3N0RGF0YSxcbiAgICAgIHVybDogJGZvcm0uYXR0cignYWN0aW9uJyksXG4gICAgICBjb250ZXh0OiBlLmRhdGEsXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEucmVkaXJlY3QpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRhdGEudXJpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChkYXRhLmlzRmFpbGVkTG9naW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCRmb3JtKTtcbiAgICAgICAgICAgIGlmIChkYXRhLmRlbGF5VGlsbCkge1xuICAgICAgICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uTWVzc2FnZShkYXRhLnZhbGlkYXRpb25NZXNzYWdlcywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uTWVzc2FnZShkYXRhLnZhbGlkYXRpb25NZXNzYWdlcyk7XG4gICAgICAgICAgICAgICRzdWJtaXRCdXR0b25zLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3dJbmxpbmVWYWxpZGF0aW9uKGRhdGEudmFsaWRhdGlvbk1lc3NhZ2VzKTtcbiAgICAgICAgICAgICRzdWJtaXRCdXR0b24uZmluZCgnLmxvYWRlcicpLmFkZENsYXNzKCd2aCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkRm9ybUFuZFN1Ym1pdChkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCRmb3JtKTtcbiAgICAgICAgdGhpcy5zaG93VmFsaWRhdGlvbk1lc3NhZ2UoKTtcbiAgICAgICAgJHN1Ym1pdEJ1dHRvbnMucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgJHN1Ym1pdEJ1dHRvbi5maW5kKCcubG9hZGVyJykuYWRkQ2xhc3MoJ3ZoJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICByZXNldFZhbGlkYXRpb246IGZ1bmN0aW9uICgkZm9ybSkge1xuXG4gICAgJCgnLmdvdnVrLWVycm9yLXN1bW1hcnknKS5yZW1vdmUoKTtcblxuICAgIHZhciAkZm9ybUdyb3VwcyA9ICRmb3JtLmZpbmQoJy5nb3Z1ay1mb3JtLWdyb3VwJyk7XG5cbiAgICAkZm9ybUdyb3Vwcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkZmllbGQgPSAkKHRoaXMpLmZpbmQoJ2lucHV0JykuZXEoMCk7XG4gICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKSkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuICAgICAgICAkKHRoaXMpLmZpbmQoJ3NwYW4uZ292dWstZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xuICAgICAgICAkZmllbGQucmVtb3ZlQXR0cignYXJpYS1kZXNjcmliZWRieScpLnJlbW92ZUF0dHIoJ2FyaWEtaW52YWxpZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHNob3dWYWxpZGF0aW9uTWVzc2FnZTogZnVuY3Rpb24gKG1lc3NhZ2VzLCBzaG93UmVmcmVzaExpbmspIHtcblxuICAgIHZhciAkZGl2ID0gJCgnPGRpdiAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWVycm9yLXN1bW1hcnkgZ292dWstIS1tYXJnaW4tdG9wLTYnKS5hdHRyKCdyb2xlJywgJ2FsZXJ0JykuYXR0cigndGFiaW5kZXgnLCAnLTEnKS5hdHRyKCdhcmlhLWxhYmVsbGVkYnknLCAnZXJyb3Itc3VtbWFyeS10aXRsZScpO1xuICAgIHZhciAkaDIgPSAkKCc8aDIgLz4nKS5hdHRyKCdjbGFzcycsICdnb3Z1ay1lcnJvci1zdW1tYXJ5X190aXRsZScpLmF0dHIoJ2lkJywgJ2Vycm9yLXN1bW1hcnknKTtcbiAgICB2YXIgJHVsQ29udGFpbmVyID0gJCgnPGRpdiAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWVycm9yLXN1bW1hcnlfX2JvZHknKTtcbiAgICB2YXIgJHVsID0gJCgnPHVsIC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstbGlzdCBnb3Z1ay1lcnJvci1zdW1tYXJ5X19saXN0Jyk7XG5cbiAgICBpZiAobWVzc2FnZXMpIHtcbiAgICAgICRoMi50ZXh0KCdUaGVyZSBpcyBhIHByb2JsZW0nKTtcbiAgICAgICQuZWFjaChtZXNzYWdlcywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICBpZiAoaW5kZXggPT09ICdsb2dpbkVycm9yJykge1xuICAgICAgICAgIGluZGV4ID0gJ3VzZXJuYW1lJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgJGEgPSAkKCc8YSAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWxpbmsnKS5hdHRyKCdocmVmJywgJyMnICsgaW5kZXgpLnRleHQodmFsdWUpO1xuICAgICAgICB2YXIgJGxpID0gJCgnPGxpIC8+JykuYXBwZW5kKCRhKTtcbiAgICAgICAgJHVsLmFwcGVuZCgkbGkpO1xuICAgICAgfSk7XG4gICAgICBpZiAoc2hvd1JlZnJlc2hMaW5rKSB7XG4gICAgICAgIHZhciAkYSA9ICQoJzxhIC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstbGluay1ib2xkJykuYXR0cignaHJlZicsICcnKS5hdHRyKCdvbmNsaWNrJywgJ3dpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKScpLnRleHQoJ1JlZnJlc2ggdGhpcyBwYWdlJykuY3NzKCdjb2xvcicsICcjMWQ3MGI4Jyk7XG4gICAgICAgIHZhciAkbGkgPSAkKCc8bGkgLz4nKS5hcHBlbmQoJGEpO1xuICAgICAgICAkdWwuYXBwZW5kKCRsaSk7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgJGgyLnRleHQoJ1RoZXJlIGhhcyBiZWVuIGFuIGVycm9yJyk7XG4gICAgICB2YXIgJGxpID0gJCgnPGxpIC8+JykuaHRtbCgnUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4gSWYgdGhlIHByb2JsZW0gY29udGludWVzLCBmb2xsb3cgdGhlIGxpbmsgdG8gPGEgaHJlZj1cImh0dHBzOi8vaGVscC5zaWduaW4uZWR1Y2F0aW9uLmdvdi51ay9jb250YWN0L2Zvcm1cIj5zdWJtaXQgYSBzdXBwb3J0IHJlcXVlc3Q8L2E+Jyk7XG4gICAgICAkdWwuYXBwZW5kKCRsaSk7XG4gICAgfVxuXG4gICAgJGRpdi5hcHBlbmQoJGgyKS5hcHBlbmQoJHVsQ29udGFpbmVyLmFwcGVuZCgkdWwpKTtcbiAgICAkKCdtYWluJykucHJlcGVuZCgkZGl2KTtcblxuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogJGRpdi5vZmZzZXQoKS50b3AgLSAxNVxuICAgIH0sIDMwMCk7XG5cbiAgfSxcbiAgc2hvd0lubGluZVZhbGlkYXRpb246IGZ1bmN0aW9uKG1lc3NhZ2VzKSB7XG5cbiAgICAkLmVhY2gobWVzc2FnZXMsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG4gICAgICB2YXIgJGZpZWxkID0gJCgnaW5wdXRbbmFtZT0nICsgaW5kZXggKyAnXScpLFxuICAgICAgICAkcGFyZW50ID0gJGZpZWxkLnBhcmVudCgpO1xuXG4gICAgICB2YXIgJGxhYmVsID0gJHBhcmVudC5maW5kKCdsYWJlbCcpLmZpcnN0KCk7XG5cbiAgICAgIGlmICghJHBhcmVudC5oYXNDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKSkge1xuXG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAkKCc8c3BhbiBjbGFzcz1cImdvdnVrLWJvZHlcIj4nKVxuICAgICAgICAgIC5odG1sKHZhbHVlKVxuICAgICAgICAgIC5wcm9wKCdjbGFzcycsICdnb3Z1ay1lcnJvci1tZXNzYWdlJylcbiAgICAgICAgICAucHJvcCgnaWQnLCAndmFsaWRhdGlvbi0nICsgaW5kZXgpO1xuICAgICAgfVxuXG4gICAgICAkbGFiZWwuYWZ0ZXIoZXJyb3JNZXNzYWdlKTtcbiAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJyk7XG4gICAgICAkZmllbGQuYXR0cih7XG4gICAgICAgICdhcmlhLWRlc2NyaWJlZGJ5JyA6ICd2YWxpZGF0aW9uLScgKyBpbmRleCxcbiAgICAgICAgJ2FyaWEtaW52YWxpZCc6ICd0cnVlJ1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICB9LFxuICBidWlsZEZvcm1BbmRTdWJtaXQ6IGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICB2YXIgJGZvcm0gPSAkKCc8Zm9ybSAvPicpLmF0dHIoe1xuICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICBhY3Rpb246IGRhdGEuZGVzdGluYXRpb24sXG4gICAgICBpZDogJ2RmZXNpZ25pbmZvcm0nXG4gICAgfSk7XG5cbiAgICAkLmVhY2goZGF0YS5wb3N0YmFja0RhdGEsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG4gICAgICB2YXIgJGZpZWxkID0gJCgnPGlucHV0IC8+JykuYXR0cih7XG4gICAgICAgIHR5cGU6ICdoaWRkZW4nLFxuICAgICAgICBuYW1lOiBpbmRleCxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9KTtcbiAgICAgICRmb3JtLmFwcGVuZCgkZmllbGQpO1xuICAgIH0pO1xuXG4gICAgJCgnI2RmZXNpZ25pbmZvcm0nKS5yZW1vdmUoKTtcbiAgICAkKCdib2R5JykuYXBwZW5kKCRmb3JtKTtcbiAgICAkZm9ybS5zdWJtaXQoKTtcbiAgfSxcbn07XG5cbmlmICgkKCcuZm9ybS1zaWduaW4nKS5sZW5ndGggPiAwKSB7XG4gIE5TQS5zaWduaW4uaW5pdCgpO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSwgdXJsKSB7XG4gIGlmICghdXJsKSB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgXCJcXFxcJCZcIik7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbPyZdXCIgKyBuYW1lICsgXCIoPShbXiYjXSopfCZ8I3wkKVwiKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpIHJldHVybiBudWxsO1xuICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIHNvcnRUYWJsZShuKSB7XG4gIHZhciB0YWJsZSwgcm93cywgc3dpdGNoaW5nLCBpLCB4LCB5LCBzaG91bGRTd2l0Y2gsIGRpcmVjdGlvbiwgc3dpdGNoY291bnQgPSAwO1xuICB0YWJsZSA9ICQoJ3RhYmxlLnNvcnRhYmxlJyk7XG4gIHN3aXRjaGluZyA9IHRydWU7XG4gIGRpcmVjdGlvbiA9ICdhJztcblxuICB3aGlsZSAoc3dpdGNoaW5nKSB7XG5cbiAgICBzd2l0Y2hpbmcgPSBmYWxzZTtcbiAgICByb3dzID0gdGFibGUuZmluZCgndHInKTtcblxuICAgIGZvciAoaSA9IDE7IGkgPCAocm93cy5sZW5ndGggLSAxKTsgaSsrKSB7XG5cbiAgICAgIHNob3VsZFN3aXRjaCA9IGZhbHNlO1xuXG4gICAgICB4ID0gcm93c1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVEQnKVtuXTtcbiAgICAgIHkgPSByb3dzW2kgKyAxXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVEQnKVtuXTtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2EnKSB7XG4gICAgICAgIGlmICh4LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpID4geS5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHNob3VsZFN3aXRjaCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZCcpIHtcbiAgICAgICAgaWYgKHguaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkgPCB5LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzaG91bGRTd2l0Y2gpIHtcblxuICAgICAgcm93c1tpXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShyb3dzW2kgKyAxXSwgcm93c1tpXSk7XG4gICAgICBzd2l0Y2hpbmcgPSB0cnVlO1xuXG4gICAgICBzd2l0Y2hjb3VudCArKztcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmIChzd2l0Y2hjb3VudCA9PT0gMCAmJiBkaXJlY3Rpb24gPT09ICdhJykge1xuICAgICAgICBkaXJlY3Rpb24gPSAnZCc7XG4gICAgICAgIHN3aXRjaGluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRpcmVjdGlvbjtcbn1cblxuJChmdW5jdGlvbiAoKSB7XG5cbiAgJCgndGFibGUuc29ydGFibGUgdGhlYWQgdGgnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgaGVhZGluZ0NlbGxzID0gJCgndGFibGUuc29ydGFibGUgdGhlYWQgdHIgdGgnKTtcblxuICAgIGhlYWRpbmdDZWxscy5yZW1vdmVDbGFzcygnc29ydGVkJykucmVtb3ZlQ2xhc3MoJ2Rpci1hJykucmVtb3ZlQ2xhc3MoJ2Rpci1kJyk7XG5cbiAgICB2YXIgaW5kZXggPSBoZWFkaW5nQ2VsbHMuaW5kZXgoJCh0aGlzKSk7XG5cbiAgICB2YXIgZGlyZWN0aW9uID0gc29ydFRhYmxlKGluZGV4KTtcblxuICAgICQodGhpcykuYWRkQ2xhc3MoJ3NvcnRlZCBkaXItJyArIGRpcmVjdGlvbik7XG5cbiAgfSk7XG5cbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBOU0EgPSBOU0EgfHwge307XG5cbk5TQS5tb2RhbCA9IHtcbiAgZWxlbXM6IHtcbiAgICBsaW5rczogJCgnLm1vZGFsLWxpbmsnKSxcbiAgICBtb2RhbHM6ICQoJy5tb2RhbCcpXG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1vZGFsQmcoKTtcbiAgICB0aGlzLnNldFVwRXZlbnRzKCk7XG4gIH0sXG4gIG1vZGFsQmc6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGJnID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbW9kYWwtYmcnKS5oaWRlKCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgeyB0aGF0LmhpZGVNb2RhbHMoKTsgfSk7XG4gICAgJCgnYm9keScpLmFwcGVuZChiZyk7XG4gIH0sXG4gIHNldFVwRXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuZWxlbXMubGlua3Mub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgIHRoYXQuc2hvd01vZGFsKCQodGFyZ2V0KSk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGF0LmVsZW1zLm1vZGFscy5maW5kKCcuY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhhdC5oaWRlTW9kYWxzKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAkKCdib2R5Jykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKChlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IDI3KVxuICAgICAgICB0aGF0LmhpZGVNb2RhbHMoKTtcbiAgICB9KTtcbiAgfSxcbiAgc2hvd01vZGFsOiBmdW5jdGlvbiAobW9kYWwpIHtcbiAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmcnKS5zaG93KCk7XG4gICAgbW9kYWwuc2hvdygpO1xuICB9LFxuICBoaWRlTW9kYWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJnJykuaGlkZSgpO1xuICAgIHRoaXMuZWxlbXMubW9kYWxzLmhpZGUoKTtcbiAgfVxufVxuXG5OU0EubW9kYWwuaW5pdCgpO1xuIiwiOyhmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHZhciAkID0gZ2xvYmFsLmpRdWVyeVxuICB2YXIgR09WVUsgPSBnbG9iYWwuR09WVUsgfHwge31cblxuICBmdW5jdGlvbiBTaG93SGlkZUNvbnRlbnQgKCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuXG4gICAgLy8gUmFkaW8gYW5kIENoZWNrYm94IHNlbGVjdG9yc1xuICAgIHZhciBzZWxlY3RvcnMgPSB7XG4gICAgICBuYW1lc3BhY2U6ICdTaG93SGlkZUNvbnRlbnQnLFxuICAgICAgcmFkaW86ICdbZGF0YS10YXJnZXRdID4gaW5wdXRbdHlwZT1cInJhZGlvXCJdJyxcbiAgICAgIGNoZWNrYm94OiAnW2RhdGEtdGFyZ2V0XSA+IGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScsXG4gICAgICBsaW5rOiAnYS5qcy10b2dnbGUtY29udGVudCdcbiAgICB9XG5cbiAgICAvLyBFc2NhcGUgbmFtZSBhdHRyaWJ1dGUgZm9yIHVzZSBpbiBET00gc2VsZWN0b3JcbiAgICBmdW5jdGlvbiBlc2NhcGVFbGVtZW50TmFtZSAoc3RyKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gc3RyLnJlcGxhY2UoJ1snLCAnXFxcXFsnKS5yZXBsYWNlKCddJywgJ1xcXFxdJylcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG5cbiAgICAvLyBBZGRzIEFSSUEgYXR0cmlidXRlcyB0byBjb250cm9sICsgYXNzb2NpYXRlZCBjb250ZW50XG4gICAgZnVuY3Rpb24gaW5pdFRvZ2dsZWRDb250ZW50ICgpIHtcbiAgICAgIHZhciAkY29udHJvbCA9ICQodGhpcylcbiAgICAgIHZhciAkY29udGVudCA9IGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKVxuXG4gICAgICAvLyBTZXQgYXJpYS1jb250cm9scyBhbmQgZGVmYXVsdHNcbiAgICAgIGlmICgkY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgJGNvbnRyb2wuYXR0cignYXJpYS1jb250cm9scycsICRjb250ZW50LmF0dHIoJ2lkJykpXG4gICAgICAgICRjb250cm9sLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuICAgICAgICAkY29udGVudC5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdG9nZ2xlZCBjb250ZW50IGZvciBjb250cm9sXG4gICAgZnVuY3Rpb24gZ2V0VG9nZ2xlZENvbnRlbnQgKCRjb250cm9sKSB7XG4gICAgICB2YXIgaWQgPSAkY29udHJvbC5hdHRyKCdhcmlhLWNvbnRyb2xzJylcblxuICAgICAgLy8gQVJJQSBhdHRyaWJ1dGVzIGFyZW4ndCBzZXQgYmVmb3JlIGluaXRcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgaWQgPSAkY29udHJvbC5jbG9zZXN0KCdbZGF0YS10YXJnZXRdJykuZGF0YSgndGFyZ2V0JylcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCBzaG93L2hpZGUgY29udGVudCBieSBpZFxuICAgICAgcmV0dXJuICQoJyMnICsgaWQpXG4gICAgfVxuXG4gICAgLy8gU2hvdyB0b2dnbGVkIGNvbnRlbnQgZm9yIGNvbnRyb2xcbiAgICBmdW5jdGlvbiBzaG93VG9nZ2xlZENvbnRlbnQgKCRjb250cm9sLCAkY29udGVudCkge1xuICAgICAgLy8gU2hvdyBjb250ZW50XG4gICAgICBpZiAoJGNvbnRlbnQuaGFzQ2xhc3MoJ2pzLWhpZGRlbicpKSB7XG4gICAgICAgICRjb250ZW50LnJlbW92ZUNsYXNzKCdqcy1oaWRkZW4nKVxuICAgICAgICAkY29udGVudC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpXG5cbiAgICAgICAgLy8gSWYgdGhlIGNvbnRyb2xsaW5nIGlucHV0LCB1cGRhdGUgYXJpYS1leHBhbmRlZFxuICAgICAgICBpZiAoJGNvbnRyb2wuYXR0cignYXJpYS1jb250cm9scycpKSB7XG4gICAgICAgICAgJGNvbnRyb2wuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhpZGUgdG9nZ2xlZCBjb250ZW50IGZvciBjb250cm9sXG4gICAgZnVuY3Rpb24gaGlkZVRvZ2dsZWRDb250ZW50ICgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgICRjb250ZW50ID0gJGNvbnRlbnQgfHwgZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpXG5cbiAgICAgIC8vIEhpZGUgY29udGVudFxuICAgICAgaWYgKCEkY29udGVudC5oYXNDbGFzcygnanMtaGlkZGVuJykpIHtcbiAgICAgICAgJGNvbnRlbnQuYWRkQ2xhc3MoJ2pzLWhpZGRlbicpXG4gICAgICAgICRjb250ZW50LmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuXG4gICAgICAgIC8vIElmIHRoZSBjb250cm9sbGluZyBpbnB1dCwgdXBkYXRlIGFyaWEtZXhwYW5kZWRcbiAgICAgICAgaWYgKCRjb250cm9sLmF0dHIoJ2FyaWEtY29udHJvbHMnKSkge1xuICAgICAgICAgICRjb250cm9sLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHJhZGlvIHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJhZGlvQ29udGVudCAoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAvLyBBbGwgcmFkaW9zIGluIHRoaXMgZ3JvdXAgd2hpY2ggY29udHJvbCBjb250ZW50XG4gICAgICB2YXIgc2VsZWN0b3IgPSBzZWxlY3RvcnMucmFkaW8gKyAnW25hbWU9JyArIGVzY2FwZUVsZW1lbnROYW1lKCRjb250cm9sLmF0dHIoJ25hbWUnKSkgKyAnXVthcmlhLWNvbnRyb2xzXSdcbiAgICAgIHZhciAkZm9ybSA9ICRjb250cm9sLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgdmFyICRyYWRpb3MgPSAkZm9ybS5sZW5ndGggPyAkZm9ybS5maW5kKHNlbGVjdG9yKSA6ICQoc2VsZWN0b3IpXG5cbiAgICAgIC8vIEhpZGUgY29udGVudCBmb3IgcmFkaW9zIGluIGdyb3VwXG4gICAgICAkcmFkaW9zLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBoaWRlVG9nZ2xlZENvbnRlbnQoJCh0aGlzKSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlbGVjdCBjb250ZW50IGZvciB0aGlzIGNvbnRyb2xcbiAgICAgIGlmICgkY29udHJvbC5pcygnW2FyaWEtY29udHJvbHNdJykpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY2hlY2tib3ggc2hvdy9oaWRlXG4gICAgZnVuY3Rpb24gaGFuZGxlQ2hlY2tib3hDb250ZW50ICgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgIC8vIFNob3cgY2hlY2tib3ggY29udGVudFxuICAgICAgaWYgKCRjb250cm9sLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgIHNob3dUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpXG4gICAgICB9IGVsc2UgeyAvLyBIaWRlIGNoZWNrYm94IGNvbnRlbnRcbiAgICAgICAgaGlkZVRvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY2hlY2tib3ggc2hvdy9oaWRlXG4gICAgZnVuY3Rpb24gaGFuZGxlTGlua0NvbnRlbnQgKCRjb250cm9sLCAkY29udGVudCwgJGV2ZW50KSB7XG4gICAgICBpZiAoJGNvbnRlbnQuaGFzQ2xhc3MoJ2pzLWhpZGRlbicpKSB7XG4gICAgICAgIHNob3dUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRlVG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KVxuICAgICAgfVxuICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlcnMgZXRjXG4gICAgZnVuY3Rpb24gaW5pdCAoJGNvbnRhaW5lciwgZWxlbWVudFNlbGVjdG9yLCBldmVudFNlbGVjdG9ycywgaGFuZGxlcikge1xuICAgICAgJGNvbnRhaW5lciA9ICRjb250YWluZXIgfHwgJChkb2N1bWVudC5ib2R5KVxuXG4gICAgICAvLyBIYW5kbGUgY29udHJvbCBjbGlja3NcbiAgICAgIGZ1bmN0aW9uIGRlZmVycmVkIChldmVudCkge1xuICAgICAgICB2YXIgJGNvbnRyb2wgPSAkKHRoaXMpXG4gICAgICAgIGhhbmRsZXIoJGNvbnRyb2wsIGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKSwgZXZlbnQpXG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgQVJJQSBhdHRyaWJ1dGVzXG4gICAgICB2YXIgJGNvbnRyb2xzID0gJChlbGVtZW50U2VsZWN0b3IpXG4gICAgICAkY29udHJvbHMuZWFjaChpbml0VG9nZ2xlZENvbnRlbnQpXG5cbiAgICAgIC8vIEhhbmRsZSBldmVudHNcbiAgICAgICQuZWFjaChldmVudFNlbGVjdG9ycywgZnVuY3Rpb24gKGlkeCwgZXZlbnRTZWxlY3Rvcikge1xuICAgICAgICAkY29udGFpbmVyLm9uKCdjbGljay4nICsgc2VsZWN0b3JzLm5hbWVzcGFjZSwgZXZlbnRTZWxlY3RvciwgZGVmZXJyZWQpXG4gICAgICB9KVxuXG4gICAgICAvLyBBbnkgYWxyZWFkeSA6Y2hlY2tlZCBvbiBpbml0P1xuICAgICAgaWYgKCRjb250cm9scy5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAkY29udHJvbHMuZmlsdGVyKCc6Y2hlY2tlZCcpLmVhY2goZGVmZXJyZWQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IGV2ZW50IHNlbGVjdG9ycyBmb3IgYWxsIHJhZGlvIGdyb3Vwc1xuICAgIGZ1bmN0aW9uIGdldEV2ZW50U2VsZWN0b3JzRm9yUmFkaW9Hcm91cHMgKCkge1xuICAgICAgdmFyIHJhZGlvR3JvdXBzID0gW11cblxuICAgICAgLy8gQnVpbGQgYW4gYXJyYXkgb2YgcmFkaW8gZ3JvdXAgc2VsZWN0b3JzXG4gICAgICByZXR1cm4gJChzZWxlY3RvcnMucmFkaW8pLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBncm91cE5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKVxuXG4gICAgICAgIGlmICgkLmluQXJyYXkoZ3JvdXBOYW1lLCByYWRpb0dyb3VwcykgPT09IC0xKSB7XG4gICAgICAgICAgcmFkaW9Hcm91cHMucHVzaChncm91cE5hbWUpXG4gICAgICAgICAgcmV0dXJuICdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cIicgKyAkKHRoaXMpLmF0dHIoJ25hbWUnKSArICdcIl0nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gU2V0IHVwIHJhZGlvIHNob3cvaGlkZSBjb250ZW50IGZvciBjb250YWluZXJcbiAgICBzZWxmLnNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBpbml0KCRjb250YWluZXIsIHNlbGVjdG9ycy5yYWRpbywgZ2V0RXZlbnRTZWxlY3RvcnNGb3JSYWRpb0dyb3VwcygpLCBoYW5kbGVSYWRpb0NvbnRlbnQpXG4gICAgfVxuXG4gICAgLy8gU2V0IHVwIGNoZWNrYm94IHNob3cvaGlkZSBjb250ZW50IGZvciBjb250YWluZXJcbiAgICBzZWxmLnNob3dIaWRlQ2hlY2tib3hUb2dnbGVkQ29udGVudCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBpbml0KCRjb250YWluZXIsIHNlbGVjdG9ycy5jaGVja2JveCwgW3NlbGVjdG9ycy5jaGVja2JveF0sIGhhbmRsZUNoZWNrYm94Q29udGVudClcbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgbGlua3Mgc2hvdy9oaWRlIGNvbnRlbnQgZm9yIGNvbnRhaW5lclxuICAgIHNlbGYuc2hvd0hpZGVMaW5rVG9nZ2xlZENvbnRlbnQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgaW5pdCgkY29udGFpbmVyLCBzZWxlY3RvcnMubGluaywgW3NlbGVjdG9ycy5saW5rXSwgaGFuZGxlTGlua0NvbnRlbnQpXG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGhhbmRsZXJzXG4gICAgc2VsZi5kZXN0cm95ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgICRjb250YWluZXIgPSAkY29udGFpbmVyIHx8ICQoZG9jdW1lbnQuYm9keSlcbiAgICAgICRjb250YWluZXIub2ZmKCcuJyArIHNlbGVjdG9ycy5uYW1lc3BhY2UpXG4gICAgfVxuICB9XG5cbiAgU2hvd0hpZGVDb250ZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICB0aGlzLnNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCgkY29udGFpbmVyKVxuICAgIHRoaXMuc2hvd0hpZGVDaGVja2JveFRvZ2dsZWRDb250ZW50KCRjb250YWluZXIpXG4gICAgdGhpcy5zaG93SGlkZUxpbmtUb2dnbGVkQ29udGVudCgkY29udGFpbmVyKVxuICB9XG5cbiAgR09WVUsuU2hvd0hpZGVDb250ZW50ID0gU2hvd0hpZGVDb250ZW50XG4gIGdsb2JhbC5HT1ZVSyA9IEdPVlVLXG59KSh3aW5kb3cpXG4iLCJ2YXIgdG9nZ2xlVGlwcyA9ICQoJy50b2dnbGUtaGVscCcpO1xuXG50b2dnbGVUaXBzLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gIHZhciAkdGhhdCxcbiAgICBsaXZlUmVnaW9uLFxuICAgIGNvbnRhaW5lcixcbiAgICB0b2dnbGVUaXA7XG5cbiAgJHRoYXQgPSAkKHRoaXMpO1xuXG4gIGNvbnRhaW5lciA9ICQoJzxzcGFuIC8+JykuYXR0cignY2xhc3MnLCAndG9nZ2xldGlwJyk7XG5cbiAgdG9nZ2xlVGlwID0gJCgnPGJ1dHRvbiAvPicpXG4gICAgLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICAuYXR0cignYXJpYS1sYWJlbCcsICdIZWxwJylcbiAgICAuYXR0cignZGF0YS10b2dnbGV0aXAtY29udGVudCcsICR0aGF0Lmh0bWwoKSlcbiAgICAudGV4dCgnPycpXG4gICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtZXNzYWdlID0gJCh0aGlzKS5kYXRhKCd0b2dnbGV0aXAtY29udGVudCcpO1xuICAgICAgdmFyIGxpdmVSZWdpb24gPSAkKHRoaXMpLm5leHQoKTtcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGl2ZVJlZ2lvbi5odG1sKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gJCgnPHNwYW4gLz4nKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHRoYXQuaHRtbCgpLmxlbmd0aCA+IDUwID8gJ2J1YmJsZSBsb25nJyA6ICdidWJibGUnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRleHQobWVzc2FnZSlcbiAgICAgICAgfSlcbiAgICAgIH0sIDEwMCk7XG4gICAgfSlcbiAgICAub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKChlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IDI3KVxuICAgICAgICBsaXZlUmVnaW9uLmh0bWwoJycpO1xuICAgIH0pO1xuXG4gIGxpdmVSZWdpb24gPSAkKCc8c3BhbiAvPicpXG4gICAgLmF0dHIoJ3JvbGUnLCAnc3RhdHVzJyk7XG5cbiAgY29udGFpbmVyLmFwcGVuZCh0b2dnbGVUaXAsIGxpdmVSZWdpb24pO1xuXG4gICR0aGF0LmJlZm9yZShjb250YWluZXIpLnJlbW92ZSgpO1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKCR0aGF0WzBdICE9PSAkKGUudGFyZ2V0KSkge1xuICAgICAgbGl2ZVJlZ2lvbi5odG1sKCcnKTtcbiAgICB9XG4gIH0pO1xuXG59KTtcbiIsImZ1bmN0aW9uIHZhbGlkYXRlUGFzc3dvcmQoKSB7XG4gIHZhciBpZCA9ICAkKHRoaXMpLmF0dHIoXCJpZFwiKVxuICAkKGAjdmFsaWRhdGlvbi1mZWVkYmFjay0ke2lkfWApLnNsaWRlRG93bigpO1xuICAvKkFycmF5IG9mIHJ1bGVzIGFuZCB0aGUgaW5mb3JtYXRpb24gdGFyZ2V0Ki9cbiAgdmFyIHJ1bGVzID0gW3tcbiAgICAgIFBhdHRlcm46IFwiW0EtWl17Mn1cIixcbiAgICAgIFRhcmdldDogYHVwcGVyLWNhc2UtJHtpZH1gXG4gICAgfSxcbiAgICB7XG4gICAgICBQYXR0ZXJuOiBcIlthLXpdezJ9XCIsXG4gICAgICBUYXJnZXQ6IGBsb3dlci1jYXNlLSR7aWR9YFxuICAgIH0sXG4gICAge1xuICAgICAgUGF0dGVybjogXCJbMC05XXsyfVwiLFxuICAgICAgVGFyZ2V0OiBgbnVtYmVycy0ke2lkfWBcbiAgICB9LFxuICBdO1xuICB2YXIgcGFzc3dvcmQgPSAkKHRoaXMpLnZhbCgpO1xuICAkKGAjbGVuZ3RoLSR7aWR9YCkucmVtb3ZlQ2xhc3MocGFzc3dvcmQubGVuZ3RoID4gNyA/IFwiaWNvbi1yZW1vdmVcIiA6IFwiaWNvbi1va1wiKTtcbiAgJChgI2xlbmd0aC0ke2lkfWApLmFkZENsYXNzKHBhc3N3b3JkLmxlbmd0aCA+IDcgPyBcImljb24tb2tcIiA6IFwiaWNvbi1yZW1vdmVcIik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICQoXCIjXCIgKyBydWxlc1tpXS5UYXJnZXQpLnJlbW92ZUNsYXNzKG5ldyBSZWdFeHAocnVsZXNbaV0uUGF0dGVybikudGVzdChwYXNzd29yZCkgPyBcImljb24tcmVtb3ZlXCIgOiBcImljb24tb2tcIik7IFxuICAgICQoXCIjXCIgKyBydWxlc1tpXS5UYXJnZXQpLmFkZENsYXNzKG5ldyBSZWdFeHAocnVsZXNbaV0uUGF0dGVybikudGVzdChwYXNzd29yZCkgPyBcImljb24tb2tcIiA6IFwiaWNvbi1yZW1vdmVcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGlzZVZhbGlkYXRlUGFzc3dvcmQoKSB7XG4gIHZhciAkcGFzc3dvcmRJbnB1dCA9ICQodGhpcylcbiAgdmFyIGlkID0gJHBhc3N3b3JkSW5wdXQuYXR0cihcImlkXCIpXG4gIHZhciB2YWxpZGF0ZVBhc3N3b3JkSHRtbCA9ICQoYDxkaXYgaWQ9J3ZhbGlkYXRpb24tZmVlZGJhY2stJHtpZH0nIHN0eWxlPSdkaXNwbGF5OiBub25lOyc+YClcbiAgLmFwcGVuZChgPGRpdiBpZD0nbGVuZ3RoLSR7aWR9JyBjbGFzcz0naWNvbi1yZW1vdmUnPjggY2hhcmN0ZXJzIG1pbmltdW08L2Rpdj5gKVxuICAuYXBwZW5kKGA8ZGl2IGlkPSd1cHBlci1jYXNlLSR7aWR9JyBjbGFzcz0naWNvbi1yZW1vdmUnPmNvbnRhaW4gYXQgbGVhc3QgMiB1cHBlci1jYXNlIGNoYXJhY3RlcnM8L2Rpdj5gKVxuICAuYXBwZW5kKGA8ZGl2IGlkPSdsb3dlci1jYXNlLSR7aWR9JyBjbGFzcz0naWNvbi1yZW1vdmUnPmNvbnRhaW4gYXQgbGVhc3QgMiBsb3dlci1jYXNlIGNoYXJhY3RlcnM8L2Rpdj5gKVxuICAuYXBwZW5kKGA8ZGl2IGlkPSdudW1iZXJzLSR7aWR9JyBjbGFzcz0naWNvbi1yZW1vdmUnPmNvbnRhaW4gYXQgbGVhc3QgMiBudW1iZXJzPC9kaXY+YCk7XG5cbiAgJHBhc3N3b3JkSW5wdXQuYmVmb3JlKHZhbGlkYXRlUGFzc3dvcmRIdG1sKTtcbn1cblxuJCgnLnBhc3N3b3JkLWlucHV0LWNoZWNrJykub25lKCdjbGljaycsIGluaXRpYWxpc2VWYWxpZGF0ZVBhc3N3b3JkKTtcbiQoJy5wYXNzd29yZC1pbnB1dC1jaGVjaycpLm9uKCdrZXl1cCcsIHZhbGlkYXRlUGFzc3dvcmQpO1xuIiwidmFyIGZvcm1zID0gJCgnI2NvbnRlbnQgZm9ybScpO1xuLy92YXIgaW5wdXRzID0gZm9ybXMuZmluZCgnLmZvcm0tZ3JvdXAgaW5wdXQnKTtcblxuZm9ybXMuYXR0cignbm92YWxpZGF0ZScsICdub3ZhbGlkYXRlJyk7XG5cbi8qXG5mb3Jtcy5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xuICBpbnB1dHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICBzaG93VmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpZGVWYWxpZGF0aW9uTWVzc2FnZSh0aGlzKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdGhpcy5jaGVja1ZhbGlkaXR5KCk7XG59KTtcblxuaW5wdXRzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICB2YXIgcmVzdWx0ID0gdGhpcy5jaGVja1ZhbGlkaXR5KCk7XG4gIGlmICghcmVzdWx0KSB7XG4gICAgc2hvd1ZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVWYWxpZGF0aW9uTWVzc2FnZSh0aGlzKTtcbiAgfVxufSk7XG5cbnZhciBzaG93VmFsaWRhdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAoZmllbGQpIHtcblxuICB2YXIgZmllbGQgPSBmaWVsZCxcbiAgICAkZmllbGQgPSAkKGZpZWxkKSxcbiAgICAkcGFyZW50ID0gJGZpZWxkLnBhcmVudCgpO1xuXG4gIGlmICgkcGFyZW50Lmhhc0NsYXNzKCdzaG93LXBhc3N3b3JkJykpIHtcbiAgICAkcGFyZW50ID0gJHBhcmVudC5wYXJlbnQoKTtcbiAgfVxuXG4gIGlmICghJHBhcmVudC5oYXNDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKSkge1xuXG4gICAgdmFyIGxhYmVsVGV4dCA9ICRmaWVsZC5kYXRhKCdsYWJlbCcpIHx8ICQoXCJsYWJlbFtmb3I9J1wiICsgJGZpZWxkLmF0dHIoJ2lkJykgKyBcIiddXCIpLnRleHQoKSxcbiAgICAgIGVycm9yTWVzc2FnZVRleHQgPSAnRW50ZXIgYSB2YWxpZCAnICsgbGFiZWxUZXh0LnRvTG93ZXJDYXNlKCksXG4gICAgICBlcnJvck1lc3NhZ2UgPSAkKCc8cCBjbGFzcz1cImdvdnVrLWJvZHlcIj4nKVxuICAgICAgICAuaHRtbChlcnJvck1lc3NhZ2VUZXh0KVxuICAgICAgICAucHJvcCgnY2xhc3MnLCAnZXJyb3ItbWVzc2FnZScpXG4gICAgICAgIC5wcm9wKCdpZCcsICd2YWxpZGF0aW9uLScgKyBzbHVnaWZ5KGxhYmVsVGV4dCkpO1xuXG4gICAgJGZpZWxkLmJlZm9yZShlcnJvck1lc3NhZ2UpO1xuICAgICRwYXJlbnQuYWRkQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJyk7XG4gICAgJGZpZWxkLmF0dHIoe1xuICAgICAgJ2FyaWEtZGVzY3JpYmVkYnknIDogJ3ZhbGlkYXRpb24tJyArIHNsdWdpZnkobGFiZWxUZXh0KSxcbiAgICAgICdhcmlhLWludmFsaWQnOiAndHJ1ZSdcbiAgICB9KTtcbiAgfVxufVxuXG52YXIgaGlkZVZhbGlkYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gIHZhciBmaWVsZCA9IGZpZWxkLFxuICAgICRmaWVsZCA9ICQoZmllbGQpLFxuICAgICRwYXJlbnQgPSAkZmllbGQucGFyZW50KCk7XG5cbiAgaWYgKCRwYXJlbnQuaGFzQ2xhc3MoJ3Nob3ctcGFzc3dvcmQnKSkge1xuICAgICRwYXJlbnQgPSAkcGFyZW50LnBhcmVudCgpO1xuICB9XG5cbiAgJHBhcmVudC5yZW1vdmVDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKTtcbiAgJHBhcmVudC5maW5kKCdwLmVycm9yLW1lc3NhZ2UnKS5yZW1vdmUoKTtcbiAgJGZpZWxkLnJlbW92ZUF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknKTtcbiAgJGZpZWxkLnJlbW92ZUF0dHIoJ2FyaWEtaW52YWxpZCcpO1xufVxuXG52YXIgc2x1Z2lmeSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gIHJldHVybiB0ZXh0LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICAucmVwbGFjZSgvW15cXHdcXC1dKy9nLCAnJylcbiAgICAucmVwbGFjZSgvXFwtXFwtKy9nLCAnLScpXG4gICAgLnJlcGxhY2UoL14tKy8sICcnKVxuICAgIC5yZXBsYWNlKC8tKyQvLCAnJyk7XG59XG5cbiovXG4iLCJ2YXIgTlNBID0gTlNBIHx8IHt9O1xuXG5OU0EgPSB7XG5cbiAgaW5pdGlhbGlzZVNob3dQYXNzd29yZCA6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBHZXQgYWxsIHRoZSBwYXNzd29yZCBpbnB1dHMgaW4gdGhlIHBhZ2UgYW5kIGxvb3AgdGhyb3VnaCB0aGVtIHRvIGFkZCB0aGUgc2hvdy9oaWRlIGJ1dHRvblxuICAgIHZhciAkcGFzc3dvcmRJbnB1dHMgPSAkKCcucGFzc3dvcmQtaW5wdXQnKTtcbiAgICAkcGFzc3dvcmRJbnB1dHMuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgdmFyICR0aGF0ID0gJCh0aGlzKTtcbiAgICAgIC8vIENyZWF0ZSBzaG93L2hpZGUgYnV0dG9uXG4gICAgICB2YXIgJHNob3dCdXR0b24gPSAkKCc8YnV0dG9uIC8+JykucHJvcCh7IHR5cGU6ICdidXR0b24nLCBjbGFzczogJ3Nob3ctcGFzc3dvcmQgZ292dWstYnV0dG9uIGdvdnVrLWJ1dHRvbi0tc2Vjb25kYXJ5IGdvdnVrLSEtbWFyZ2luLWJvdHRvbS0xJyB9KTtcbiAgICAgICRzaG93QnV0dG9uLmh0bWwoJ1Nob3cnKTtcbiAgICAgIC8vIFdoZW4gY2xpY2tpbmcgb24gdGhhdCBidXR0b24gd2Ugd2lsbCBzaG93L2hpZGUgdGhlIHBhc3N3b3JkIGFjY29yZGluZ2x5XG4gICAgICAkc2hvd0J1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpeyBcbiAgICAgICAgaWYoJHRoYXQuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnKXtcbiAgICAgICAgICAkdGhhdC5hdHRyKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgICAgJHNob3dCdXR0b24udGV4dChcIkhpZGVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRoYXQuYXR0cihcInR5cGVcIiwgXCJwYXNzd29yZFwiKTtcbiAgICAgICAgICAkc2hvd0J1dHRvbi50ZXh0KFwiU2hvd1wiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBBZGQgYnV0dG9uIHRvIHRoZSBkb2N1bWVudFxuICAgICAgJHRoYXQuYWZ0ZXIoJHNob3dCdXR0b24pO1xuICAgIH0pO1xuICB9LFxuXG4gIGJhY2tMaW5rOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhY2tMaW5rID0gJCgnPGE+JylcbiAgICAgIC5hdHRyKHsgJ2hyZWYnOiAnIycsIFwiY2xhc3NcIjogXCJnb3Z1ay1iYWNrLWxpbmstYm9sZFwiIH0pXG4gICAgICAudGV4dCgnQmFjaycpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsgd2luZG93Lmhpc3RvcnkuYmFjaygpOyBlLnByZXZlbnREZWZhdWx0KCk7IH0pO1xuICAgICQoJy5qcy1iYWNrLWxpbmsnKS5odG1sKGJhY2tMaW5rKTtcbiAgfSxcbn07XG5cblxuaWYgKCQoJ3NlbGVjdC5zZWxlY3QyJykubGVuZ3RoID4gMCkge1xuICAkKCdzZWxlY3Quc2VsZWN0MicpLnNlbGVjdDIoe21hdGNoZXI6IHNlbGVjdDJNb2RlbE1hdGNoZXJ9KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0Mk1vZGVsTWF0Y2hlciAocGFyYW1zLCBkYXRhKSB7XG4gIGRhdGEucGFyZW50VGV4dCA9IGRhdGEucGFyZW50VGV4dCB8fCBcIlwiO1xuICBpZiAodHlwZW9mKHBhcmFtcy50ZXJtKSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXBhcmFtcy50ZXJtIHx8IHBhcmFtcy50ZXJtLnRyaW0oKSA9PT0gJycpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBpZiAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgbWF0Y2ggPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGF0YSk7XG4gICAgZm9yICh2YXIgYyA9IGRhdGEuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pIHtcbiAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XG4gICAgICBjaGlsZC5wYXJlbnRUZXh0ICs9IGRhdGEucGFyZW50VGV4dCArIFwiIFwiICsgZGF0YS50ZXh0O1xuICAgICAgdmFyIG1hdGNoZXMgPSBzZWxlY3QyTW9kZWxNYXRjaGVyKHBhcmFtcywgY2hpbGQpO1xuICAgICAgaWYgKG1hdGNoZXMgPT0gbnVsbCkge1xuICAgICAgICBtYXRjaC5jaGlsZHJlbi5zcGxpY2UoYywgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYXRjaC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3QyTW9kZWxNYXRjaGVyKHBhcmFtcywgbWF0Y2gpO1xuICB9XG4gIHZhciBvcmlnaW5hbCA9IChkYXRhLnBhcmVudFRleHQgKyAnICcgKyBkYXRhLnRleHQpLnRvVXBwZXJDYXNlKCk7XG4gIHZhciB0ZXJtID0gcGFyYW1zLnRlcm0udG9VcHBlckNhc2UoKTtcbiAgaWYgKG9yaWdpbmFsLmluZGV4T2YodGVybSkgPiAtMSkge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5pZiAoJCgnLnBhc3N3b3JkLWlucHV0JykubGVuZ3RoID4gMCkge1xuICBOU0EuaW5pdGlhbGlzZVNob3dQYXNzd29yZCgpO1xufVxuXG5pZiAoJCgnLmpzLWJhY2stbGluaycpKSB7XG4gIE5TQS5iYWNrTGluaygpO1xufVxuXG4kKCcudW5kZXItY29uc3RydWN0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgYWxlcnQoJ1RoaXMgZnVuY3Rpb25hbGl0eSBpcyBub3QgYXZhaWxhYmxlIHlldCcpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuaWYgKCQoJy5ub3RpZmljYXRpb24gc3Bhbi5pY29uJykubGVuZ3RoID4gMCkge1xuICAkKCcubm90aWZpY2F0aW9uIHNwYW4uaWNvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnBhcmVudCgpLmhpZGUoKTtcbiAgfSk7XG59XG5cbmlmICgkKCdhcnRpY2xlLm9yZ2FuaXNhdGlvbi1zZXJ2aWNlcycpLmxlbmd0aCA+IDApIHtcblxuICAkKCcuaW5mb3JtYXRpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBpbmZvID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcuc2VydmljZS1kZXNjcmlwdGlvbicpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpbmZvLnRvZ2dsZSgpO1xuICB9KTtcblxuICAkKCcuaW5mby1saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgbWV0YSA9ICQodGhpcykucGFyZW50KCkubmV4dCgpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBtZXRhLnRvZ2dsZSgpO1xuICB9KTtcbn1cblxudmFyIHNlYXJjaEZpZWxkcyA9ICQoJ2Zvcm0gLnNlYXJjaC1maWVsZCcpO1xuXG5pZiAoc2VhcmNoRmllbGRzLmxlbmd0aCA+IDApIHtcblxuICB2YXIgbG9hZGVyID0gJCgnPHNwYW4gLz4nKS5hZGRDbGFzcygnbG9hZGVyIHNwaW5uZXItaW5saW5lJyk7XG4gIHZhciBiMSA9ICQoJzxzcGFuIC8+JykuYWRkQ2xhc3MoJ2JhbGwgYi0xJyk7XG4gIHZhciBiMiA9ICQoJzxzcGFuIC8+JykuYWRkQ2xhc3MoJ2JhbGwgYi0yJyk7XG4gIGxvYWRlci5hcHBlbmQoYjEpLmFwcGVuZChiMik7XG5cbiAgc2VhcmNoRmllbGRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciBmb3JtID0gJCh0aGlzKS5wYXJlbnQoKTtcbiAgICB2YXIgYnV0dG9uID0gZm9ybS5maW5kKCdidXR0b24nKTtcbiAgICBmb3JtLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBidXR0b24uYWZ0ZXIobG9hZGVyKS5oaWRlKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG52YXIgcmVkaXJlY3QgPSAkKCcjcmVkaXJlY3QtdXJsJyk7XG5cbiQoJyNhZGQtcmVkaXJlY3QnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgJCgnPHAgY2xhc3M9XCJnb3Z1ay1ib2R5XCI+PGxhYmVsIGZvcj1cInJlZGlyZWN0LXVybFwiPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBpbnB1dENvbmZpZ1wiIG5hbWU9XCJyZWRpcmVjdF91cmlzXCI+PC9sYWJlbD48L3A+JykuYXBwZW5kVG8ocmVkaXJlY3QpO1xuICByZXR1cm4gZmFsc2U7XG59KTtcblxudmFyIGxvZ291dCA9ICQoJyNsb2dvdXQtdXJsJyk7XG5cbiQoJyNhZGQtbG9nb3V0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICQoJzxwIGNsYXNzPVwiZ292dWstYm9keVwiPjxsYWJlbCBmb3I9XCJsb2dvdXQtdXJsXCI+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGlucHV0Q29uZmlnXCIgbmFtZT1cInBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaXNcIj48L2xhYmVsPjwvcD4nKS5hcHBlbmRUbyhsb2dvdXQpO1xuICByZXR1cm4gZmFsc2U7XG59KTtcblxuXG4kKCcjZ2VuZXJhdGUtY2xpZW50LXNlY3JldCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICB2YXIgc2VjcmV0QXJyYXkgPSB3aW5kb3cubmljZXdhcmUuZ2VuZXJhdGVQYXNzcGhyYXNlKDgpO1xuICB2YXIgc2VjcmV0ID0gc2VjcmV0QXJyYXkuam9pbignLScpO1xuICB2YXIgaXNDb25maXJtID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlZ2VuZXJhdGUgdGhlIGNsaWVudCBzZWNyZXQ/Jyk7XG4gIGlmIChpc0NvbmZpcm0pIHtcbiAgICAkKCdpbnB1dCNjbGllbnRTZWNyZXQnKS5hdHRyKCd2YWx1ZScsIHNlY3JldCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbiQoJyNnZW5lcmF0ZS1hcGktc2VjcmV0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gIHZhciBzZWNyZXRBcnJheSA9IHdpbmRvdy5uaWNld2FyZS5nZW5lcmF0ZVBhc3NwaHJhc2UoOCk7XG4gIHZhciBzZWNyZXQgPSBzZWNyZXRBcnJheS5qb2luKCctJyk7XG4gIHZhciBpc0NvbmZpcm0gPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVnZW5lcmF0ZSB0aGUgYXBpIHNlY3JldD8nKTtcbiAgaWYgKGlzQ29uZmlybSkge1xuICAgICQoJ2lucHV0I2FwaVNlY3JldCcpLmF0dHIoJ3ZhbHVlJywgc2VjcmV0KTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59KTtcblxudmFyIGZvcm1SZWdpc3RlciA9ICQoJy5wcmV2ZW50LWZvcm0tZG91YmxlLXN1Ym1pc3Npb24nKTtcblxuaWYgKGZvcm1SZWdpc3Rlci5sZW5ndGggPiAwKSB7XG4gIGZvcm1SZWdpc3Rlci5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHN1Ym1pdEJ1dHRvbnMgPSAkKGZvcm1SZWdpc3RlcikuZmluZCgnYnV0dG9uOnN1Ym1pdCcpLCAkc3VibWl0QnV0dG9uID0gJHN1Ym1pdEJ1dHRvbnMuZXEoMCk7XG4gICAgZm9ybVJlZ2lzdGVyLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkc3VibWl0QnV0dG9ucy5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG4gICAgICAkc3VibWl0QnV0dG9uLmNzcygnbWluLXdpZHRoJywgJHN1Ym1pdEJ1dHRvbi5vdXRlcldpZHRoKCkgKyAncHgnKTtcblxuICAgICAgJHN1Ym1pdEJ1dHRvbi5hcHBlbmQoXCI8c3BhbiBjbGFzcz0nbG9hZGVyIHNwaW5uZXItaW5saW5lJz4gPHNwYW4gY2xhc3M9J2JhbGwgYi0xJz48L3NwYW4+IDxzcGFuIGNsYXNzPSdiYWxsIGItMic+PC9zcGFuPiA8c3BhbiBjbGFzcz0nYmFsbCBiLTMnPjwvc3Bhbj4gPC9zcGFuPlwiKTtcblxuICAgIH0pO1xuICB9KTtcbn1cblxuJCgnLmF1dG8tc2Nyb2xsLW9uLWNoYW5nZScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICQod2luZG93KS5zY3JvbGxUb3AoJCgnLmF1dG8tc2Nyb2xsLWRlc3QnKS5wb3NpdGlvbigpLnRvcCk7XG59KTtcblxuJCgnLmNsb3NlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdmFyIG5vdGlmaWNhdGlvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIuZ292dWstbm90aWZpY2F0aW9uLWJhbm5lclwiKTtcbiAgbm90aWZpY2F0aW9uLnJlbW92ZSgpO1xufSk7XG5cbi8vIHNlbGVjdCBuZXh0IGVsZW1lbnQgaW4gdGhlIHRlbXBsYXRlLCBzaG93IGl0IGFuZCBoaWRlIHRoZSB0b2dnbGUgbGlua1xuJCgnLnRvZ2dsZS1vcGVuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgdmFyIG1ldGEgPSAkKHRoaXMpLm5leHQoKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBtZXRhLnJlbW92ZUNsYXNzKCdnb3Z1ay12aXN1YWxseS1oaWRkZW4nKTtcbiAgJCh0aGlzKS5hZGRDbGFzcygnZ292dWstdmlzdWFsbHktaGlkZGVuJyk7XG59KTtcblxudmFyIHNob3dIaWRlQ29udGVudCA9IG5ldyBHT1ZVSy5TaG93SGlkZUNvbnRlbnQoKVxuc2hvd0hpZGVDb250ZW50LmluaXQoKVxuXG5HT1ZVSy5kZXRhaWxzLmluaXQoKVxuXG4iXX0=
