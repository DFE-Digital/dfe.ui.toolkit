var COOKIE_NAMES={PREFERENCES_SET:"cookies_preferences_set",POLICY:"cookies_policy"},DEFAULT_POLICY={essential:!0,settings:!1,usage:!0},GOVUK_COOKIE_OPTIONS={expires:365,secure:!0,domain:".education.gov.uk"},GovUKCookie={getRaw:function(e){if(window.Cookies)return window.Cookies.get(e)},get:function(e){if(window.Cookies){var t=window.Cookies.get(e);return t?JSON.parse(t):t}},set:function(e,t){if(window.Cookies)return window.Cookies.set(e,t,GOVUK_COOKIE_OPTIONS)},remove:function(e){if(window.Cookies)return window.Cookies.remove(e,GOVUK_COOKIE_OPTIONS)}};function checkConditionForUsersBanner(){var e=GovUKCookie.getRaw("cookies_preferences_set"),t=GovUKCookie.get("cookies_policy");if(e&&t&&t.settings){var n=GovUKCookie.getRaw("user_banner_last_seen");if(!n)return!0;if(90<((new Date).getTime()-n)/864e5)return!0}return!1}function showReviewUsersBanner(){$("#review-users-banner").show()}function setReviewUsersBannerLastSeen(){GovUKCookie.set("user_banner_last_seen",(new Date).getTime())}function loadReviewUsersBanner(){checkConditionForUsersBanner()&&showReviewUsersBanner()}function updateCookieReviewUsersBanner(){checkConditionForUsersBanner()&&setReviewUsersBannerLastSeen()}!function(a){var i=a.$;if(a.Cookies&&i){a.gtag&&a.gaTrackingId?(a.gtag("js",new Date),a.gtag("config",a.gaTrackingId,{cookie_flags:"secure"})):console.error("Google Analytics (GA) has not initialised. GA will not track this session.",a.gtag,a.gaTrackingId);function o(e,t){var n,a=t||(n=i.extend(DEFAULT_POLICY,{}),i.each(n,function(e){n[e]=!0}),n);GovUKCookie.set(COOKIE_NAMES.POLICY,a),GovUKCookie.set(COOKIE_NAMES.PREFERENCES_SET,!0),e.target===s[0]&&r.slideUp()}var r=i("#dsi-cookie-banner"),s=r.find("#cookie-accept");GovUKCookie.get(COOKIE_NAMES.PREFERENCES_SET)||(GovUKCookie.set(COOKIE_NAMES.POLICY,DEFAULT_POLICY),s.click(o),"/cookies"!==a.location.pathname?r.slideDown():r.show());var l=i("#dsi-cookie-form");l.length&&l.on("submit",function(e){e.preventDefault();var t={settings:!!l.find("input[name='cookie.settings']:checked").val()},n=i.extend(DEFAULT_POLICY,t);return o(e,n),document.referrer?a.location=document.referrer:a.location.pathname="/",!1})}}(window),function(e){"use strict";var s=e.GOVUK||{};s.details={NATIVE_DETAILS:"boolean"==typeof document.createElement("details").open,KEY_ENTER:13,KEY_SPACE:32,started:!1,addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,function(e){n(e,e.target)},!1):e.attachEvent&&e.attachEvent("on"+t,function(e){n(e,e.srcElement)})},removeEvent:function(e,t){e.removeEventListener?e.removeEventListener(t,function(e){},!1):e.detachEvent&&e.detachEvent("on"+t,function(e){})},charCode:function(e){return"number"==typeof e.which?e.which:e.keyCode},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},addClickEvent:function(e,n){s.details.addEvent(e,"keypress",function(e,t){s.details.charCode(e)!==s.details.KEY_ENTER&&s.details.charCode(e)!==s.details.KEY_SPACE||"summary"===t.nodeName.toLowerCase()&&(s.details.preventDefault(e),t.click?t.click():n(e,t))}),s.details.addEvent(e,"keyup",function(e,t){s.details.charCode(e)===s.details.KEY_SPACE&&"SUMMARY"===t.nodeName&&s.details.preventDefault(e)}),s.details.addEvent(e,"click",function(e,t){n(e,t)})},getAncestor:function(e,t){do{if(!e||e.nodeName.toLowerCase()===t)break;e=e.parentNode}while(e);return e},addDetailsPolyfill:function(e,t){if(t=t||document.body,!s.details.started&&(s.details.started=!0,0!==(e=t.getElementsByTagName("details")).length)){for(var n=e.length,a=0;a<n;a++){var i=e[a];if(i.__summary=i.getElementsByTagName("summary").item(0),i.__content=i.getElementsByTagName("div").item(0),!i.__summary||!i.__content)return;i.__content.id||(i.__content.id="details-content-"+a),i.setAttribute("role","group"),i.__summary.setAttribute("role","button"),i.__summary.setAttribute("aria-controls",i.__content.id),s.details.NATIVE_DETAILS||(i.__summary.tabIndex=0);var o=null!==i.getAttribute("open");if(!0==o?(i.__summary.setAttribute("aria-expanded","true"),i.__content.setAttribute("aria-hidden","false")):(i.__summary.setAttribute("aria-expanded","false"),i.__content.setAttribute("aria-hidden","true"),s.details.NATIVE_DETAILS||(i.__content.style.display="none")),i.__summary.__details=i,!s.details.NATIVE_DETAILS){var r=document.createElement("i");!0==o?(r.className="arrow arrow-open",r.appendChild(document.createTextNode("▼"))):(r.className="arrow arrow-closed",r.appendChild(document.createTextNode("►"))),i.__summary.__twisty=i.__summary.insertBefore(r,i.__summary.firstChild),i.__summary.__twisty.setAttribute("aria-hidden","true")}}s.details.addClickEvent(t,function(e,t){return!(t=s.details.getAncestor(t,"summary"))||s.details.statechange(t)})}},statechange:function(e){var t="true"===e.__details.__summary.getAttribute("aria-expanded"),n="true"===e.__details.__content.getAttribute("aria-hidden");e.__details.__summary.setAttribute("aria-expanded",t?"false":"true"),e.__details.__content.setAttribute("aria-hidden",n?"false":"true"),s.details.NATIVE_DETAILS||(e.__details.__content.style.display=t?"none":"",null!==e.__details.getAttribute("open")?e.__details.removeAttribute("open"):e.__details.setAttribute("open","open"));return e.__twisty&&(e.__twisty.firstChild.nodeValue=t?"►":"▼",e.__twisty.setAttribute("class",t?"arrow arrow-closed":"arrow arrow-open")),!0},destroy:function(e){s.details.removeEvent(e,"click")},init:function(e){s.details.addEvent(document,"DOMContentLoaded",s.details.addDetailsPolyfill),s.details.addEvent(window,"load",s.details.addDetailsPolyfill)}},e.GOVUK=s}(window);var NSA=NSA||{},filterBoxes=$(".filter-box");NSA.filters={init:function(){filterBoxes.each(function(){var e=$(this),t=e.find(".container-head"),n=t.find(".option-select-label"),a=e.find("input:checkbox"),i=$("<button />").addClass("js-container-head"),o=$("<div />").addClass("js-selected-counter");i.on("click",function(e){var t=$(this).next();$(this).hasClass("closed")?(t.show(),$(this).removeClass("closed").attr("aria-expanded",!0)):(t.hide(),$(this).addClass("closed").attr("aria-expanded",!1)),e.preventDefault()}).append(n,o),t.replaceWith(i),a.on("change",function(){o.text(function(){return 0<a.filter(":checked").length?a.filter(":checked").length+" selected":""})})})}},0<filterBoxes.length&&NSA.filters.init();var gaEvent=$("#ga-event");if(0<gaEvent.length){var category=gaEvent.data("category"),label=gaEvent.data("label"),event=gaEvent.data("event");""!==event&&""!==label&&""!==category&&gtag("event",event,{event_category:category,event_label:label})}function getParameterByName(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function sortTable(e){var t,n,a,i,o,r,s,l,d=0;for(t=$("table.sortable"),a=!0,l="a";a;){for(a=!1,n=t.find("tr"),i=1;i<n.length-1;i++)if(s=!1,o=n[i].getElementsByTagName("TD")[e],r=n[i+1].getElementsByTagName("TD")[e],"a"===l){if(o.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){s=!0;break}}else if("d"===l&&o.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){s=!0;break}s?(n[i].parentNode.insertBefore(n[i+1],n[i]),a=!0,d++):0===d&&"a"===l&&(l="d",a=!0)}return l}$(".notification a").on("click",function(){$(this).data("clientid")&&gtag("event","download",{event_category:"migration-help-pdf",event_label:$(this).data("clientid")})}),(NSA=NSA||{}).modal={elems:{links:$(".modal-link"),modals:$(".modal")},init:function(){this.modalBg(),this.setUpEvents()},modalBg:function(){var e=this,t=$("<div>").addClass("modal-bg").hide().on("click",function(){e.hideModals()});$("body").append(t)},setUpEvents:function(){var n=this;this.elems.links.on("click",function(e){var t=$(this).attr("href");n.showModal($(t)),e.preventDefault()}),n.elems.modals.find(".close").on("click",function(e){n.hideModals(),e.preventDefault()}),$("body").on("keydown",function(e){27===(e.keyCode||e.which)&&n.hideModals()})},showModal:function(e){$("html").addClass("modal-open"),$(".modal-bg").show(),e.show()},hideModals:function(){$("html").removeClass("modal-open"),$(".modal-bg").hide(),this.elems.modals.hide()}},NSA.modal.init(),function(e){"use strict";var f=e.jQuery,t=e.GOVUK||{};function n(){var r="ShowHideContent",i='[data-target] > input[type="radio"]',t='[data-target] > input[type="checkbox"]',n="a.js-toggle-content";function s(){var e=f(this),t=l(e);t.length&&(e.attr("aria-controls",t.attr("id")),e.attr("aria-expanded","false"),t.attr("aria-hidden","true"))}function l(e){var t=e.attr("aria-controls");return t=t||e.closest("[data-target]").data("target"),f("#"+t)}function o(e,t){t.hasClass("js-hidden")&&(t.removeClass("js-hidden"),t.attr("aria-hidden","false"),e.attr("aria-controls")&&e.attr("aria-expanded","true"))}function d(e,t){(t=t||l(e)).hasClass("js-hidden")||(t.addClass("js-hidden"),t.attr("aria-hidden","true"),e.attr("aria-controls")&&e.attr("aria-expanded","false"))}function a(e,t){var n=i+"[name="+e.attr("name").replace("[","\\[").replace("]","\\]")+"][aria-controls]",a=e.closest("form");(a.length?a.find(n):f(n)).each(function(){d(f(this))}),e.is("[aria-controls]")&&o(e,t)}function c(e,t){e.is(":checked")?o(e,t):d(e,t)}function u(e,t,n){t.hasClass("js-hidden")?o(e,t):d(e,t),n.preventDefault()}function h(n,e,t,a){function i(e){var t=f(this);a(t,l(t),e)}n=n||f(document.body);var o=f(e);o.each(s),f.each(t,function(e,t){n.on("click."+r,t,i)}),o.is(":checked")&&o.filter(":checked").each(i)}this.showHideRadioToggledContent=function(e){var t;h(e,i,(t=[],f(i).map(function(){var e=f(this).attr("name");return-1===f.inArray(e,t)?(t.push(e),'input[type="radio"][name="'+f(this).attr("name")+'"]'):null})),a)},this.showHideCheckboxToggledContent=function(e){h(e,t,[t],c)},this.showHideLinkToggledContent=function(e){h(e,n,[n],u)},this.destroy=function(e){(e=e||f(document.body)).off("."+r)}}n.prototype.init=function(e){this.showHideRadioToggledContent(e),this.showHideCheckboxToggledContent(e),this.showHideLinkToggledContent(e)},t.ShowHideContent=n,e.GOVUK=t}(window),(NSA=NSA||{}).signin={form:$(".form-signin"),init:function(){this.setupEvents()},setupEvents:function(){this.form.on("submit",this,this.handleSubmit)},handleSubmit:function(e){var t=$(this),n=t.find("input").not(":checkbox"),a={},i=$(this).find("button:submit"),o=i.eq(0);i.attr("disabled","disabled"),o.css("min-width",o.outerWidth()+"px"),o.find(".loader").removeClass("vh"),n.each(function(){a[this.name]=$(this).val()}),$(".password-input").each(function(e){$(this).attr("type","password"),$(this).siblings(".show-password").html("Show")}),$.ajax({type:"POST",data:a,url:t.attr("action"),context:e.data,dataType:"json",success:function(e){e.redirect?window.location.href=e.uri:e.isFailedLogin?(this.resetValidation(t),this.showValidationMessage(e.validationMessages),this.showInlineValidation(e.validationMessages),i.removeAttr("disabled"),o.find(".loader").addClass("vh")):(gtag("event","Successful login",{event_category:"Login",event_label:getParameterByName("clientid")}),this.buildFormAndSubmit(e))},error:function(){this.resetValidation(t),this.showValidationMessage(),i.removeAttr("disabled"),o.find(".loader").addClass("vh")}}),e.preventDefault()},resetValidation:function(e){$(".govuk-error-summary").remove(),e.find(".govuk-form-group").each(function(){var e=$(this).find("input").eq(0);$(this).hasClass("govuk-form-group--error")&&($(this).removeClass("govuk-form-group--error"),$(this).find("span.govuk-error-message").remove(),e.removeAttr("aria-describedby").removeAttr("aria-invalid"))})},showValidationMessage:function(e){var t=$("<div />").attr("class","govuk-error-summary govuk-!-margin-top-6").attr("role","alert").attr("tabindex","-1").attr("aria-labelledby","error-summary-title"),n=$("<h2 />").attr("class","govuk-error-summary__title").attr("id","error-summary"),a=$("<div />").attr("class","govuk-error-summary__body"),i=$("<ul />").attr("class","govuk-list govuk-error-summary__list");if(e)n.text("There is a problem"),$.each(e,function(e,t){"loginError"===e&&(e="username",gtag("event","Failed login",{event_category:"Login",event_label:"Users login credentials were wrong"}));var n=$("<a />").attr("class","govuk-link").attr("href","#"+e).text(t),a=$("<li />").append(n);i.append(a)});else{n.text("There has been an error");var o=$("<li />").html('Please try again later. If the problem continues, follow the link to <a href="https://help.signin.education.gov.uk/contact/form">submit a support request</a>');i.append(o),gtag("event","Error occurred",{event_category:"Login",event_label:"A server error occurred during login"})}t.append(n).append(a.append(i)),$("main").prepend(t),$("html, body").animate({scrollTop:t.offset().top-15},300)},showInlineValidation:function(e){$.each(e,function(e,t){var n=$("input[name="+e+"]"),a=n.parent(),i=a.find("label").first();if(!a.hasClass("govuk-form-group--error"))var o=$('<span class="govuk-body">').html(t).prop("class","govuk-error-message").prop("id","validation-"+e);i.after(o),a.addClass("govuk-form-group--error"),n.attr({"aria-describedby":"validation-"+e,"aria-invalid":"true"})})},buildFormAndSubmit:function(e){var a=$("<form />").attr({method:"post",action:e.destination,id:"dfesigninform"});$.each(e.postbackData,function(e,t){var n=$("<input />").attr({type:"hidden",name:e,value:t});a.append(n)}),$("#dfesigninform").remove(),$("body").append(a),a.submit()}},0<$(".form-signin").length&&NSA.signin.init(),$(function(){$("table.sortable thead th").on("click",function(){var e=$("table.sortable thead tr th");e.removeClass("sorted").removeClass("dir-a").removeClass("dir-d");var t=sortTable(e.index($(this)));$(this).addClass("sorted dir-"+t)})});var toggleTips=$(".toggle-help");toggleTips.each(function(){var n,t,e,a;n=$(this),e=$("<span />").attr("class","toggletip"),a=$("<button />").attr("type","button").attr("aria-label","Help").attr("data-toggletip-content",n.html()).text("?").on("click",function(){var e=$(this).data("toggletip-content"),t=$(this).next();window.setTimeout(function(){t.html(function(){return $("<span />").attr("class",function(){return 50<n.html().length?"bubble long":"bubble"}).text(e)})},100)}).on("keydown",function(e){27===(e.keyCode||e.which)&&t.html("")}),t=$("<span />").attr("role","status"),e.append(a,t),n.before(e).remove(),$(document).on("click",function(e){n[0]!==$(e.target)&&t.html("")})});var forms=$("#content form");forms.attr("novalidate","novalidate");NSA=NSA||{};function select2ModelMatcher(e,t){if(t.parentText=t.parentText||"",""===$.trim(e.term))return t;if(t.children&&0<t.children.length){for(var n=$.extend(!0,{},t),a=t.children.length-1;0<=a;a--){var i=t.children[a];i.parentText+=t.parentText+" "+t.text,null==select2ModelMatcher(e,i)&&n.children.splice(a,1)}return 0<n.children.length?n:select2ModelMatcher(e,n)}var o=(t.parentText+" "+t.text).toUpperCase(),r=e.term.toUpperCase();return-1<o.indexOf(r)?t:null}NSA={initialiseShowPassword:function(){$(".password-input").each(function(e){var t=$(this),n=$("<button />").prop({type:"button",class:"show-password govuk-button govuk-button--secondary govuk-!-margin-bottom-1"});n.html("Show"),n.on("click",function(){"password"===t.attr("type")?(t.attr("type","text"),n.text("Hide")):(t.attr("type","password"),n.text("Show"))}),t.after(n)})},backLink:function(){var e=$("<a>").attr({href:"#",class:"govuk-back-link-bold"}).text("Back").on("click",function(e){window.history.back(),e.preventDefault()});$(".js-back-link").html(e)}},0<$("select.select2").length&&$("select.select2").select2({matcher:select2ModelMatcher}),0<$(".password-input").length&&NSA.initialiseShowPassword(),$(".js-back-link")&&NSA.backLink(),$(".under-construction").on("click",function(e){alert("This functionality is not available yet"),e.preventDefault()}),0<$(".notification span.icon").length&&$(".notification span.icon").on("click",function(){$(this).parent().hide()}),0<$("article.organisation-services").length&&($(".information").on("click",function(e){var t=$(this).parent().parent().find(".service-description");e.preventDefault(),t.toggle()}),$(".info-link").on("click",function(e){var t=$(this).parent().next();e.preventDefault(),t.toggle()}));var searchFields=$("form .search-field");if(0<searchFields.length){var loader=$("<span />").addClass("loader spinner-inline"),b1=$("<span />").addClass("ball b-1"),b2=$("<span />").addClass("ball b-2");loader.append(b1).append(b2),searchFields.each(function(){var e=$(this).parent(),t=e.find("button");e.on("submit",function(){t.after(loader).hide()})})}var redirect=$("#redirect-url");$("#add-redirect").on("click",function(){return $('<p class="govuk-body"><label for="redirect-url"><input class="form-control inputConfig" name="redirect_uris"></label></p>').appendTo(redirect),!1});var logout=$("#logout-url");$("#add-logout").on("click",function(){return $('<p class="govuk-body"><label for="logout-url"><input class="form-control inputConfig" name="post_logout_redirect_uris"></label></p>').appendTo(logout),!1}),$("#generate-client-secret").on("click",function(){var e=window.niceware.generatePassphrase(8).join("-");return confirm("Are you sure you want to regenerate the client secret?")&&$("input#clientSecret").attr("value",e),!1}),$("#generate-api-secret").on("click",function(){var e=window.niceware.generatePassphrase(8).join("-");return confirm("Are you sure you want to regenerate the api secret?")&&$("input#apiSecret").attr("value",e),!1});var formRegister=$(".prevent-form-double-submission");0<formRegister.length&&formRegister.each(function(){var e=$(formRegister).find("button:submit"),t=e.eq(0);formRegister.on("submit",function(){e.attr("disabled","disabled"),t.css("min-width",t.outerWidth()+"px"),t.append("<span class='loader spinner-inline'> <span class='ball b-1'></span> <span class='ball b-2'></span> <span class='ball b-3'></span> </span>")})});var showHideContent=new GOVUK.ShowHideContent;showHideContent.init(),GOVUK.details.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb29raWVzLmpzIiwiX2RldGFpbHMucG9seWZpbGwuanMiLCJfZmlsdGVyLWJveGVzLmpzIiwiX2dhLWV2ZW50cy5qcyIsIl9zaWduaW4uanMiLCJfdGFibGVzb3J0LmpzIiwiX21vZGFsLmpzIiwiX3Nob3ctaGlkZS1jb250ZW50LmpzIiwiX3Rvb2x0aXAuanMiLCJfdmFsaWRhdGlvbi5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJDT09LSUVfTkFNRVMiLCJQUkVGRVJFTkNFU19TRVQiLCJQT0xJQ1kiLCJERUZBVUxUX1BPTElDWSIsImVzc2VudGlhbCIsInNldHRpbmdzIiwidXNhZ2UiLCJHT1ZVS19DT09LSUVfT1BUSU9OUyIsImV4cGlyZXMiLCJzZWN1cmUiLCJkb21haW4iLCJHb3ZVS0Nvb2tpZSIsImdldFJhdyIsIm5hbWUiLCJ3aW5kb3ciLCJDb29raWVzIiwiZ2V0IiwidmFsdWUiLCJKU09OIiwicGFyc2UiLCJzZXQiLCJyZW1vdmUiLCJjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyIiwiY29va2llUHJlZmVyZW5jZXNTZXQiLCJjb29raWVQb2xpY3kiLCJsYXN0U2VlbiIsIkRhdGUiLCJnZXRUaW1lIiwic2hvd1Jldmlld1VzZXJzQmFubmVyIiwiJCIsInNob3ciLCJzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuIiwibG9hZFJldmlld1VzZXJzQmFubmVyIiwidXBkYXRlQ29va2llUmV2aWV3VXNlcnNCYW5uZXIiLCJndGFnIiwiZ2FUcmFja2luZ0lkIiwiY29va2llX2ZsYWdzIiwiY29uc29sZSIsImVycm9yIiwib25Db29raWVBY2NlcHQiLCJldmVudCIsIm5ld1BvbGljeSIsImFjY2VwdGVkUG9saWN5IiwiZXh0ZW5kIiwiZWFjaCIsImtleSIsInRhcmdldCIsIiRjb29raWVBY2NlcHRCdXR0b24iLCIkY29va2llQmFubmVyIiwic2xpZGVVcCIsImZpbmQiLCJjbGljayIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzbGlkZURvd24iLCIkcHJlZmVyZW5jZXNGb3JtIiwibGVuZ3RoIiwib24iLCJwcmV2ZW50RGVmYXVsdCIsInZhbCIsImRvY3VtZW50IiwicmVmZXJyZXIiLCJnbG9iYWwiLCJHT1ZVSyIsImRldGFpbHMiLCJOQVRJVkVfREVUQUlMUyIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuIiwiS0VZX0VOVEVSIiwiS0VZX1NQQUNFIiwic3RhcnRlZCIsImFkZEV2ZW50Iiwibm9kZSIsInR5cGUiLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiYXR0YWNoRXZlbnQiLCJzcmNFbGVtZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJjaGFyQ29kZSIsIndoaWNoIiwia2V5Q29kZSIsInJldHVyblZhbHVlIiwiYWRkQ2xpY2tFdmVudCIsIm5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJnZXRBbmNlc3RvciIsIm1hdGNoIiwicGFyZW50Tm9kZSIsImFkZERldGFpbHNQb2x5ZmlsbCIsImxpc3QiLCJjb250YWluZXIiLCJib2R5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJuIiwiaSIsIl9fc3VtbWFyeSIsIml0ZW0iLCJfX2NvbnRlbnQiLCJpZCIsInNldEF0dHJpYnV0ZSIsInRhYkluZGV4Iiwib3BlbkF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImRpc3BsYXkiLCJfX2RldGFpbHMiLCJ0d2lzdHkiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX190d2lzdHkiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwic3VtbWFyeSIsInN0YXRlY2hhbmdlIiwiZXhwYW5kZWQiLCJoaWRkZW4iLCJyZW1vdmVBdHRyaWJ1dGUiLCJub2RlVmFsdWUiLCJkZXN0cm95IiwiaW5pdCIsIiRjb250YWluZXIiLCJOU0EiLCJmaWx0ZXJCb3hlcyIsImZpbHRlcnMiLCIkdGhhdCIsInRoaXMiLCJoZWFkZXIiLCJ0aXRsZSIsImNoZWNrYm94ZXMiLCJidXR0b24iLCJhZGRDbGFzcyIsImNoZWNrQ291bnQiLCJvcHRpb25zIiwibmV4dCIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhdHRyIiwiaGlkZSIsImFwcGVuZCIsInJlcGxhY2VXaXRoIiwidGV4dCIsImZpbHRlciIsImdhRXZlbnQiLCJjYXRlZ29yeSIsImRhdGEiLCJsYWJlbCIsImV2ZW50X2NhdGVnb3J5IiwiZXZlbnRfbGFiZWwiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJ1cmwiLCJocmVmIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic29ydFRhYmxlIiwidGFibGUiLCJyb3dzIiwic3dpdGNoaW5nIiwieCIsInkiLCJzaG91bGRTd2l0Y2giLCJkaXJlY3Rpb24iLCJzd2l0Y2hjb3VudCIsImlubmVySFRNTCIsIm1vZGFsIiwiZWxlbXMiLCJsaW5rcyIsIm1vZGFscyIsIm1vZGFsQmciLCJzZXRVcEV2ZW50cyIsInRoYXQiLCJiZyIsImhpZGVNb2RhbHMiLCJzaG93TW9kYWwiLCJqUXVlcnkiLCJTaG93SGlkZUNvbnRlbnQiLCJzZWxlY3RvcnMiLCJpbml0VG9nZ2xlZENvbnRlbnQiLCIkY29udHJvbCIsIiRjb250ZW50IiwiZ2V0VG9nZ2xlZENvbnRlbnQiLCJjbG9zZXN0Iiwic2hvd1RvZ2dsZWRDb250ZW50IiwiaGlkZVRvZ2dsZWRDb250ZW50IiwiaGFuZGxlUmFkaW9Db250ZW50Iiwic2VsZWN0b3IiLCIkZm9ybSIsImlzIiwiaGFuZGxlQ2hlY2tib3hDb250ZW50IiwiaGFuZGxlTGlua0NvbnRlbnQiLCIkZXZlbnQiLCJlbGVtZW50U2VsZWN0b3IiLCJldmVudFNlbGVjdG9ycyIsImhhbmRsZXIiLCJkZWZlcnJlZCIsIiRjb250cm9scyIsImlkeCIsImV2ZW50U2VsZWN0b3IiLCJzaG93SGlkZVJhZGlvVG9nZ2xlZENvbnRlbnQiLCJyYWRpb0dyb3VwcyIsIm1hcCIsImdyb3VwTmFtZSIsImluQXJyYXkiLCJwdXNoIiwic2hvd0hpZGVDaGVja2JveFRvZ2dsZWRDb250ZW50Iiwic2hvd0hpZGVMaW5rVG9nZ2xlZENvbnRlbnQiLCJvZmYiLCJwcm90b3R5cGUiLCJzaWduaW4iLCJmb3JtIiwic2V0dXBFdmVudHMiLCJoYW5kbGVTdWJtaXQiLCIkaW5wdXRzIiwibm90IiwicG9zdERhdGEiLCIkc3VibWl0QnV0dG9ucyIsIiRzdWJtaXRCdXR0b24iLCJlcSIsImNzcyIsIm91dGVyV2lkdGgiLCJzaWJsaW5ncyIsImh0bWwiLCJhamF4IiwiY29udGV4dCIsImRhdGFUeXBlIiwic3VjY2VzcyIsInJlZGlyZWN0IiwidXJpIiwiaXNGYWlsZWRMb2dpbiIsInJlc2V0VmFsaWRhdGlvbiIsInNob3dWYWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlcyIsInNob3dJbmxpbmVWYWxpZGF0aW9uIiwicmVtb3ZlQXR0ciIsImJ1aWxkRm9ybUFuZFN1Ym1pdCIsIiRmaWVsZCIsIm1lc3NhZ2VzIiwiJGRpdiIsIiRoMiIsIiR1bENvbnRhaW5lciIsIiR1bCIsImluZGV4IiwiJGEiLCIkbGkiLCJwcmVwZW5kIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsIiRwYXJlbnQiLCJwYXJlbnQiLCIkbGFiZWwiLCJmaXJzdCIsImVycm9yTWVzc2FnZSIsInByb3AiLCJhZnRlciIsImFyaWEtZGVzY3JpYmVkYnkiLCJhcmlhLWludmFsaWQiLCJtZXRob2QiLCJhY3Rpb24iLCJkZXN0aW5hdGlvbiIsInBvc3RiYWNrRGF0YSIsInN1Ym1pdCIsImhlYWRpbmdDZWxscyIsInRvZ2dsZVRpcHMiLCJsaXZlUmVnaW9uIiwidG9nZ2xlVGlwIiwibWVzc2FnZSIsInNldFRpbWVvdXQiLCJiZWZvcmUiLCJmb3JtcyIsInNlbGVjdDJNb2RlbE1hdGNoZXIiLCJwYXJhbXMiLCJwYXJlbnRUZXh0IiwidHJpbSIsInRlcm0iLCJjaGlsZHJlbiIsImMiLCJjaGlsZCIsInNwbGljZSIsIm9yaWdpbmFsIiwidG9VcHBlckNhc2UiLCJpbmRleE9mIiwiaW5pdGlhbGlzZVNob3dQYXNzd29yZCIsIiRzaG93QnV0dG9uIiwiY2xhc3MiLCJiYWNrTGluayIsImhpc3RvcnkiLCJiYWNrIiwic2VsZWN0MiIsIm1hdGNoZXIiLCJhbGVydCIsImluZm8iLCJ0b2dnbGUiLCJtZXRhIiwic2VhcmNoRmllbGRzIiwibG9hZGVyIiwiYjEiLCJiMiIsImFwcGVuZFRvIiwibG9nb3V0Iiwic2VjcmV0IiwibmljZXdhcmUiLCJnZW5lcmF0ZVBhc3NwaHJhc2UiLCJqb2luIiwiY29uZmlybSIsImZvcm1SZWdpc3RlciIsInNob3dIaWRlQ29udGVudCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQUEsYUFBQSxDQUNBQyxnQkFBQSwwQkFDQUMsT0FBQSxrQkFHQUMsZUFBQSxDQUNBQyxXQUFBLEVBQ0FDLFVBQUEsRUFDQUMsT0FBQSxHQUdBQyxxQkFBQSxDQUNBQyxRQUFBLElBQ0FDLFFBQUEsRUFDQUMsT0FBQSxxQkFHQUMsWUFBQSxDQUNBQyxPQUFBLFNBQUFDLEdBQ0EsR0FBQUMsT0FBQUMsUUFJQSxPQUFBRCxPQUFBQyxRQUFBQyxJQUFBSCxJQUVBRyxJQUFBLFNBQUFILEdBQ0EsR0FBQUMsT0FBQUMsUUFBQSxDQUlBLElBQUFFLEVBQUFILE9BQUFDLFFBQUFDLElBQUFILEdBQ0EsT0FBQUksRUFDQUMsS0FBQUMsTUFBQUYsR0FFQUEsSUFFQUcsSUFBQSxTQUFBUCxFQUFBSSxHQUNBLEdBQUFILE9BQUFDLFFBSUEsT0FBQUQsT0FBQUMsUUFBQUssSUFDQVAsRUFDQUksRUFDQVYsdUJBR0FjLE9BQUEsU0FBQVIsR0FDQSxHQUFBQyxPQUFBQyxRQUlBLE9BQUFELE9BQUFDLFFBQUFNLE9BQ0FSLEVBQ0FOLHdCQXVGQSxTQUFBZSwrQkFFQSxJQUFBQyxFQUFBWixZQUFBQyxPQUFBLDJCQUNBWSxFQUFBYixZQUFBSyxJQUFBLGtCQUVBLEdBQUFPLEdBQUFDLEdBQUFBLEVBQUFuQixTQUFBLENBQ0EsSUFBQW9CLEVBQUFkLFlBQUFDLE9BQUEseUJBQ0Es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QkFBQSxHQUNBQyxLQUFBLEtBS0EsT0FKQUMsUUFBQSwyREFFQTNSLEVBQUEsc0JBQUFnSCxLQUFBLFFBQUF1SyxJQUVBLElBR0F2UixFQUFBLHdCQUFBNEIsR0FBQSxRQUFBLFdBQ0EsSUFDQTJQLEVBREF0UyxPQUFBdVMsU0FBQUMsbUJBQUEsR0FDQUMsS0FBQSxLQUtBLE9BSkFDLFFBQUEsd0RBRUEzUixFQUFBLG1CQUFBZ0gsS0FBQSxRQUFBdUssSUFFQSxJQUdBLElBQUFLLGFBQUE1UixFQUFBLG1DQUVBLEVBQUE0UixhQUFBalEsUUFDQWlRLGFBQUE3USxLQUFBLFdBQ0EsSUFBQWtMLEVBQUFqTSxFQUFBNFIsY0FBQXZRLEtBQUEsaUJBQUE2SyxFQUFBRCxFQUFBRSxHQUFBLEdBQ0F5RixhQUFBaFEsR0FBQSxTQUFBLFdBQ0FxSyxFQUFBakYsS0FBQSxXQUFBLFlBRUFrRixFQUFBRSxJQUFBLFlBQUFGLEVBQUFHLGFBQUEsTUFFQUgsRUFBQWhGLE9BQUEsaUpBTUEsSUFBQTJLLGdCQUFBLElBQUEzUCxNQUFBdUgsZ0JBQ0FvSSxnQkFBQTlMLE9BRUE3RCxNQUFBQyxRQUFBNEQiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBDT09LSUVfTkFNRVMgPSB7XG4gIFBSRUZFUkVOQ0VTX1NFVDogJ2Nvb2tpZXNfcHJlZmVyZW5jZXNfc2V0JyxcbiAgUE9MSUNZOiAnY29va2llc19wb2xpY3knXG59O1xuXG52YXIgREVGQVVMVF9QT0xJQ1kgPSB7XG4gIGVzc2VudGlhbDogdHJ1ZSxcbiAgc2V0dGluZ3M6IGZhbHNlLFxuICB1c2FnZTogdHJ1ZVxufTtcblxudmFyIEdPVlVLX0NPT0tJRV9PUFRJT05TID0ge1xuICBleHBpcmVzOiAzNjUsIC8vIGRheXNcbiAgc2VjdXJlOiB0cnVlLFxuICBkb21haW46ICcuZWR1Y2F0aW9uLmdvdi51aydcbn07XG5cbnZhciBHb3ZVS0Nvb2tpZSA9IHtcbiAgZ2V0UmF3OiBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuZ2V0KG5hbWUpO1xuICB9LFxuICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHdpbmRvdy5Db29raWVzLmdldChuYW1lKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuc2V0KFxuICAgICAgbmFtZSxcbiAgICAgIHZhbHVlLFxuICAgICAgR09WVUtfQ09PS0lFX09QVElPTlNcbiAgICApO1xuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5kb3cuQ29va2llcy5yZW1vdmUoXG4gICAgICBuYW1lLFxuICAgICAgR09WVUtfQ09PS0lFX09QVElPTlNcbiAgICApO1xuICB9XG59O1xuXG4oZnVuY3Rpb24gKHdpbmRvdykge1xuICB2YXIgJCA9IHdpbmRvdy4kO1xuICB2YXIgQ29va2llcyA9IHdpbmRvdy5Db29raWVzO1xuICBpZiAoIUNvb2tpZXMgfHwgISQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAoZnVuY3Rpb24gaW5pdEdBICgpIHtcbiAgICBpZiAoIXdpbmRvdy5ndGFnIHx8ICF3aW5kb3cuZ2FUcmFja2luZ0lkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnR29vZ2xlIEFuYWx5dGljcyAoR0EpIGhhcyBub3QgaW5pdGlhbGlzZWQuIEdBIHdpbGwgbm90IHRyYWNrIHRoaXMgc2Vzc2lvbi4nLFxuICAgICAgICB3aW5kb3cuZ3RhZyxcbiAgICAgICAgd2luZG93LmdhVHJhY2tpbmdJZCk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgd2luZG93Lmd0YWcoJ2pzJywgbmV3IERhdGUoKSk7XG4gICAgd2luZG93Lmd0YWcoJ2NvbmZpZycsIHdpbmRvdy5nYVRyYWNraW5nSWQsIHsgY29va2llX2ZsYWdzOiAnc2VjdXJlJ30pO1xuICB9KSgpO1xuXG4gIHZhciAkY29va2llQmFubmVyID0gJCgnI2RzaS1jb29raWUtYmFubmVyJyk7XG4gIHZhciAkY29va2llQWNjZXB0QnV0dG9uID0gJGNvb2tpZUJhbm5lci5maW5kKCcjY29va2llLWFjY2VwdCcpO1xuXG4gIHZhciBnZXRBY2NlcHRlZEFsbFBvbGljeSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWNjZXB0ZWRQb2xpY3kgPSAkLmV4dGVuZChERUZBVUxUX1BPTElDWSwge30pOyAvLyBkZWVwIGNvcHlcblxuICAgICQuZWFjaChhY2NlcHRlZFBvbGljeSwgZnVuY3Rpb24gKGtleSkge1xuICAgICAgYWNjZXB0ZWRQb2xpY3lba2V5XSA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFjY2VwdGVkUG9saWN5O1xuICB9O1xuXG4gIHZhciBvbkNvb2tpZUFjY2VwdCA9IGZ1bmN0aW9uIChldmVudCwgbmV3UG9saWN5KSB7XG4gICAgdmFyIGFjY2VwdGVkUG9saWN5ID0gbmV3UG9saWN5IHx8IGdldEFjY2VwdGVkQWxsUG9saWN5KCk7XG5cbiAgICBHb3ZVS0Nvb2tpZS5zZXQoXG4gICAgICBDT09LSUVfTkFNRVMuUE9MSUNZLFxuICAgICAgYWNjZXB0ZWRQb2xpY3lcbiAgICApO1xuICAgIEdvdlVLQ29va2llLnNldChcbiAgICAgIENPT0tJRV9OQU1FUy5QUkVGRVJFTkNFU19TRVQsXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIGlmIChldmVudC50YXJnZXQgPT09ICRjb29raWVBY2NlcHRCdXR0b25bMF0pIHtcbiAgICAgICRjb29raWVCYW5uZXIuc2xpZGVVcCgpO1xuICAgIH1cbiAgfTtcblxuICBpZiAoIUdvdlVLQ29va2llLmdldChDT09LSUVfTkFNRVMuUFJFRkVSRU5DRVNfU0VUKSkge1xuICAgIEdvdlVLQ29va2llLnNldChcbiAgICAgIENPT0tJRV9OQU1FUy5QT0xJQ1ksXG4gICAgICBERUZBVUxUX1BPTElDWVxuICAgICk7XG4gICAgJGNvb2tpZUFjY2VwdEJ1dHRvbi5jbGljayhvbkNvb2tpZUFjY2VwdCk7XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy9jb29raWVzJykge1xuICAgICAgJGNvb2tpZUJhbm5lci5zbGlkZURvd24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGNvb2tpZUJhbm5lci5zaG93KCk7XG4gICAgfVxuICB9XG5cbiAgdmFyICRwcmVmZXJlbmNlc0Zvcm0gPSAkKCcjZHNpLWNvb2tpZS1mb3JtJyk7XG5cbiAgJHByZWZlcmVuY2VzRm9ybS5sZW5ndGggJiYgJHByZWZlcmVuY2VzRm9ybS5vbignc3VibWl0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbmV3UG9saWN5ID0ge1xuICAgICAgc2V0dGluZ3M6ICEhJHByZWZlcmVuY2VzRm9ybS5maW5kKFwiaW5wdXRbbmFtZT0nY29va2llLnNldHRpbmdzJ106Y2hlY2tlZFwiKS52YWwoKVxuICAgIH07XG5cbiAgICB2YXIgYWNjZXB0ZWRQb2xpY3kgPSAkLmV4dGVuZChERUZBVUxUX1BPTElDWSwgbmV3UG9saWN5KTtcbiAgICBvbkNvb2tpZUFjY2VwdChldmVudCwgYWNjZXB0ZWRQb2xpY3kpO1xuXG4gICAgaWYgKGRvY3VtZW50LnJlZmVycmVyKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24gPSBkb2N1bWVudC5yZWZlcnJlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID0gJy8nO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG59KSh3aW5kb3cpO1xuXG5mdW5jdGlvbiBjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyKCkge1xuICAvLyBDaGVjayB1c2VyJ3MgY29uc2VudCBmb3IgdGhlIGNvb2tpZVxuICB2YXIgY29va2llUHJlZmVyZW5jZXNTZXQgPSBHb3ZVS0Nvb2tpZS5nZXRSYXcoJ2Nvb2tpZXNfcHJlZmVyZW5jZXNfc2V0Jyk7XG4gIHZhciBjb29raWVQb2xpY3kgPSBHb3ZVS0Nvb2tpZS5nZXQoJ2Nvb2tpZXNfcG9saWN5Jyk7XG5cbiAgaWYgKCEhY29va2llUHJlZmVyZW5jZXNTZXQgJiYgISFjb29raWVQb2xpY3kgJiYgY29va2llUG9saWN5LnNldHRpbmdzKSB7XG4gICAgdmFyIGxhc3RTZWVuID0gR292VUtDb29raWUuZ2V0UmF3KCd1c2VyX2Jhbm5lcl9sYXN0X3NlZW4nKTtcbiAgICBpZiAoISFsYXN0U2Vlbikge1xuICAgICAgdmFyIG51bWJlck9mRGF5cyA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RTZWVuKSAvICgxMDAwICogMzYwMCAqIDI0KTtcbiAgICAgIGlmIChudW1iZXJPZkRheXMgPiA5MCkge1xuICAgICAgICAvLyBpZiB0aGUgcGVyaW9kIGlzIGxvbmdlciB0aGFuIDkwIGRheXMgc2hvdy91cGRhdGUgdGhlIGJhbm5lclxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gdmFsdWUgdGhlbiBzaG93L3VwZGF0ZSB0aGUgYmFubmVyXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzaG93UmV2aWV3VXNlcnNCYW5uZXIoKXtcbiAgJCgnI3Jldmlldy11c2Vycy1iYW5uZXInKS5zaG93KCk7XG59XG5cbmZ1bmN0aW9uIHNldFJldmlld1VzZXJzQmFubmVyTGFzdFNlZW4oKXtcbiAgR292VUtDb29raWUuc2V0KCd1c2VyX2Jhbm5lcl9sYXN0X3NlZW4nLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRSZXZpZXdVc2Vyc0Jhbm5lcigpIHtcbiAgaWYgKGNoZWNrQ29uZGl0aW9uRm9yVXNlcnNCYW5uZXIoKSkge1xuICAgIHNob3dSZXZpZXdVc2Vyc0Jhbm5lcigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvb2tpZVJldmlld1VzZXJzQmFubmVyKCl7XG4gIGlmIChjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyKCkpIHtcbiAgICBzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuKCk7XG4gIH1cbn1cbiIsIi8vIDxkZXRhaWxzPiBwb2x5ZmlsbFxuLy8gaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWRldGFpbHNcblxuLy8gRkYgU3VwcG9ydCBmb3IgSFRNTDUncyA8ZGV0YWlscz4gYW5kIDxzdW1tYXJ5PlxuLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTkxNzM3XG5cbi8vIGh0dHA6Ly93d3cuc2l0ZXBvaW50LmNvbS9maXhpbmctdGhlLWRldGFpbHMtZWxlbWVudC9cblxuOyhmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHZhciBHT1ZVSyA9IGdsb2JhbC5HT1ZVSyB8fCB7fVxuXG4gIEdPVlVLLmRldGFpbHMgPSB7XG4gICAgTkFUSVZFX0RFVEFJTFM6IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJykub3BlbiA9PT0gJ2Jvb2xlYW4nLFxuICAgIEtFWV9FTlRFUjogMTMsXG4gICAgS0VZX1NQQUNFOiAzMixcblxuICAgIC8vIENyZWF0ZSBhIHN0YXJ0ZWQgZmxhZyBzbyB3ZSBjYW4gcHJldmVudCB0aGUgaW5pdGlhbGlzYXRpb25cbiAgICAvLyBmdW5jdGlvbiBmaXJpbmcgZnJvbSBib3RoIERPTUNvbnRlbnRMb2FkZWQgYW5kIHdpbmRvdy5vbmxvYWRcbiAgICBzdGFydGVkOiBmYWxzZSxcblxuICAgIC8vIEFkZCBldmVudCBjb25zdHJ1Y3QgZm9yIG1vZGVybiBicm93c2VycyBvciBJRVxuICAgIC8vIHdoaWNoIGZpcmVzIHRoZSBjYWxsYmFjayB3aXRoIGEgcHJlLWNvbnZlcnRlZCB0YXJnZXQgcmVmZXJlbmNlXG4gICAgYWRkRXZlbnQ6IGZ1bmN0aW9uIChub2RlLCB0eXBlLCBjYWxsYmFjaykge1xuICAgICAgaWYgKG5vZGUuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhlLCBlLnRhcmdldClcbiAgICAgICAgfSwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKG5vZGUuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgbm9kZS5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhlLCBlLnNyY0VsZW1lbnQpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZUV2ZW50OiBmdW5jdGlvbiAobm9kZSwgdHlwZSkge1xuICAgICAgaWYgKG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgfSwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKG5vZGUuZGV0YWNoRXZlbnQpIHtcbiAgICAgICAgbm9kZS5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gQ3Jvc3MtYnJvd3NlciBjaGFyYWN0ZXIgY29kZSAvIGtleSBwcmVzc2VkXG4gICAgY2hhckNvZGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gKHR5cGVvZiBlLndoaWNoID09PSAnbnVtYmVyJykgPyBlLndoaWNoIDogZS5rZXlDb2RlXG4gICAgfSxcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgcHJldmVudGluZyBkZWZhdWx0IGFjdGlvblxuICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gSGFuZGxlIGNyb3NzLW1vZGFsIGNsaWNrIGV2ZW50c1xuICAgIGFkZENsaWNrRXZlbnQ6IGZ1bmN0aW9uIChub2RlLCBjYWxsYmFjaykge1xuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCAna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIC8vIFdoZW4gdGhlIGtleSBnZXRzIHByZXNzZWQgLSBjaGVjayBpZiBpdCBpcyBlbnRlciBvciBzcGFjZVxuICAgICAgICBpZiAoR09WVUsuZGV0YWlscy5jaGFyQ29kZShlKSA9PT0gR09WVUsuZGV0YWlscy5LRVlfRU5URVIgfHwgR09WVUsuZGV0YWlscy5jaGFyQ29kZShlKSA9PT0gR09WVUsuZGV0YWlscy5LRVlfU1BBQ0UpIHtcbiAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzdW1tYXJ5Jykge1xuICAgICAgICAgICAgLy8gUHJldmVudCBzcGFjZSBmcm9tIHNjcm9sbGluZyB0aGUgcGFnZVxuICAgICAgICAgICAgLy8gYW5kIGVudGVyIGZyb20gc3VibWl0dGluZyBhIGZvcm1cbiAgICAgICAgICAgIEdPVlVLLmRldGFpbHMucHJldmVudERlZmF1bHQoZSlcbiAgICAgICAgICAgIC8vIENsaWNrIHRvIGxldCB0aGUgY2xpY2sgZXZlbnQgZG8gYWxsIHRoZSBuZWNlc3NhcnkgYWN0aW9uXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsaWNrKSB7XG4gICAgICAgICAgICAgIHRhcmdldC5jbGljaygpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBleGNlcHQgU2FmYXJpIDUuMSBhbmQgdW5kZXIgZG9uJ3Qgc3VwcG9ydCAuY2xpY2soKSBoZXJlXG4gICAgICAgICAgICAgIGNhbGxiYWNrKGUsIHRhcmdldClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIFByZXZlbnQga2V5dXAgdG8gcHJldmVudCBjbGlja2luZyB0d2ljZSBpbiBGaXJlZm94IHdoZW4gdXNpbmcgc3BhY2Uga2V5XG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KG5vZGUsICdrZXl1cCcsIGZ1bmN0aW9uIChlLCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX1NQQUNFKSB7XG4gICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZSA9PT0gJ1NVTU1BUlknKSB7XG4gICAgICAgICAgICBHT1ZVSy5kZXRhaWxzLnByZXZlbnREZWZhdWx0KGUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KG5vZGUsICdjbGljaycsIGZ1bmN0aW9uIChlLCB0YXJnZXQpIHtcbiAgICAgICAgY2FsbGJhY2soZSwgdGFyZ2V0KVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBuZWFyZXN0IGFuY2VzdG9yIGVsZW1lbnQgb2YgYSBub2RlIHRoYXQgbWF0Y2hlcyBhIGdpdmVuIHRhZyBuYW1lXG4gICAgZ2V0QW5jZXN0b3I6IGZ1bmN0aW9uIChub2RlLCBtYXRjaCkge1xuICAgICAgZG8ge1xuICAgICAgICBpZiAoIW5vZGUgfHwgbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBtYXRjaCkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZVxuICAgICAgfSB3aGlsZSAobm9kZSlcblxuICAgICAgcmV0dXJuIG5vZGVcbiAgICB9LFxuXG4gICAgLy8gSW5pdGlhbGlzYXRpb24gZnVuY3Rpb25cbiAgICBhZGREZXRhaWxzUG9seWZpbGw6IGZ1bmN0aW9uIChsaXN0LCBjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCBkb2N1bWVudC5ib2R5XG4gICAgICAvLyBJZiB0aGlzIGhhcyBhbHJlYWR5IGhhcHBlbmVkLCBqdXN0IHJldHVyblxuICAgICAgLy8gZWxzZSBzZXQgdGhlIGZsYWcgc28gaXQgZG9lc24ndCBoYXBwZW4gYWdhaW5cbiAgICAgIGlmIChHT1ZVSy5kZXRhaWxzLnN0YXJ0ZWQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBHT1ZVSy5kZXRhaWxzLnN0YXJ0ZWQgPSB0cnVlXG4gICAgICAvLyBHZXQgdGhlIGNvbGxlY3Rpb24gb2YgZGV0YWlscyBlbGVtZW50cywgYnV0IGlmIHRoYXQncyBlbXB0eVxuICAgICAgLy8gdGhlbiB3ZSBkb24ndCBuZWVkIHRvIGJvdGhlciB3aXRoIHRoZSByZXN0IG9mIHRoZSBzY3JpcHRpbmdcbiAgICAgIGlmICgobGlzdCA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGV0YWlscycpKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICAvLyBlbHNlIGl0ZXJhdGUgdGhyb3VnaCB0aGVtIHRvIGFwcGx5IHRoZWlyIGluaXRpYWwgc3RhdGVcbiAgICAgIHZhciBuID0gbGlzdC5sZW5ndGhcbiAgICAgIHZhciBpID0gMFxuICAgICAgZm9yIChpOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIHZhciBkZXRhaWxzID0gbGlzdFtpXVxuXG4gICAgICAgIC8vIFNhdmUgc2hvcnRjdXRzIHRvIHRoZSBpbm5lciBzdW1tYXJ5IGFuZCBjb250ZW50IGVsZW1lbnRzXG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5ID0gZGV0YWlscy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3VtbWFyeScpLml0ZW0oMClcbiAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQgPSBkZXRhaWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKS5pdGVtKDApXG5cbiAgICAgICAgaWYgKCFkZXRhaWxzLl9fc3VtbWFyeSB8fCAhZGV0YWlscy5fX2NvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgY29udGVudCBkb2Vzbid0IGhhdmUgYW4gSUQsIGFzc2lnbiBpdCBvbmUgbm93XG4gICAgICAgIC8vIHdoaWNoIHdlJ2xsIG5lZWQgZm9yIHRoZSBzdW1tYXJ5J3MgYXJpYS1jb250cm9scyBhc3NpZ25tZW50XG4gICAgICAgIGlmICghZGV0YWlscy5fX2NvbnRlbnQuaWQpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5pZCA9ICdkZXRhaWxzLWNvbnRlbnQtJyArIGlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBBUklBIHJvbGU9XCJncm91cFwiIHRvIGRldGFpbHNcbiAgICAgICAgZGV0YWlscy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZ3JvdXAnKVxuXG4gICAgICAgIC8vIEFkZCByb2xlPWJ1dHRvbiB0byBzdW1tYXJ5XG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKVxuXG4gICAgICAgIC8vIEFkZCBhcmlhLWNvbnRyb2xzXG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGRldGFpbHMuX19jb250ZW50LmlkKVxuXG4gICAgICAgIC8vIFNldCB0YWJJbmRleCBzbyB0aGUgc3VtbWFyeSBpcyBrZXlib2FyZCBhY2Nlc3NpYmxlIGZvciBub24tbmF0aXZlIGVsZW1lbnRzXG4gICAgICAgIC8vIGh0dHA6Ly93d3cuc2FsaWVuY2VzLmNvbS9icm93c2VyQnVncy90YWJJbmRleC5odG1sXG4gICAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnRhYkluZGV4ID0gMFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV0ZWN0IGluaXRpYWwgb3BlbiBzdGF0ZVxuICAgICAgICB2YXIgb3BlbkF0dHIgPSBkZXRhaWxzLmdldEF0dHJpYnV0ZSgnb3BlbicpICE9PSBudWxsXG4gICAgICAgIGlmIChvcGVuQXR0ciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJylcbiAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuICAgICAgICAgIGRldGFpbHMuX19jb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpXG4gICAgICAgICAgaWYgKCFHT1ZVSy5kZXRhaWxzLk5BVElWRV9ERVRBSUxTKSB7XG4gICAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgY2lyY3VsYXIgcmVmZXJlbmNlIGZyb20gdGhlIHN1bW1hcnkgYmFjayB0byBpdHNcbiAgICAgICAgLy8gcGFyZW50IGRldGFpbHMgZWxlbWVudCwgZm9yIGNvbnZlbmllbmNlIGluIHRoZSBjbGljayBoYW5kbGVyXG4gICAgICAgIGRldGFpbHMuX19zdW1tYXJ5Ll9fZGV0YWlscyA9IGRldGFpbHNcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIG5vdCBhIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgY3JlYXRlIGFuIGFycm93XG4gICAgICAgIC8vIGluc2lkZSB0aGUgc3VtbWFyeVxuICAgICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgICB2YXIgdHdpc3R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpXG5cbiAgICAgICAgICBpZiAob3BlbkF0dHIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHR3aXN0eS5jbGFzc05hbWUgPSAnYXJyb3cgYXJyb3ctb3BlbidcbiAgICAgICAgICAgIHR3aXN0eS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXFx1MjViYycpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0d2lzdHkuY2xhc3NOYW1lID0gJ2Fycm93IGFycm93LWNsb3NlZCdcbiAgICAgICAgICAgIHR3aXN0eS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXFx1MjViYScpKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGRldGFpbHMuX19zdW1tYXJ5Ll9fdHdpc3R5ID0gZGV0YWlscy5fX3N1bW1hcnkuaW5zZXJ0QmVmb3JlKHR3aXN0eSwgZGV0YWlscy5fX3N1bW1hcnkuZmlyc3RDaGlsZClcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5fX3R3aXN0eS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEJpbmQgYSBjbGljayBldmVudCB0byBoYW5kbGUgc3VtbWFyeSBlbGVtZW50c1xuICAgICAgR09WVUsuZGV0YWlscy5hZGRDbGlja0V2ZW50KGNvbnRhaW5lciwgZnVuY3Rpb24gKGUsIHN1bW1hcnkpIHtcbiAgICAgICAgaWYgKCEoc3VtbWFyeSA9IEdPVlVLLmRldGFpbHMuZ2V0QW5jZXN0b3Ioc3VtbWFyeSwgJ3N1bW1hcnknKSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHT1ZVSy5kZXRhaWxzLnN0YXRlY2hhbmdlKHN1bW1hcnkpXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICAvLyBEZWZpbmUgYSBzdGF0ZWNoYW5nZSBmdW5jdGlvbiB0aGF0IHVwZGF0ZXMgYXJpYS1leHBhbmRlZCBhbmQgc3R5bGUuZGlzcGxheVxuICAgIC8vIEFsc28gdXBkYXRlIHRoZSBhcnJvdyBwb3NpdGlvblxuICAgIHN0YXRlY2hhbmdlOiBmdW5jdGlvbiAoc3VtbWFyeSkge1xuICAgICAgdmFyIGV4cGFuZGVkID0gc3VtbWFyeS5fX2RldGFpbHMuX19zdW1tYXJ5LmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAndHJ1ZSdcbiAgICAgIHZhciBoaWRkZW4gPSBzdW1tYXJ5Ll9fZGV0YWlscy5fX2NvbnRlbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpID09PSAndHJ1ZSdcblxuICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19zdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIChleHBhbmRlZCA/ICdmYWxzZScgOiAndHJ1ZScpKVxuICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAoaGlkZGVuID8gJ2ZhbHNlJyA6ICd0cnVlJykpXG5cbiAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5fX2NvbnRlbnQuc3R5bGUuZGlzcGxheSA9IChleHBhbmRlZCA/ICdub25lJyA6ICcnKVxuXG4gICAgICAgIHZhciBoYXNPcGVuQXR0ciA9IHN1bW1hcnkuX19kZXRhaWxzLmdldEF0dHJpYnV0ZSgnb3BlbicpICE9PSBudWxsXG4gICAgICAgIGlmICghaGFzT3BlbkF0dHIpIHtcbiAgICAgICAgICBzdW1tYXJ5Ll9fZGV0YWlscy5zZXRBdHRyaWJ1dGUoJ29wZW4nLCAnb3BlbicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMucmVtb3ZlQXR0cmlidXRlKCdvcGVuJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3VtbWFyeS5fX3R3aXN0eSkge1xuICAgICAgICBzdW1tYXJ5Ll9fdHdpc3R5LmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gKGV4cGFuZGVkID8gJ1xcdTI1YmEnIDogJ1xcdTI1YmMnKVxuICAgICAgICBzdW1tYXJ5Ll9fdHdpc3R5LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoZXhwYW5kZWQgPyAnYXJyb3cgYXJyb3ctY2xvc2VkJyA6ICdhcnJvdyBhcnJvdy1vcGVuJykpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBHT1ZVSy5kZXRhaWxzLnJlbW92ZUV2ZW50KG5vZGUsICdjbGljaycpXG4gICAgfSxcblxuICAgIC8vIEJpbmQgdHdvIGxvYWQgZXZlbnRzIGZvciBtb2Rlcm4gYW5kIG9sZGVyIGJyb3dzZXJzXG4gICAgLy8gSWYgdGhlIGZpcnN0IG9uZSBmaXJlcyBpdCB3aWxsIHNldCBhIGZsYWcgdG8gYmxvY2sgdGhlIHNlY29uZCBvbmVcbiAgICAvLyBidXQgaWYgaXQncyBub3Qgc3VwcG9ydGVkIHRoZW4gdGhlIHNlY29uZCBvbmUgd2lsbCBmaXJlXG4gICAgaW5pdDogZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkRXZlbnQoZG9jdW1lbnQsICdET01Db250ZW50TG9hZGVkJywgR09WVUsuZGV0YWlscy5hZGREZXRhaWxzUG9seWZpbGwpXG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KHdpbmRvdywgJ2xvYWQnLCBHT1ZVSy5kZXRhaWxzLmFkZERldGFpbHNQb2x5ZmlsbClcbiAgICB9XG4gIH1cbiAgZ2xvYmFsLkdPVlVLID0gR09WVUtcbn0pKHdpbmRvdylcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgTlNBID0gTlNBIHx8IHt9O1xudmFyIGZpbHRlckJveGVzID0gJCgnLmZpbHRlci1ib3gnKTtcblxuTlNBLmZpbHRlcnMgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBmaWx0ZXJCb3hlcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhhdCA9ICQodGhpcyksXG4gICAgICAgICAgaGVhZGVyID0gJHRoYXQuZmluZCgnLmNvbnRhaW5lci1oZWFkJyksXG4gICAgICAgICAgdGl0bGUgPSBoZWFkZXIuZmluZCgnLm9wdGlvbi1zZWxlY3QtbGFiZWwnKSxcbiAgICAgICAgICBjaGVja2JveGVzID0gJHRoYXQuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKSxcbiAgICAgICAgICBidXR0b24gPSAkKCc8YnV0dG9uIC8+JykuYWRkQ2xhc3MoJ2pzLWNvbnRhaW5lci1oZWFkJyksXG4gICAgICAgICAgY2hlY2tDb3VudCA9ICQoJzxkaXYgLz4nKS5hZGRDbGFzcygnanMtc2VsZWN0ZWQtY291bnRlcicpO1xuXG4gICAgICBidXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAkKHRoaXMpLm5leHQoKTtcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Nsb3NlZCcpKSB7XG4gICAgICAgICAgb3B0aW9ucy5zaG93KCk7XG4gICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdjbG9zZWQnKVxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zLmhpZGUoKTtcbiAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2Nsb3NlZCcpXG4gICAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KS5hcHBlbmQodGl0bGUsIGNoZWNrQ291bnQpO1xuXG4gICAgICBoZWFkZXIucmVwbGFjZVdpdGgoYnV0dG9uKTtcblxuICAgICAgY2hlY2tib3hlcy5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0NvdW50LnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGNoZWNrYm94ZXMuZmlsdGVyKCc6Y2hlY2tlZCcpLmxlbmd0aCA+IDAgPyBjaGVja2JveGVzLmZpbHRlcignOmNoZWNrZWQnKS5sZW5ndGggKyAnIHNlbGVjdGVkJyA6ICcnO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmlmIChmaWx0ZXJCb3hlcy5sZW5ndGggPiAwKSB7XG4gIE5TQS5maWx0ZXJzLmluaXQoKTtcbn1cbiIsInZhciBnYUV2ZW50ID0gJCgnI2dhLWV2ZW50Jyk7XG5cbmlmIChnYUV2ZW50Lmxlbmd0aCA+IDApIHtcbiAgdmFyIGNhdGVnb3J5ID0gZ2FFdmVudC5kYXRhKCdjYXRlZ29yeScpLFxuICAgIGxhYmVsID0gZ2FFdmVudC5kYXRhKCdsYWJlbCcpLFxuICAgIGV2ZW50ID0gZ2FFdmVudC5kYXRhKCdldmVudCcpO1xuXG4gIGlmIChldmVudCAhPT0gJycgJiYgbGFiZWwgIT09ICcnICYmIGNhdGVnb3J5ICE9PSAnJykge1xuICAgIGd0YWcoJ2V2ZW50JywgZXZlbnQsIHtcbiAgICAgIGV2ZW50X2NhdGVnb3J5OiBjYXRlZ29yeSxcbiAgICAgIGV2ZW50X2xhYmVsOiBsYWJlbCxcbiAgICB9KTtcbiAgfVxufVxuXG4kKCcubm90aWZpY2F0aW9uIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGlmICgkKHRoaXMpLmRhdGEoJ2NsaWVudGlkJykpIHtcbiAgICBndGFnKCdldmVudCcsICdkb3dubG9hZCcsIHtcbiAgICAgIGV2ZW50X2NhdGVnb3J5OiAnbWlncmF0aW9uLWhlbHAtcGRmJyxcbiAgICAgIGV2ZW50X2xhYmVsOiAkKHRoaXMpLmRhdGEoJ2NsaWVudGlkJyksXG4gICAgfSk7XG4gIH1cbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBOU0EgPSBOU0EgfHwge307XG5cbk5TQS5zaWduaW4gPSB7XG4gIGZvcm06ICQoJy5mb3JtLXNpZ25pbicpLFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXR1cEV2ZW50cygpO1xuICB9LFxuICBzZXR1cEV2ZW50czogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZm9ybS5vbignc3VibWl0JywgdGhpcywgdGhpcy5oYW5kbGVTdWJtaXQpO1xuICB9LFxuICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICB2YXIgJGZvcm0gPSAkKHRoaXMpO1xuICAgIHZhciAkaW5wdXRzID0gJGZvcm0uZmluZCgnaW5wdXQnKS5ub3QoJzpjaGVja2JveCcpLCBwb3N0RGF0YSA9IHt9LCAkc3VibWl0QnV0dG9ucyA9ICQodGhpcykuZmluZCgnYnV0dG9uOnN1Ym1pdCcpLCAkc3VibWl0QnV0dG9uID0gJHN1Ym1pdEJ1dHRvbnMuZXEoMCk7XG5cbiAgICAkc3VibWl0QnV0dG9ucy5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG4gICAgJHN1Ym1pdEJ1dHRvbi5jc3MoJ21pbi13aWR0aCcsICRzdWJtaXRCdXR0b24ub3V0ZXJXaWR0aCgpICsgJ3B4JylcblxuICAgICRzdWJtaXRCdXR0b24uZmluZCgnLmxvYWRlcicpLnJlbW92ZUNsYXNzKCd2aCcpO1xuXG4gICAgJGlucHV0cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgcG9zdERhdGFbdGhpcy5uYW1lXSA9ICQodGhpcykudmFsKCk7XG4gICAgfSk7XG5cbiAgICAvLyBIaWRlIGFueSBwYXNzd29yZCBpbnB1dHMgd2UgbWF5IGhhdmUgaW4gdGhlIGZvcm1cbiAgICB2YXIgJHBhc3N3b3JkSW5wdXRzID0gJCgnLnBhc3N3b3JkLWlucHV0Jyk7XG4gICAgJHBhc3N3b3JkSW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIC8vIEhpZGUgcGFzc3dvcmRcbiAgICAgICQodGhpcykuYXR0cihcInR5cGVcIiwgXCJwYXNzd29yZFwiKTtcbiAgICAgIC8vIFVwZGF0ZSB0ZXh0IGluIHNob3cvaGlkZSBidXR0b25cbiAgICAgICQodGhpcykuc2libGluZ3MoJy5zaG93LXBhc3N3b3JkJykuaHRtbCgnU2hvdycpO1xuICAgIH0pO1xuXG4gICAgJC5hamF4KHtcbiAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgIGRhdGE6IHBvc3REYXRhLFxuICAgICAgdXJsOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcbiAgICAgIGNvbnRleHQ6IGUuZGF0YSxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5yZWRpcmVjdCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YS51cmk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRhdGEuaXNGYWlsZWRMb2dpbikge1xuICAgICAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb24oJGZvcm0pO1xuICAgICAgICAgICAgdGhpcy5zaG93VmFsaWRhdGlvbk1lc3NhZ2UoZGF0YS52YWxpZGF0aW9uTWVzc2FnZXMpO1xuICAgICAgICAgICAgdGhpcy5zaG93SW5saW5lVmFsaWRhdGlvbihkYXRhLnZhbGlkYXRpb25NZXNzYWdlcyk7XG4gICAgICAgICAgICAkc3VibWl0QnV0dG9ucy5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgJHN1Ym1pdEJ1dHRvbi5maW5kKCcubG9hZGVyJykuYWRkQ2xhc3MoJ3ZoJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGd0YWcoJ2V2ZW50JywgJ1N1Y2Nlc3NmdWwgbG9naW4nLCB7XG4gICAgICAgICAgICAgIGV2ZW50X2NhdGVnb3J5OiAnTG9naW4nLFxuICAgICAgICAgICAgICBldmVudF9sYWJlbDogZ2V0UGFyYW1ldGVyQnlOYW1lKCdjbGllbnRpZCcpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkRm9ybUFuZFN1Ym1pdChkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCRmb3JtKTtcbiAgICAgICAgdGhpcy5zaG93VmFsaWRhdGlvbk1lc3NhZ2UoKTtcbiAgICAgICAgJHN1Ym1pdEJ1dHRvbnMucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgJHN1Ym1pdEJ1dHRvbi5maW5kKCcubG9hZGVyJykuYWRkQ2xhc3MoJ3ZoJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICByZXNldFZhbGlkYXRpb246IGZ1bmN0aW9uICgkZm9ybSkge1xuXG4gICAgJCgnLmdvdnVrLWVycm9yLXN1bW1hcnknKS5yZW1vdmUoKTtcblxuICAgIHZhciAkZm9ybUdyb3VwcyA9ICRmb3JtLmZpbmQoJy5nb3Z1ay1mb3JtLWdyb3VwJyk7XG5cbiAgICAkZm9ybUdyb3Vwcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkZmllbGQgPSAkKHRoaXMpLmZpbmQoJ2lucHV0JykuZXEoMCk7XG4gICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKSkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuICAgICAgICAkKHRoaXMpLmZpbmQoJ3NwYW4uZ292dWstZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xuICAgICAgICAkZmllbGQucmVtb3ZlQXR0cignYXJpYS1kZXNjcmliZWRieScpLnJlbW92ZUF0dHIoJ2FyaWEtaW52YWxpZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHNob3dWYWxpZGF0aW9uTWVzc2FnZTogZnVuY3Rpb24gKG1lc3NhZ2VzKSB7XG5cbiAgICB2YXIgJGRpdiA9ICQoJzxkaXYgLz4nKS5hdHRyKCdjbGFzcycsICdnb3Z1ay1lcnJvci1zdW1tYXJ5IGdvdnVrLSEtbWFyZ2luLXRvcC02JykuYXR0cigncm9sZScsICdhbGVydCcpLmF0dHIoJ3RhYmluZGV4JywgJy0xJykuYXR0cignYXJpYS1sYWJlbGxlZGJ5JywgJ2Vycm9yLXN1bW1hcnktdGl0bGUnKTtcbiAgICB2YXIgJGgyID0gJCgnPGgyIC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstZXJyb3Itc3VtbWFyeV9fdGl0bGUnKS5hdHRyKCdpZCcsICdlcnJvci1zdW1tYXJ5Jyk7XG4gICAgdmFyICR1bENvbnRhaW5lciA9ICQoJzxkaXYgLz4nKS5hdHRyKCdjbGFzcycsICdnb3Z1ay1lcnJvci1zdW1tYXJ5X19ib2R5Jyk7XG4gICAgdmFyICR1bCA9ICQoJzx1bCAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWxpc3QgZ292dWstZXJyb3Itc3VtbWFyeV9fbGlzdCcpO1xuXG4gICAgaWYgKG1lc3NhZ2VzKSB7XG4gICAgICAkaDIudGV4dCgnVGhlcmUgaXMgYSBwcm9ibGVtJyk7XG4gICAgICAkLmVhY2gobWVzc2FnZXMsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAnbG9naW5FcnJvcicpIHtcbiAgICAgICAgICBpbmRleCA9ICd1c2VybmFtZSc7XG4gICAgICAgICAgZ3RhZygnZXZlbnQnLCAnRmFpbGVkIGxvZ2luJywge1xuICAgICAgICAgICAgZXZlbnRfY2F0ZWdvcnk6ICdMb2dpbicsXG4gICAgICAgICAgICBldmVudF9sYWJlbDogJ1VzZXJzIGxvZ2luIGNyZWRlbnRpYWxzIHdlcmUgd3JvbmcnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkYSA9ICQoJzxhIC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstbGluaycpLmF0dHIoJ2hyZWYnLCAnIycgKyBpbmRleCkudGV4dCh2YWx1ZSk7XG4gICAgICAgIHZhciAkbGkgPSAkKCc8bGkgLz4nKS5hcHBlbmQoJGEpO1xuICAgICAgICAkdWwuYXBwZW5kKCRsaSk7XG4gICAgICB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAkaDIudGV4dCgnVGhlcmUgaGFzIGJlZW4gYW4gZXJyb3InKTtcbiAgICAgIHZhciAkbGkgPSAkKCc8bGkgLz4nKS5odG1sKCdQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLiBJZiB0aGUgcHJvYmxlbSBjb250aW51ZXMsIGZvbGxvdyB0aGUgbGluayB0byA8YSBocmVmPVwiaHR0cHM6Ly9oZWxwLnNpZ25pbi5lZHVjYXRpb24uZ292LnVrL2NvbnRhY3QvZm9ybVwiPnN1Ym1pdCBhIHN1cHBvcnQgcmVxdWVzdDwvYT4nKTtcbiAgICAgICR1bC5hcHBlbmQoJGxpKTtcbiAgICAgIGd0YWcoJ2V2ZW50JywgJ0Vycm9yIG9jY3VycmVkJywge1xuICAgICAgICBldmVudF9jYXRlZ29yeTogJ0xvZ2luJyxcbiAgICAgICAgZXZlbnRfbGFiZWw6ICdBIHNlcnZlciBlcnJvciBvY2N1cnJlZCBkdXJpbmcgbG9naW4nLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJGRpdi5hcHBlbmQoJGgyKS5hcHBlbmQoJHVsQ29udGFpbmVyLmFwcGVuZCgkdWwpKTtcbiAgICAkKCdtYWluJykucHJlcGVuZCgkZGl2KTtcblxuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogJGRpdi5vZmZzZXQoKS50b3AgLSAxNVxuICAgIH0sIDMwMCk7XG5cbiAgfSxcbiAgc2hvd0lubGluZVZhbGlkYXRpb246IGZ1bmN0aW9uKG1lc3NhZ2VzKSB7XG5cbiAgICAkLmVhY2gobWVzc2FnZXMsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG4gICAgICB2YXIgJGZpZWxkID0gJCgnaW5wdXRbbmFtZT0nICsgaW5kZXggKyAnXScpLFxuICAgICAgICAkcGFyZW50ID0gJGZpZWxkLnBhcmVudCgpO1xuXG4gICAgICB2YXIgJGxhYmVsID0gJHBhcmVudC5maW5kKCdsYWJlbCcpLmZpcnN0KCk7XG5cbiAgICAgIGlmICghJHBhcmVudC5oYXNDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKSkge1xuXG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAkKCc8c3BhbiBjbGFzcz1cImdvdnVrLWJvZHlcIj4nKVxuICAgICAgICAgIC5odG1sKHZhbHVlKVxuICAgICAgICAgIC5wcm9wKCdjbGFzcycsICdnb3Z1ay1lcnJvci1tZXNzYWdlJylcbiAgICAgICAgICAucHJvcCgnaWQnLCAndmFsaWRhdGlvbi0nICsgaW5kZXgpO1xuICAgICAgfVxuXG4gICAgICAkbGFiZWwuYWZ0ZXIoZXJyb3JNZXNzYWdlKTtcbiAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJyk7XG4gICAgICAkZmllbGQuYXR0cih7XG4gICAgICAgICdhcmlhLWRlc2NyaWJlZGJ5JyA6ICd2YWxpZGF0aW9uLScgKyBpbmRleCxcbiAgICAgICAgJ2FyaWEtaW52YWxpZCc6ICd0cnVlJ1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICB9LFxuICBidWlsZEZvcm1BbmRTdWJtaXQ6IGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICB2YXIgJGZvcm0gPSAkKCc8Zm9ybSAvPicpLmF0dHIoe1xuICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICBhY3Rpb246IGRhdGEuZGVzdGluYXRpb24sXG4gICAgICBpZDogJ2RmZXNpZ25pbmZvcm0nXG4gICAgfSk7XG5cbiAgICAkLmVhY2goZGF0YS5wb3N0YmFja0RhdGEsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG4gICAgICB2YXIgJGZpZWxkID0gJCgnPGlucHV0IC8+JykuYXR0cih7XG4gICAgICAgIHR5cGU6ICdoaWRkZW4nLFxuICAgICAgICBuYW1lOiBpbmRleCxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9KTtcbiAgICAgICRmb3JtLmFwcGVuZCgkZmllbGQpO1xuICAgIH0pO1xuXG4gICAgJCgnI2RmZXNpZ25pbmZvcm0nKS5yZW1vdmUoKTtcbiAgICAkKCdib2R5JykuYXBwZW5kKCRmb3JtKTtcbiAgICAkZm9ybS5zdWJtaXQoKTtcbiAgfSxcbn07XG5cbmlmICgkKCcuZm9ybS1zaWduaW4nKS5sZW5ndGggPiAwKSB7XG4gIE5TQS5zaWduaW4uaW5pdCgpO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSwgdXJsKSB7XG4gIGlmICghdXJsKSB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgXCJcXFxcJCZcIik7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbPyZdXCIgKyBuYW1lICsgXCIoPShbXiYjXSopfCZ8I3wkKVwiKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpIHJldHVybiBudWxsO1xuICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIHNvcnRUYWJsZShuKSB7XG4gIHZhciB0YWJsZSwgcm93cywgc3dpdGNoaW5nLCBpLCB4LCB5LCBzaG91bGRTd2l0Y2gsIGRpcmVjdGlvbiwgc3dpdGNoY291bnQgPSAwO1xuICB0YWJsZSA9ICQoJ3RhYmxlLnNvcnRhYmxlJyk7XG4gIHN3aXRjaGluZyA9IHRydWU7XG4gIGRpcmVjdGlvbiA9ICdhJztcblxuICB3aGlsZSAoc3dpdGNoaW5nKSB7XG5cbiAgICBzd2l0Y2hpbmcgPSBmYWxzZTtcbiAgICByb3dzID0gdGFibGUuZmluZCgndHInKTtcblxuICAgIGZvciAoaSA9IDE7IGkgPCAocm93cy5sZW5ndGggLSAxKTsgaSsrKSB7XG5cbiAgICAgIHNob3VsZFN3aXRjaCA9IGZhbHNlO1xuXG4gICAgICB4ID0gcm93c1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVEQnKVtuXTtcbiAgICAgIHkgPSByb3dzW2kgKyAxXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVEQnKVtuXTtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2EnKSB7XG4gICAgICAgIGlmICh4LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpID4geS5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHNob3VsZFN3aXRjaCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZCcpIHtcbiAgICAgICAgaWYgKHguaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkgPCB5LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzaG91bGRTd2l0Y2gpIHtcblxuICAgICAgcm93c1tpXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShyb3dzW2kgKyAxXSwgcm93c1tpXSk7XG4gICAgICBzd2l0Y2hpbmcgPSB0cnVlO1xuXG4gICAgICBzd2l0Y2hjb3VudCArKztcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmIChzd2l0Y2hjb3VudCA9PT0gMCAmJiBkaXJlY3Rpb24gPT09ICdhJykge1xuICAgICAgICBkaXJlY3Rpb24gPSAnZCc7XG4gICAgICAgIHN3aXRjaGluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRpcmVjdGlvbjtcbn1cblxuJChmdW5jdGlvbiAoKSB7XG5cbiAgJCgndGFibGUuc29ydGFibGUgdGhlYWQgdGgnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgaGVhZGluZ0NlbGxzID0gJCgndGFibGUuc29ydGFibGUgdGhlYWQgdHIgdGgnKTtcblxuICAgIGhlYWRpbmdDZWxscy5yZW1vdmVDbGFzcygnc29ydGVkJykucmVtb3ZlQ2xhc3MoJ2Rpci1hJykucmVtb3ZlQ2xhc3MoJ2Rpci1kJyk7XG5cbiAgICB2YXIgaW5kZXggPSBoZWFkaW5nQ2VsbHMuaW5kZXgoJCh0aGlzKSk7XG5cbiAgICB2YXIgZGlyZWN0aW9uID0gc29ydFRhYmxlKGluZGV4KTtcblxuICAgICQodGhpcykuYWRkQ2xhc3MoJ3NvcnRlZCBkaXItJyArIGRpcmVjdGlvbik7XG5cbiAgfSk7XG5cbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBOU0EgPSBOU0EgfHwge307XG5cbk5TQS5tb2RhbCA9IHtcbiAgZWxlbXM6IHtcbiAgICBsaW5rczogJCgnLm1vZGFsLWxpbmsnKSxcbiAgICBtb2RhbHM6ICQoJy5tb2RhbCcpXG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1vZGFsQmcoKTtcbiAgICB0aGlzLnNldFVwRXZlbnRzKCk7XG4gIH0sXG4gIG1vZGFsQmc6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGJnID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbW9kYWwtYmcnKS5oaWRlKCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgeyB0aGF0LmhpZGVNb2RhbHMoKTsgfSk7XG4gICAgJCgnYm9keScpLmFwcGVuZChiZyk7XG4gIH0sXG4gIHNldFVwRXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuZWxlbXMubGlua3Mub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgIHRoYXQuc2hvd01vZGFsKCQodGFyZ2V0KSk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGF0LmVsZW1zLm1vZGFscy5maW5kKCcuY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhhdC5oaWRlTW9kYWxzKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAkKCdib2R5Jykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKChlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IDI3KVxuICAgICAgICB0aGF0LmhpZGVNb2RhbHMoKTtcbiAgICB9KTtcbiAgfSxcbiAgc2hvd01vZGFsOiBmdW5jdGlvbiAobW9kYWwpIHtcbiAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmcnKS5zaG93KCk7XG4gICAgbW9kYWwuc2hvdygpO1xuICB9LFxuICBoaWRlTW9kYWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJnJykuaGlkZSgpO1xuICAgIHRoaXMuZWxlbXMubW9kYWxzLmhpZGUoKTtcbiAgfVxufVxuXG5OU0EubW9kYWwuaW5pdCgpO1xuIiwiOyhmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIHZhciAkID0gZ2xvYmFsLmpRdWVyeVxuICB2YXIgR09WVUsgPSBnbG9iYWwuR09WVUsgfHwge31cblxuICBmdW5jdGlvbiBTaG93SGlkZUNvbnRlbnQgKCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuXG4gICAgLy8gUmFkaW8gYW5kIENoZWNrYm94IHNlbGVjdG9yc1xuICAgIHZhciBzZWxlY3RvcnMgPSB7XG4gICAgICBuYW1lc3BhY2U6ICdTaG93SGlkZUNvbnRlbnQnLFxuICAgICAgcmFkaW86ICdbZGF0YS10YXJnZXRdID4gaW5wdXRbdHlwZT1cInJhZGlvXCJdJyxcbiAgICAgIGNoZWNrYm94OiAnW2RhdGEtdGFyZ2V0XSA+IGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScsXG4gICAgICBsaW5rOiAnYS5qcy10b2dnbGUtY29udGVudCdcbiAgICB9XG5cbiAgICAvLyBFc2NhcGUgbmFtZSBhdHRyaWJ1dGUgZm9yIHVzZSBpbiBET00gc2VsZWN0b3JcbiAgICBmdW5jdGlvbiBlc2NhcGVFbGVtZW50TmFtZSAoc3RyKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gc3RyLnJlcGxhY2UoJ1snLCAnXFxcXFsnKS5yZXBsYWNlKCddJywgJ1xcXFxdJylcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG5cbiAgICAvLyBBZGRzIEFSSUEgYXR0cmlidXRlcyB0byBjb250cm9sICsgYXNzb2NpYXRlZCBjb250ZW50XG4gICAgZnVuY3Rpb24gaW5pdFRvZ2dsZWRDb250ZW50ICgpIHtcbiAgICAgIHZhciAkY29udHJvbCA9ICQodGhpcylcbiAgICAgIHZhciAkY29udGVudCA9IGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKVxuXG4gICAgICAvLyBTZXQgYXJpYS1jb250cm9scyBhbmQgZGVmYXVsdHNcbiAgICAgIGlmICgkY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgJGNvbnRyb2wuYXR0cignYXJpYS1jb250cm9scycsICRjb250ZW50LmF0dHIoJ2lkJykpXG4gICAgICAgICRjb250cm9sLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuICAgICAgICAkY29udGVudC5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdG9nZ2xlZCBjb250ZW50IGZvciBjb250cm9sXG4gICAgZnVuY3Rpb24gZ2V0VG9nZ2xlZENvbnRlbnQgKCRjb250cm9sKSB7XG4gICAgICB2YXIgaWQgPSAkY29udHJvbC5hdHRyKCdhcmlhLWNvbnRyb2xzJylcblxuICAgICAgLy8gQVJJQSBhdHRyaWJ1dGVzIGFyZW4ndCBzZXQgYmVmb3JlIGluaXRcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgaWQgPSAkY29udHJvbC5jbG9zZXN0KCdbZGF0YS10YXJnZXRdJykuZGF0YSgndGFyZ2V0JylcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCBzaG93L2hpZGUgY29udGVudCBieSBpZFxuICAgICAgcmV0dXJuICQoJyMnICsgaWQpXG4gICAgfVxuXG4gICAgLy8gU2hvdyB0b2dnbGVkIGNvbnRlbnQgZm9yIGNvbnRyb2xcbiAgICBmdW5jdGlvbiBzaG93VG9nZ2xlZENvbnRlbnQgKCRjb250cm9sLCAkY29udGVudCkge1xuICAgICAgLy8gU2hvdyBjb250ZW50XG4gICAgICBpZiAoJGNvbnRlbnQuaGFzQ2xhc3MoJ2pzLWhpZGRlbicpKSB7XG4gICAgICAgICRjb250ZW50LnJlbW92ZUNsYXNzKCdqcy1oaWRkZW4nKVxuICAgICAgICAkY29udGVudC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpXG5cbiAgICAgICAgLy8gSWYgdGhlIGNvbnRyb2xsaW5nIGlucHV0LCB1cGRhdGUgYXJpYS1leHBhbmRlZFxuICAgICAgICBpZiAoJGNvbnRyb2wuYXR0cignYXJpYS1jb250cm9scycpKSB7XG4gICAgICAgICAgJGNvbnRyb2wuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhpZGUgdG9nZ2xlZCBjb250ZW50IGZvciBjb250cm9sXG4gICAgZnVuY3Rpb24gaGlkZVRvZ2dsZWRDb250ZW50ICgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgICRjb250ZW50ID0gJGNvbnRlbnQgfHwgZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpXG5cbiAgICAgIC8vIEhpZGUgY29udGVudFxuICAgICAgaWYgKCEkY29udGVudC5oYXNDbGFzcygnanMtaGlkZGVuJykpIHtcbiAgICAgICAgJGNvbnRlbnQuYWRkQ2xhc3MoJ2pzLWhpZGRlbicpXG4gICAgICAgICRjb250ZW50LmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuXG4gICAgICAgIC8vIElmIHRoZSBjb250cm9sbGluZyBpbnB1dCwgdXBkYXRlIGFyaWEtZXhwYW5kZWRcbiAgICAgICAgaWYgKCRjb250cm9sLmF0dHIoJ2FyaWEtY29udHJvbHMnKSkge1xuICAgICAgICAgICRjb250cm9sLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHJhZGlvIHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJhZGlvQ29udGVudCAoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAvLyBBbGwgcmFkaW9zIGluIHRoaXMgZ3JvdXAgd2hpY2ggY29udHJvbCBjb250ZW50XG4gICAgICB2YXIgc2VsZWN0b3IgPSBzZWxlY3RvcnMucmFkaW8gKyAnW25hbWU9JyArIGVzY2FwZUVsZW1lbnROYW1lKCRjb250cm9sLmF0dHIoJ25hbWUnKSkgKyAnXVthcmlhLWNvbnRyb2xzXSdcbiAgICAgIHZhciAkZm9ybSA9ICRjb250cm9sLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgdmFyICRyYWRpb3MgPSAkZm9ybS5sZW5ndGggPyAkZm9ybS5maW5kKHNlbGVjdG9yKSA6ICQoc2VsZWN0b3IpXG5cbiAgICAgIC8vIEhpZGUgY29udGVudCBmb3IgcmFkaW9zIGluIGdyb3VwXG4gICAgICAkcmFkaW9zLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBoaWRlVG9nZ2xlZENvbnRlbnQoJCh0aGlzKSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlbGVjdCBjb250ZW50IGZvciB0aGlzIGNvbnRyb2xcbiAgICAgIGlmICgkY29udHJvbC5pcygnW2FyaWEtY29udHJvbHNdJykpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY2hlY2tib3ggc2hvdy9oaWRlXG4gICAgZnVuY3Rpb24gaGFuZGxlQ2hlY2tib3hDb250ZW50ICgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgIC8vIFNob3cgY2hlY2tib3ggY29udGVudFxuICAgICAgaWYgKCRjb250cm9sLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgIHNob3dUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpXG4gICAgICB9IGVsc2UgeyAvLyBIaWRlIGNoZWNrYm94IGNvbnRlbnRcbiAgICAgICAgaGlkZVRvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY2hlY2tib3ggc2hvdy9oaWRlXG4gICAgZnVuY3Rpb24gaGFuZGxlTGlua0NvbnRlbnQgKCRjb250cm9sLCAkY29udGVudCwgJGV2ZW50KSB7XG4gICAgICBpZiAoJGNvbnRlbnQuaGFzQ2xhc3MoJ2pzLWhpZGRlbicpKSB7XG4gICAgICAgIHNob3dUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRlVG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KVxuICAgICAgfVxuICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlcnMgZXRjXG4gICAgZnVuY3Rpb24gaW5pdCAoJGNvbnRhaW5lciwgZWxlbWVudFNlbGVjdG9yLCBldmVudFNlbGVjdG9ycywgaGFuZGxlcikge1xuICAgICAgJGNvbnRhaW5lciA9ICRjb250YWluZXIgfHwgJChkb2N1bWVudC5ib2R5KVxuXG4gICAgICAvLyBIYW5kbGUgY29udHJvbCBjbGlja3NcbiAgICAgIGZ1bmN0aW9uIGRlZmVycmVkIChldmVudCkge1xuICAgICAgICB2YXIgJGNvbnRyb2wgPSAkKHRoaXMpXG4gICAgICAgIGhhbmRsZXIoJGNvbnRyb2wsIGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKSwgZXZlbnQpXG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgQVJJQSBhdHRyaWJ1dGVzXG4gICAgICB2YXIgJGNvbnRyb2xzID0gJChlbGVtZW50U2VsZWN0b3IpXG4gICAgICAkY29udHJvbHMuZWFjaChpbml0VG9nZ2xlZENvbnRlbnQpXG5cbiAgICAgIC8vIEhhbmRsZSBldmVudHNcbiAgICAgICQuZWFjaChldmVudFNlbGVjdG9ycywgZnVuY3Rpb24gKGlkeCwgZXZlbnRTZWxlY3Rvcikge1xuICAgICAgICAkY29udGFpbmVyLm9uKCdjbGljay4nICsgc2VsZWN0b3JzLm5hbWVzcGFjZSwgZXZlbnRTZWxlY3RvciwgZGVmZXJyZWQpXG4gICAgICB9KVxuXG4gICAgICAvLyBBbnkgYWxyZWFkeSA6Y2hlY2tlZCBvbiBpbml0P1xuICAgICAgaWYgKCRjb250cm9scy5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAkY29udHJvbHMuZmlsdGVyKCc6Y2hlY2tlZCcpLmVhY2goZGVmZXJyZWQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IGV2ZW50IHNlbGVjdG9ycyBmb3IgYWxsIHJhZGlvIGdyb3Vwc1xuICAgIGZ1bmN0aW9uIGdldEV2ZW50U2VsZWN0b3JzRm9yUmFkaW9Hcm91cHMgKCkge1xuICAgICAgdmFyIHJhZGlvR3JvdXBzID0gW11cblxuICAgICAgLy8gQnVpbGQgYW4gYXJyYXkgb2YgcmFkaW8gZ3JvdXAgc2VsZWN0b3JzXG4gICAgICByZXR1cm4gJChzZWxlY3RvcnMucmFkaW8pLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBncm91cE5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKVxuXG4gICAgICAgIGlmICgkLmluQXJyYXkoZ3JvdXBOYW1lLCByYWRpb0dyb3VwcykgPT09IC0xKSB7XG4gICAgICAgICAgcmFkaW9Hcm91cHMucHVzaChncm91cE5hbWUpXG4gICAgICAgICAgcmV0dXJuICdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cIicgKyAkKHRoaXMpLmF0dHIoJ25hbWUnKSArICdcIl0nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gU2V0IHVwIHJhZGlvIHNob3cvaGlkZSBjb250ZW50IGZvciBjb250YWluZXJcbiAgICBzZWxmLnNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBpbml0KCRjb250YWluZXIsIHNlbGVjdG9ycy5yYWRpbywgZ2V0RXZlbnRTZWxlY3RvcnNGb3JSYWRpb0dyb3VwcygpLCBoYW5kbGVSYWRpb0NvbnRlbnQpXG4gICAgfVxuXG4gICAgLy8gU2V0IHVwIGNoZWNrYm94IHNob3cvaGlkZSBjb250ZW50IGZvciBjb250YWluZXJcbiAgICBzZWxmLnNob3dIaWRlQ2hlY2tib3hUb2dnbGVkQ29udGVudCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBpbml0KCRjb250YWluZXIsIHNlbGVjdG9ycy5jaGVja2JveCwgW3NlbGVjdG9ycy5jaGVja2JveF0sIGhhbmRsZUNoZWNrYm94Q29udGVudClcbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgbGlua3Mgc2hvdy9oaWRlIGNvbnRlbnQgZm9yIGNvbnRhaW5lclxuICAgIHNlbGYuc2hvd0hpZGVMaW5rVG9nZ2xlZENvbnRlbnQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgaW5pdCgkY29udGFpbmVyLCBzZWxlY3RvcnMubGluaywgW3NlbGVjdG9ycy5saW5rXSwgaGFuZGxlTGlua0NvbnRlbnQpXG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGhhbmRsZXJzXG4gICAgc2VsZi5kZXN0cm95ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgICRjb250YWluZXIgPSAkY29udGFpbmVyIHx8ICQoZG9jdW1lbnQuYm9keSlcbiAgICAgICRjb250YWluZXIub2ZmKCcuJyArIHNlbGVjdG9ycy5uYW1lc3BhY2UpXG4gICAgfVxuICB9XG5cbiAgU2hvd0hpZGVDb250ZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICB0aGlzLnNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCgkY29udGFpbmVyKVxuICAgIHRoaXMuc2hvd0hpZGVDaGVja2JveFRvZ2dsZWRDb250ZW50KCRjb250YWluZXIpXG4gICAgdGhpcy5zaG93SGlkZUxpbmtUb2dnbGVkQ29udGVudCgkY29udGFpbmVyKVxuICB9XG5cbiAgR09WVUsuU2hvd0hpZGVDb250ZW50ID0gU2hvd0hpZGVDb250ZW50XG4gIGdsb2JhbC5HT1ZVSyA9IEdPVlVLXG59KSh3aW5kb3cpXG4iLCJ2YXIgdG9nZ2xlVGlwcyA9ICQoJy50b2dnbGUtaGVscCcpO1xuXG50b2dnbGVUaXBzLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gIHZhciAkdGhhdCxcbiAgICBsaXZlUmVnaW9uLFxuICAgIGNvbnRhaW5lcixcbiAgICB0b2dnbGVUaXA7XG5cbiAgJHRoYXQgPSAkKHRoaXMpO1xuXG4gIGNvbnRhaW5lciA9ICQoJzxzcGFuIC8+JykuYXR0cignY2xhc3MnLCAndG9nZ2xldGlwJyk7XG5cbiAgdG9nZ2xlVGlwID0gJCgnPGJ1dHRvbiAvPicpXG4gICAgLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICAuYXR0cignYXJpYS1sYWJlbCcsICdIZWxwJylcbiAgICAuYXR0cignZGF0YS10b2dnbGV0aXAtY29udGVudCcsICR0aGF0Lmh0bWwoKSlcbiAgICAudGV4dCgnPycpXG4gICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtZXNzYWdlID0gJCh0aGlzKS5kYXRhKCd0b2dnbGV0aXAtY29udGVudCcpO1xuICAgICAgdmFyIGxpdmVSZWdpb24gPSAkKHRoaXMpLm5leHQoKTtcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGl2ZVJlZ2lvbi5odG1sKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gJCgnPHNwYW4gLz4nKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHRoYXQuaHRtbCgpLmxlbmd0aCA+IDUwID8gJ2J1YmJsZSBsb25nJyA6ICdidWJibGUnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRleHQobWVzc2FnZSlcbiAgICAgICAgfSlcbiAgICAgIH0sIDEwMCk7XG4gICAgfSlcbiAgICAub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKChlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IDI3KVxuICAgICAgICBsaXZlUmVnaW9uLmh0bWwoJycpO1xuICAgIH0pO1xuXG4gIGxpdmVSZWdpb24gPSAkKCc8c3BhbiAvPicpXG4gICAgLmF0dHIoJ3JvbGUnLCAnc3RhdHVzJyk7XG5cbiAgY29udGFpbmVyLmFwcGVuZCh0b2dnbGVUaXAsIGxpdmVSZWdpb24pO1xuXG4gICR0aGF0LmJlZm9yZShjb250YWluZXIpLnJlbW92ZSgpO1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKCR0aGF0WzBdICE9PSAkKGUudGFyZ2V0KSkge1xuICAgICAgbGl2ZVJlZ2lvbi5odG1sKCcnKTtcbiAgICB9XG4gIH0pO1xuXG59KTtcbiIsInZhciBmb3JtcyA9ICQoJyNjb250ZW50IGZvcm0nKTtcbi8vdmFyIGlucHV0cyA9IGZvcm1zLmZpbmQoJy5mb3JtLWdyb3VwIGlucHV0Jyk7XG5cbmZvcm1zLmF0dHIoJ25vdmFsaWRhdGUnLCAnbm92YWxpZGF0ZScpO1xuXG4vKlxuZm9ybXMub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcbiAgaW5wdXRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrVmFsaWRpdHkoKTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgc2hvd1ZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xufSk7XG5cbmlucHV0cy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlc3VsdCA9IHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xuICBpZiAoIXJlc3VsdCkge1xuICAgIHNob3dWYWxpZGF0aW9uTWVzc2FnZSh0aGlzKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gIH1cbn0pO1xuXG52YXIgc2hvd1ZhbGlkYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gKGZpZWxkKSB7XG5cbiAgdmFyIGZpZWxkID0gZmllbGQsXG4gICAgJGZpZWxkID0gJChmaWVsZCksXG4gICAgJHBhcmVudCA9ICRmaWVsZC5wYXJlbnQoKTtcblxuICBpZiAoJHBhcmVudC5oYXNDbGFzcygnc2hvdy1wYXNzd29yZCcpKSB7XG4gICAgJHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XG4gIH1cblxuICBpZiAoISRwYXJlbnQuaGFzQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJykpIHtcblxuICAgIHZhciBsYWJlbFRleHQgPSAkZmllbGQuZGF0YSgnbGFiZWwnKSB8fCAkKFwibGFiZWxbZm9yPSdcIiArICRmaWVsZC5hdHRyKCdpZCcpICsgXCInXVwiKS50ZXh0KCksXG4gICAgICBlcnJvck1lc3NhZ2VUZXh0ID0gJ0VudGVyIGEgdmFsaWQgJyArIGxhYmVsVGV4dC50b0xvd2VyQ2FzZSgpLFxuICAgICAgZXJyb3JNZXNzYWdlID0gJCgnPHAgY2xhc3M9XCJnb3Z1ay1ib2R5XCI+JylcbiAgICAgICAgLmh0bWwoZXJyb3JNZXNzYWdlVGV4dClcbiAgICAgICAgLnByb3AoJ2NsYXNzJywgJ2Vycm9yLW1lc3NhZ2UnKVxuICAgICAgICAucHJvcCgnaWQnLCAndmFsaWRhdGlvbi0nICsgc2x1Z2lmeShsYWJlbFRleHQpKTtcblxuICAgICRmaWVsZC5iZWZvcmUoZXJyb3JNZXNzYWdlKTtcbiAgICAkcGFyZW50LmFkZENsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuICAgICRmaWVsZC5hdHRyKHtcbiAgICAgICdhcmlhLWRlc2NyaWJlZGJ5JyA6ICd2YWxpZGF0aW9uLScgKyBzbHVnaWZ5KGxhYmVsVGV4dCksXG4gICAgICAnYXJpYS1pbnZhbGlkJzogJ3RydWUnXG4gICAgfSk7XG4gIH1cbn1cblxudmFyIGhpZGVWYWxpZGF0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICB2YXIgZmllbGQgPSBmaWVsZCxcbiAgICAkZmllbGQgPSAkKGZpZWxkKSxcbiAgICAkcGFyZW50ID0gJGZpZWxkLnBhcmVudCgpO1xuXG4gIGlmICgkcGFyZW50Lmhhc0NsYXNzKCdzaG93LXBhc3N3b3JkJykpIHtcbiAgICAkcGFyZW50ID0gJHBhcmVudC5wYXJlbnQoKTtcbiAgfVxuXG4gICRwYXJlbnQucmVtb3ZlQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJyk7XG4gICRwYXJlbnQuZmluZCgncC5lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XG4gICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG4gICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWludmFsaWQnKTtcbn1cblxudmFyIHNsdWdpZnkgPSBmdW5jdGlvbiAodGV4dCkge1xuICByZXR1cm4gdGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKClcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnLScpXG4gICAgLnJlcGxhY2UoL1teXFx3XFwtXSsvZywgJycpXG4gICAgLnJlcGxhY2UoL1xcLVxcLSsvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9eLSsvLCAnJylcbiAgICAucmVwbGFjZSgvLSskLywgJycpO1xufVxuXG4qL1xuIiwidmFyIE5TQSA9IE5TQSB8fCB7fTtcblxuTlNBID0ge1xuXG4gIGluaXRpYWxpc2VTaG93UGFzc3dvcmQgOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gR2V0IGFsbCB0aGUgcGFzc3dvcmQgaW5wdXRzIGluIHRoZSBwYWdlIGFuZCBsb29wIHRocm91Z2ggdGhlbSB0byBhZGQgdGhlIHNob3cvaGlkZSBidXR0b25cbiAgICB2YXIgJHBhc3N3b3JkSW5wdXRzID0gJCgnLnBhc3N3b3JkLWlucHV0Jyk7XG4gICAgJHBhc3N3b3JkSW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAvLyBDcmVhdGUgc2hvdy9oaWRlIGJ1dHRvblxuICAgICAgdmFyICRzaG93QnV0dG9uID0gJCgnPGJ1dHRvbiAvPicpLnByb3AoeyB0eXBlOiAnYnV0dG9uJywgY2xhc3M6ICdzaG93LXBhc3N3b3JkIGdvdnVrLWJ1dHRvbiBnb3Z1ay1idXR0b24tLXNlY29uZGFyeSBnb3Z1ay0hLW1hcmdpbi1ib3R0b20tMScgfSk7XG4gICAgICAkc2hvd0J1dHRvbi5odG1sKCdTaG93Jyk7XG4gICAgICAvLyBXaGVuIGNsaWNraW5nIG9uIHRoYXQgYnV0dG9uIHdlIHdpbGwgc2hvdy9oaWRlIHRoZSBwYXNzd29yZCBhY2NvcmRpbmdseVxuICAgICAgJHNob3dCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXsgXG4gICAgICAgIGlmKCR0aGF0LmF0dHIoJ3R5cGUnKSA9PT0gJ3Bhc3N3b3JkJyl7XG4gICAgICAgICAgJHRoYXQuYXR0cihcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICAgICRzaG93QnV0dG9uLnRleHQoXCJIaWRlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0aGF0LmF0dHIoXCJ0eXBlXCIsIFwicGFzc3dvcmRcIik7XG4gICAgICAgICAgJHNob3dCdXR0b24udGV4dChcIlNob3dcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gQWRkIGJ1dHRvbiB0byB0aGUgZG9jdW1lbnRcbiAgICAgICR0aGF0LmFmdGVyKCRzaG93QnV0dG9uKTtcbiAgICB9KTtcbiAgfSxcblxuICBiYWNrTGluazogZnVuY3Rpb24gKCkge1xuICAgIHZhciBiYWNrTGluayA9ICQoJzxhPicpXG4gICAgICAuYXR0cih7ICdocmVmJzogJyMnLCBcImNsYXNzXCI6IFwiZ292dWstYmFjay1saW5rLWJvbGRcIiB9KVxuICAgICAgLnRleHQoJ0JhY2snKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7IHdpbmRvdy5oaXN0b3J5LmJhY2soKTsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9KTtcbiAgICAkKCcuanMtYmFjay1saW5rJykuaHRtbChiYWNrTGluayk7XG4gIH0sXG59O1xuXG5cbmlmICgkKCdzZWxlY3Quc2VsZWN0MicpLmxlbmd0aCA+IDApIHtcbiAgJCgnc2VsZWN0LnNlbGVjdDInKS5zZWxlY3QyKHttYXRjaGVyOiBzZWxlY3QyTW9kZWxNYXRjaGVyfSk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdDJNb2RlbE1hdGNoZXIgKHBhcmFtcywgZGF0YSkge1xuICBkYXRhLnBhcmVudFRleHQgPSBkYXRhLnBhcmVudFRleHQgfHwgXCJcIjtcbiAgaWYgKCQudHJpbShwYXJhbXMudGVybSkgPT09ICcnKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgaWYgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgdmFyIG1hdGNoID0gJC5leHRlbmQodHJ1ZSwge30sIGRhdGEpO1xuICAgIGZvciAodmFyIGMgPSBkYXRhLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSB7XG4gICAgICB2YXIgY2hpbGQgPSBkYXRhLmNoaWxkcmVuW2NdO1xuICAgICAgY2hpbGQucGFyZW50VGV4dCArPSBkYXRhLnBhcmVudFRleHQgKyBcIiBcIiArIGRhdGEudGV4dDtcbiAgICAgIHZhciBtYXRjaGVzID0gc2VsZWN0Mk1vZGVsTWF0Y2hlcihwYXJhbXMsIGNoaWxkKTtcbiAgICAgIGlmIChtYXRjaGVzID09IG51bGwpIHtcbiAgICAgICAgbWF0Y2guY2hpbGRyZW4uc3BsaWNlKGMsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF0Y2guY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0Mk1vZGVsTWF0Y2hlcihwYXJhbXMsIG1hdGNoKTtcbiAgfVxuICB2YXIgb3JpZ2luYWwgPSAoZGF0YS5wYXJlbnRUZXh0ICsgJyAnICsgZGF0YS50ZXh0KS50b1VwcGVyQ2FzZSgpO1xuICB2YXIgdGVybSA9IHBhcmFtcy50ZXJtLnRvVXBwZXJDYXNlKCk7XG4gIGlmIChvcmlnaW5hbC5pbmRleE9mKHRlcm0pID4gLTEpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuaWYgKCQoJy5wYXNzd29yZC1pbnB1dCcpLmxlbmd0aCA+IDApIHtcbiAgTlNBLmluaXRpYWxpc2VTaG93UGFzc3dvcmQoKTtcbn1cblxuaWYgKCQoJy5qcy1iYWNrLWxpbmsnKSkge1xuICBOU0EuYmFja0xpbmsoKTtcbn1cblxuJCgnLnVuZGVyLWNvbnN0cnVjdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIGFsZXJ0KCdUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgbm90IGF2YWlsYWJsZSB5ZXQnKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbmlmICgkKCcubm90aWZpY2F0aW9uIHNwYW4uaWNvbicpLmxlbmd0aCA+IDApIHtcbiAgJCgnLm5vdGlmaWNhdGlvbiBzcGFuLmljb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5oaWRlKCk7XG4gIH0pO1xufVxuXG5pZiAoJCgnYXJ0aWNsZS5vcmdhbmlzYXRpb24tc2VydmljZXMnKS5sZW5ndGggPiAwKSB7XG5cbiAgJCgnLmluZm9ybWF0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgaW5mbyA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgnLnNlcnZpY2UtZGVzY3JpcHRpb24nKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaW5mby50b2dnbGUoKTtcbiAgfSk7XG5cbiAgJCgnLmluZm8tbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIG1ldGEgPSAkKHRoaXMpLnBhcmVudCgpLm5leHQoKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbWV0YS50b2dnbGUoKTtcbiAgfSk7XG59XG5cbnZhciBzZWFyY2hGaWVsZHMgPSAkKCdmb3JtIC5zZWFyY2gtZmllbGQnKTtcblxuaWYgKHNlYXJjaEZpZWxkcy5sZW5ndGggPiAwKSB7XG5cbiAgdmFyIGxvYWRlciA9ICQoJzxzcGFuIC8+JykuYWRkQ2xhc3MoJ2xvYWRlciBzcGlubmVyLWlubGluZScpO1xuICB2YXIgYjEgPSAkKCc8c3BhbiAvPicpLmFkZENsYXNzKCdiYWxsIGItMScpO1xuICB2YXIgYjIgPSAkKCc8c3BhbiAvPicpLmFkZENsYXNzKCdiYWxsIGItMicpO1xuICBsb2FkZXIuYXBwZW5kKGIxKS5hcHBlbmQoYjIpO1xuXG4gIHNlYXJjaEZpZWxkcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZm9ybSA9ICQodGhpcykucGFyZW50KCk7XG4gICAgdmFyIGJ1dHRvbiA9IGZvcm0uZmluZCgnYnV0dG9uJyk7XG4gICAgZm9ybS5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgYnV0dG9uLmFmdGVyKGxvYWRlcikuaGlkZSgpO1xuICAgIH0pO1xuICB9KTtcbn1cblxudmFyIHJlZGlyZWN0ID0gJCgnI3JlZGlyZWN0LXVybCcpO1xuXG4kKCcjYWRkLXJlZGlyZWN0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICQoJzxwIGNsYXNzPVwiZ292dWstYm9keVwiPjxsYWJlbCBmb3I9XCJyZWRpcmVjdC11cmxcIj48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2wgaW5wdXRDb25maWdcIiBuYW1lPVwicmVkaXJlY3RfdXJpc1wiPjwvbGFiZWw+PC9wPicpLmFwcGVuZFRvKHJlZGlyZWN0KTtcbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbnZhciBsb2dvdXQgPSAkKCcjbG9nb3V0LXVybCcpO1xuXG4kKCcjYWRkLWxvZ291dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAkKCc8cCBjbGFzcz1cImdvdnVrLWJvZHlcIj48bGFiZWwgZm9yPVwibG9nb3V0LXVybFwiPjxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBpbnB1dENvbmZpZ1wiIG5hbWU9XCJwb3N0X2xvZ291dF9yZWRpcmVjdF91cmlzXCI+PC9sYWJlbD48L3A+JykuYXBwZW5kVG8obG9nb3V0KTtcbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cblxuJCgnI2dlbmVyYXRlLWNsaWVudC1zZWNyZXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgdmFyIHNlY3JldEFycmF5ID0gd2luZG93Lm5pY2V3YXJlLmdlbmVyYXRlUGFzc3BocmFzZSg4KTtcbiAgdmFyIHNlY3JldCA9IHNlY3JldEFycmF5LmpvaW4oJy0nKTtcbiAgdmFyIGlzQ29uZmlybSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZWdlbmVyYXRlIHRoZSBjbGllbnQgc2VjcmV0PycpO1xuICBpZiAoaXNDb25maXJtKSB7XG4gICAgJCgnaW5wdXQjY2xpZW50U2VjcmV0JykuYXR0cigndmFsdWUnLCBzZWNyZXQpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG4kKCcjZ2VuZXJhdGUtYXBpLXNlY3JldCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICB2YXIgc2VjcmV0QXJyYXkgPSB3aW5kb3cubmljZXdhcmUuZ2VuZXJhdGVQYXNzcGhyYXNlKDgpO1xuICB2YXIgc2VjcmV0ID0gc2VjcmV0QXJyYXkuam9pbignLScpO1xuICB2YXIgaXNDb25maXJtID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlZ2VuZXJhdGUgdGhlIGFwaSBzZWNyZXQ/Jyk7XG4gIGlmIChpc0NvbmZpcm0pIHtcbiAgICAkKCdpbnB1dCNhcGlTZWNyZXQnKS5hdHRyKCd2YWx1ZScsIHNlY3JldCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbnZhciBmb3JtUmVnaXN0ZXIgPSAkKCcucHJldmVudC1mb3JtLWRvdWJsZS1zdWJtaXNzaW9uJyk7XG5cbmlmIChmb3JtUmVnaXN0ZXIubGVuZ3RoID4gMCkge1xuICBmb3JtUmVnaXN0ZXIuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRzdWJtaXRCdXR0b25zID0gJChmb3JtUmVnaXN0ZXIpLmZpbmQoJ2J1dHRvbjpzdWJtaXQnKSwgJHN1Ym1pdEJ1dHRvbiA9ICRzdWJtaXRCdXR0b25zLmVxKDApO1xuICAgIGZvcm1SZWdpc3Rlci5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgJHN1Ym1pdEJ1dHRvbnMuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuICAgICAgJHN1Ym1pdEJ1dHRvbi5jc3MoJ21pbi13aWR0aCcsICRzdWJtaXRCdXR0b24ub3V0ZXJXaWR0aCgpICsgJ3B4Jyk7XG5cbiAgICAgICRzdWJtaXRCdXR0b24uYXBwZW5kKFwiPHNwYW4gY2xhc3M9J2xvYWRlciBzcGlubmVyLWlubGluZSc+IDxzcGFuIGNsYXNzPSdiYWxsIGItMSc+PC9zcGFuPiA8c3BhbiBjbGFzcz0nYmFsbCBiLTInPjwvc3Bhbj4gPHNwYW4gY2xhc3M9J2JhbGwgYi0zJz48L3NwYW4+IDwvc3Bhbj5cIik7XG5cbiAgICB9KTtcbiAgfSk7XG59XG5cbnZhciBzaG93SGlkZUNvbnRlbnQgPSBuZXcgR09WVUsuU2hvd0hpZGVDb250ZW50KClcbnNob3dIaWRlQ29udGVudC5pbml0KClcblxuR09WVUsuZGV0YWlscy5pbml0KClcblxuIl19
