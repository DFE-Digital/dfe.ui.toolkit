var COOKIE_NAMES={PREFERENCES_SET:"cookies_preferences_set",POLICY:"cookies_policy"},DEFAULT_POLICY={essential:!0,settings:!1,usage:!0},GOVUK_COOKIE_OPTIONS={expires:365,secure:!0,domain:".education.gov.uk"},GovUKCookie={getRaw:function(e){if(window.Cookies)return window.Cookies.get(e)},get:function(e){if(window.Cookies){var t=window.Cookies.get(e);return t?JSON.parse(t):t}},set:function(e,t){if(window.Cookies)return window.Cookies.set(e,t,GOVUK_COOKIE_OPTIONS)},remove:function(e){if(window.Cookies)return window.Cookies.remove(e,GOVUK_COOKIE_OPTIONS)}};function checkConditionForUsersBanner(){var e=GovUKCookie.getRaw("cookies_preferences_set"),t=GovUKCookie.get("cookies_policy");if(e&&t&&t.settings){var n=GovUKCookie.getRaw("user_banner_last_seen");if(!n)return!0;if(90<((new Date).getTime()-n)/864e5)return!0}return!1}function showReviewUsersBanner(){$("#review-users-banner").show()}function setReviewUsersBannerLastSeen(){GovUKCookie.set("user_banner_last_seen",(new Date).getTime())}function loadReviewUsersBanner(){checkConditionForUsersBanner()&&showReviewUsersBanner()}function updateCookieReviewUsersBanner(){checkConditionForUsersBanner()&&setReviewUsersBannerLastSeen()}!function(a){var i=a.$;if(a.Cookies&&i){a.gtag&&a.gaTrackingId?(a.gtag("js",new Date),a.gtag("config",a.gaTrackingId,{cookie_flags:"secure"})):console.error("Google Analytics (GA) has not initialised. GA will not track this session.",a.gtag,a.gaTrackingId);function o(e,t){var n,a=t||(n=i.extend(DEFAULT_POLICY,{}),i.each(n,function(e){n[e]=!0}),n);GovUKCookie.set(COOKIE_NAMES.POLICY,a),GovUKCookie.set(COOKIE_NAMES.PREFERENCES_SET,!0),e.target===s[0]&&r.slideUp()}var r=i("#dsi-cookie-banner.global-cookie-message-dfe-sign-in"),s=r.find("button.cookie-accept");GovUKCookie.get(COOKIE_NAMES.PREFERENCES_SET)||(GovUKCookie.set(COOKIE_NAMES.POLICY,DEFAULT_POLICY),s.click(o),"/cookies"!==a.location.pathname?r.slideDown():r.show());var l=i("#dsi-cookie-form.cookies-page-dfe-sign-in__preferences-form");l.length&&l.on("submit",function(e){e.preventDefault();var t={settings:!!l.find("input[name='cookie.settings']:checked").val()},n=i.extend(DEFAULT_POLICY,t);return o(e,n),document.referrer?a.location=document.referrer:a.location.pathname="/",!1})}}(window),function(e){"use strict";var s=e.GOVUK||{};s.details={NATIVE_DETAILS:"boolean"==typeof document.createElement("details").open,KEY_ENTER:13,KEY_SPACE:32,started:!1,addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,function(e){n(e,e.target)},!1):e.attachEvent&&e.attachEvent("on"+t,function(e){n(e,e.srcElement)})},removeEvent:function(e,t){e.removeEventListener?e.removeEventListener(t,function(e){},!1):e.detachEvent&&e.detachEvent("on"+t,function(e){})},charCode:function(e){return"number"==typeof e.which?e.which:e.keyCode},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},addClickEvent:function(e,n){s.details.addEvent(e,"keypress",function(e,t){s.details.charCode(e)!==s.details.KEY_ENTER&&s.details.charCode(e)!==s.details.KEY_SPACE||"summary"===t.nodeName.toLowerCase()&&(s.details.preventDefault(e),t.click?t.click():n(e,t))}),s.details.addEvent(e,"keyup",function(e,t){s.details.charCode(e)===s.details.KEY_SPACE&&"SUMMARY"===t.nodeName&&s.details.preventDefault(e)}),s.details.addEvent(e,"click",function(e,t){n(e,t)})},getAncestor:function(e,t){do{if(!e||e.nodeName.toLowerCase()===t)break;e=e.parentNode}while(e);return e},addDetailsPolyfill:function(e,t){if(t=t||document.body,!s.details.started&&(s.details.started=!0,0!==(e=t.getElementsByTagName("details")).length)){for(var n=e.length,a=0;a<n;a++){var i=e[a];if(i.__summary=i.getElementsByTagName("summary").item(0),i.__content=i.getElementsByTagName("div").item(0),!i.__summary||!i.__content)return;i.__content.id||(i.__content.id="details-content-"+a),i.setAttribute("role","group"),i.__summary.setAttribute("role","button"),i.__summary.setAttribute("aria-controls",i.__content.id),s.details.NATIVE_DETAILS||(i.__summary.tabIndex=0);var o=null!==i.getAttribute("open");if(!0==o?(i.__summary.setAttribute("aria-expanded","true"),i.__content.setAttribute("aria-hidden","false")):(i.__summary.setAttribute("aria-expanded","false"),i.__content.setAttribute("aria-hidden","true"),s.details.NATIVE_DETAILS||(i.__content.style.display="none")),i.__summary.__details=i,!s.details.NATIVE_DETAILS){var r=document.createElement("i");!0==o?(r.className="arrow arrow-open",r.appendChild(document.createTextNode("▼"))):(r.className="arrow arrow-closed",r.appendChild(document.createTextNode("►"))),i.__summary.__twisty=i.__summary.insertBefore(r,i.__summary.firstChild),i.__summary.__twisty.setAttribute("aria-hidden","true")}}s.details.addClickEvent(t,function(e,t){return!(t=s.details.getAncestor(t,"summary"))||s.details.statechange(t)})}},statechange:function(e){var t="true"===e.__details.__summary.getAttribute("aria-expanded"),n="true"===e.__details.__content.getAttribute("aria-hidden");e.__details.__summary.setAttribute("aria-expanded",t?"false":"true"),e.__details.__content.setAttribute("aria-hidden",n?"false":"true"),s.details.NATIVE_DETAILS||(e.__details.__content.style.display=t?"none":"",null!==e.__details.getAttribute("open")?e.__details.removeAttribute("open"):e.__details.setAttribute("open","open"));return e.__twisty&&(e.__twisty.firstChild.nodeValue=t?"►":"▼",e.__twisty.setAttribute("class",t?"arrow arrow-closed":"arrow arrow-open")),!0},destroy:function(e){s.details.removeEvent(e,"click")},init:function(e){s.details.addEvent(document,"DOMContentLoaded",s.details.addDetailsPolyfill),s.details.addEvent(window,"load",s.details.addDetailsPolyfill)}},e.GOVUK=s}(window);var NSA=NSA||{},filterBoxes=$(".filter-box");NSA.filters={init:function(){filterBoxes.each(function(){var e=$(this),t=e.find(".container-head"),n=t.find(".option-select-label"),a=e.find("input:checkbox"),i=$("<button />").addClass("js-container-head"),o=$("<div />").addClass("js-selected-counter");i.on("click",function(e){var t=$(this).next();$(this).hasClass("closed")?(t.show(),$(this).removeClass("closed").attr("aria-expanded",!0)):(t.hide(),$(this).addClass("closed").attr("aria-expanded",!1)),e.preventDefault()}).append(n,o),t.replaceWith(i),a.on("change",function(){o.text(function(){return 0<a.filter(":checked").length?a.filter(":checked").length+" selected":""})})})}},0<filterBoxes.length&&NSA.filters.init();var gaEvent=$("#ga-event");if(0<gaEvent.length){var category=gaEvent.data("category"),label=gaEvent.data("label"),event=gaEvent.data("event");""!==event&&""!==label&&""!==category&&gtag("event",event,{event_category:category,event_label:label})}function getParameterByName(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function sortTable(e){var t,n,a,i,o,r,s,l,d=0;for(t=$("table.sortable"),a=!0,l="a";a;){for(a=!1,n=t.find("tr"),i=1;i<n.length-1;i++)if(s=!1,o=n[i].getElementsByTagName("TD")[e],r=n[i+1].getElementsByTagName("TD")[e],"a"===l){if(o.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){s=!0;break}}else if("d"===l&&o.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){s=!0;break}s?(n[i].parentNode.insertBefore(n[i+1],n[i]),a=!0,d++):0===d&&"a"===l&&(l="d",a=!0)}return l}$(".notification a").on("click",function(){$(this).data("clientid")&&gtag("event","download",{event_category:"migration-help-pdf",event_label:$(this).data("clientid")})}),(NSA=NSA||{}).modal={elems:{links:$(".modal-link"),modals:$(".modal")},init:function(){this.modalBg(),this.setUpEvents()},modalBg:function(){var e=this,t=$("<div>").addClass("modal-bg").hide().on("click",function(){e.hideModals()});$("body").append(t)},setUpEvents:function(){var n=this;this.elems.links.on("click",function(e){var t=$(this).attr("href");n.showModal($(t)),e.preventDefault()}),n.elems.modals.find(".close").on("click",function(e){n.hideModals(),e.preventDefault()}),$("body").on("keydown",function(e){27===(e.keyCode||e.which)&&n.hideModals()})},showModal:function(e){$("html").addClass("modal-open"),$(".modal-bg").show(),e.show()},hideModals:function(){$("html").removeClass("modal-open"),$(".modal-bg").hide(),this.elems.modals.hide()}},NSA.modal.init(),function(e){"use strict";var h=e.jQuery,t=e.GOVUK||{};function n(){var r="ShowHideContent",i='[data-target] > input[type="radio"]',t='[data-target] > input[type="checkbox"]',n="a.js-toggle-content";function s(){var e=h(this),t=l(e);t.length&&(e.attr("aria-controls",t.attr("id")),e.attr("aria-expanded","false"),t.attr("aria-hidden","true"))}function l(e){var t=e.attr("aria-controls");return t=t||e.closest("[data-target]").data("target"),h("#"+t)}function o(e,t){t.hasClass("js-hidden")&&(t.removeClass("js-hidden"),t.attr("aria-hidden","false"),e.attr("aria-controls")&&e.attr("aria-expanded","true"))}function d(e,t){(t=t||l(e)).hasClass("js-hidden")||(t.addClass("js-hidden"),t.attr("aria-hidden","true"),e.attr("aria-controls")&&e.attr("aria-expanded","false"))}function a(e,t){var n=i+"[name="+e.attr("name").replace("[","\\[").replace("]","\\]")+"][aria-controls]",a=e.closest("form");(a.length?a.find(n):h(n)).each(function(){d(h(this))}),e.is("[aria-controls]")&&o(e,t)}function c(e,t){e.is(":checked")?o(e,t):d(e,t)}function u(e,t,n){t.hasClass("js-hidden")?o(e,t):d(e,t),n.preventDefault()}function f(n,e,t,a){function i(e){var t=h(this);a(t,l(t),e)}n=n||h(document.body);var o=h(e);o.each(s),h.each(t,function(e,t){n.on("click."+r,t,i)}),o.is(":checked")&&o.filter(":checked").each(i)}this.showHideRadioToggledContent=function(e){var t;f(e,i,(t=[],h(i).map(function(){var e=h(this).attr("name");return-1===h.inArray(e,t)?(t.push(e),'input[type="radio"][name="'+h(this).attr("name")+'"]'):null})),a)},this.showHideCheckboxToggledContent=function(e){f(e,t,[t],c)},this.showHideLinkToggledContent=function(e){f(e,n,[n],u)},this.destroy=function(e){(e=e||h(document.body)).off("."+r)}}n.prototype.init=function(e){this.showHideRadioToggledContent(e),this.showHideCheckboxToggledContent(e),this.showHideLinkToggledContent(e)},t.ShowHideContent=n,e.GOVUK=t}(window),(NSA=NSA||{}).signin={form:$(".form-signin"),init:function(){this.setupEvents()},setupEvents:function(){this.form.on("submit",this,this.handleSubmit)},handleSubmit:function(e){var t=$(this),n=t.find("input").not(":checkbox"),a={},i=$(this).find("button:submit"),o=i.eq(0);i.attr("disabled","disabled"),o.css("min-width",o.outerWidth()+"px"),o.find(".loader").removeClass("vh"),n.each(function(){a[this.name]=$(this).val()}),$("#password").prop("type","password").next().removeClass("type-password"),$.ajax({type:"POST",data:a,url:t.attr("action"),context:e.data,dataType:"json",success:function(e){e.redirect?window.location.href=e.uri:e.isFailedLogin?(this.resetValidation(t),this.showValidationMessage(e.validationMessages),this.showInlineValidation(e.validationMessages),i.removeAttr("disabled"),o.find(".loader").addClass("vh")):(gtag("event","Successful login",{event_category:"Login",event_label:getParameterByName("clientid")}),this.buildFormAndSubmit(e))},error:function(){this.resetValidation(t),this.showValidationMessage(),i.removeAttr("disabled"),o.find(".loader").addClass("vh")}}),e.preventDefault()},resetValidation:function(e){var t=e.find(".govukform-group");$(".govuk-error-summary").remove(),t.each(function(){var e=$(this).find("input").eq(0);$(this).hasClass("govuk-form-group--error")&&($(this).removeClass("govuk-form-group--error"),$(this).find("span.govuk-error-message").remove(),e.removeAttr("aria-describedby").removeAttr("aria-invalid"))})},showValidationMessage:function(e){var t=$("<div />").attr("class","govuk-error-summary govuk-!-margin-top-6").attr("role","alert").attr("tabindex","-1").attr("aria-labelledby","error-summary-title"),n=$("<h2 />").attr("class","govuk-error-summary__title").attr("id","error-summary"),a=$("<div />").attr("class","govuk-error-summary__body"),i=$("<ul />").attr("class","govuk-list govuk-error-summary__list");if(e)n.text("Information missing or incorrect"),$.each(e,function(e,t){"loginError"===e&&(e="username",gtag("event","Failed login",{event_category:"Login",event_label:"Users login credentials were wrong"}));var n=$("<a />").attr("class","govuk-link").attr("href","#"+e).text(t),a=$("<li />").append(n);i.append(a)});else{n.text("There has been an error");var o=$("<li />").html('Please try again later. If the problem continues, follow the link to <a href="https://help.signin.education.gov.uk/contact/form">submit a support request</a>');i.append(o),gtag("event","Error occurred",{event_category:"Login",event_label:"A server error occurred during login"})}t.append(n).append(a.append(i)),$("main").prepend(t),$("html, body").animate({scrollTop:t.offset().top-15},300)},showInlineValidation:function(e){$.each(e,function(e,t){var n=$("input[name="+e+"]"),a=n.parent();a.hasClass("show-password")&&(a=a.parent());var i=a.find("label").first();if(!a.hasClass("govuk-form-group--error"))var o=$('<span class="govuk-body">').html(t).prop("class","govuk-error-message").prop("id","validation-"+e);i.after(o),a.addClass("govuk-form-group--error"),n.attr({"aria-describedby":"validation-"+e,"aria-invalid":"true"})})},buildFormAndSubmit:function(e){var a=$("<form />").attr({method:"post",action:e.destination,id:"dfesigninform"});$.each(e.postbackData,function(e,t){var n=$("<input />").attr({type:"hidden",name:e,value:t});a.append(n)}),$("#dfesigninform").remove(),$("body").append(a),a.submit()}},0<$(".form-signin").length&&NSA.signin.init(),$(function(){$("table.sortable thead th").on("click",function(){var e=$("table.sortable thead tr th");e.removeClass("sorted").removeClass("dir-a").removeClass("dir-d");var t=sortTable(e.index($(this)));$(this).addClass("sorted dir-"+t)})});var toggleTips=$(".toggle-help");toggleTips.each(function(){var n,t,e,a;n=$(this),e=$("<span />").attr("class","toggletip"),a=$("<button />").attr("type","button").attr("aria-label","Help").attr("data-toggletip-content",n.html()).text("?").on("click",function(){var e=$(this).data("toggletip-content"),t=$(this).next();window.setTimeout(function(){t.html(function(){return $("<span />").attr("class",function(){return 50<n.html().length?"bubble long":"bubble"}).text(e)})},100)}).on("keydown",function(e){27===(e.keyCode||e.which)&&t.html("")}),t=$("<span />").attr("role","status"),e.append(a,t),n.before(e).remove(),$(document).on("click",function(e){n[0]!==$(e.target)&&t.html("")})});var forms=$("#content form");forms.attr("novalidate","novalidate");NSA=NSA||{};function select2ModelMatcher(e,t){if(t.parentText=t.parentText||"",""===$.trim(e.term))return t;if(t.children&&0<t.children.length){for(var n=$.extend(!0,{},t),a=t.children.length-1;0<=a;a--){var i=t.children[a];i.parentText+=t.parentText+" "+t.text,null==select2ModelMatcher(e,i)&&n.children.splice(a,1)}return 0<n.children.length?n:select2ModelMatcher(e,n)}var o=(t.parentText+" "+t.text).toUpperCase(),r=e.term.toUpperCase();return-1<o.indexOf(r)?t:null}NSA={showPassword:function(){$(".show-password").each(function(e){var t=$(this).find("input:password"),n=$("<label />").prop({for:"show-password-"+e}).html("Show"),a=$("<input />").prop({type:"checkbox",id:"show-password-"+e}).on("change",function(){var e=$(this);t.prop("type",function(){return e.prop("checked")?"text":"password"}),n.html(function(){return e.prop("checked")?"Hide":"Show"}),e.parent().removeClass("type-password"),e.prop("checked")&&e.parent().addClass("type-password")}),i=$("<div />").prop("class","show-password-control").append(a,n);t.after(i)})},backLink:function(){var e=$('<a class="govuk-back-link">').attr({href:"#",class:"link-back"}).text("Back").on("click",function(e){window.history.back(),e.preventDefault()});$(".js-back-link").html(e)}},0<$("select.select2").length&&$("select.select2").select2({matcher:select2ModelMatcher}),0<$(".show-password").length&&NSA.showPassword(),$(".js-back-link")&&NSA.backLink(),$(".under-construction").on("click",function(e){alert("This functionality is not available yet"),e.preventDefault()}),0<$(".notification span.icon").length&&$(".notification span.icon").on("click",function(){$(this).parent().hide()}),0<$("article.organisation-services").length&&($(".information").on("click",function(e){var t=$(this).parent().parent().find(".service-description");e.preventDefault(),t.toggle()}),$(".info-link").on("click",function(e){var t=$(this).parent().next();e.preventDefault(),t.toggle()}));var searchFields=$("form .search-field");if(0<searchFields.length){var loader=$("<span />").addClass("loader spinner-inline"),b1=$("<span />").addClass("ball b-1"),b2=$("<span />").addClass("ball b-2");loader.append(b1).append(b2),searchFields.each(function(){var e=$(this).parent(),t=e.find("button");e.on("submit",function(){t.after(loader).hide()})})}var redirect=$("#redirect-url");$("#add-redirect").on("click",function(){return $('<p class="govuk-body"><label for="redirect-url"><input class="form-control inputConfig" name="redirect_uris"></label></p>').appendTo(redirect),!1});var logout=$("#logout-url");$("#add-logout").on("click",function(){return $('<p class="govuk-body"><label for="logout-url"><input class="form-control inputConfig" name="post_logout_redirect_uris"></label></p>').appendTo(logout),!1}),$("#generate-client-secret").on("click",function(){var e=window.niceware.generatePassphrase(8).join("-");return confirm("Are you sure you want to regenerate the client secret?")&&$("input#clientSecret").attr("value",e),!1}),$("#generate-api-secret").on("click",function(){var e=window.niceware.generatePassphrase(8).join("-");return confirm("Are you sure you want to regenerate the api secret?")&&$("input#apiSecret").attr("value",e),!1});var formRegister=$(".prevent-form-double-submission");0<formRegister.length&&formRegister.each(function(){var e=$(formRegister).find("button:submit"),t=e.eq(0);formRegister.on("submit",function(){e.attr("disabled","disabled"),t.css("min-width",t.outerWidth()+"px"),t.append("<span class='loader spinner-inline'> <span class='ball b-1'></span> <span class='ball b-2'></span> <span class='ball b-3'></span> </span>")})});var showHideContent=new GOVUK.ShowHideContent;showHideContent.init(),GOVUK.details.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb29raWVzLmpzIiwiX2RldGFpbHMucG9seWZpbGwuanMiLCJfZmlsdGVyLWJveGVzLmpzIiwiX2dhLWV2ZW50cy5qcyIsIl9zaWduaW4uanMiLCJfdGFibGVzb3J0LmpzIiwiX21vZGFsLmpzIiwiX3Nob3ctaGlkZS1jb250ZW50LmpzIiwiX3Rvb2x0aXAuanMiLCJfdmFsaWRhdGlvbi5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJDT09LSUVfTkFNRVMiLCJQUkVGRVJFTkNFU19TRVQiLCJQT0xJQ1kiLCJERUZBVUxUX1BPTElDWSIsImVzc2VudGlhbCIsInNldHRpbmdzIiwidXNhZ2UiLCJHT1ZVS19DT09LSUVfT1BUSU9OUyIsImV4cGlyZXMiLCJzZWN1cmUiLCJkb21haW4iLCJHb3ZVS0Nvb2tpZSIsImdldFJhdyIsIm5hbWUiLCJ3aW5kb3ciLCJDb29raWVzIiwiZ2V0IiwidmFsdWUiLCJKU09OIiwicGFyc2UiLCJzZXQiLCJyZW1vdmUiLCJjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyIiwiY29va2llUHJlZmVyZW5jZXNTZXQiLCJjb29raWVQb2xpY3kiLCJsYXN0U2VlbiIsIkRhdGUiLCJnZXRUaW1lIiwic2hvd1Jldmlld1VzZXJzQmFubmVyIiwiJCIsInNob3ciLCJzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuIiwibG9hZFJldmlld1VzZXJzQmFubmVyIiwidXBkYXRlQ29va2llUmV2aWV3VXNlcnNCYW5uZXIiLCJndGFnIiwiZ2FUcmFja2luZ0lkIiwiY29va2llX2ZsYWdzIiwiY29uc29sZSIsImVycm9yIiwib25Db29raWVBY2NlcHQiLCJldmVudCIsIm5ld1BvbGljeSIsImFjY2VwdGVkUG9saWN5IiwiZXh0ZW5kIiwiZWFjaCIsImtleSIsInRhcmdldCIsIiRjb29raWVBY2NlcHRCdXR0b24iLCIkY29va2llQmFubmVyIiwic2xpZGVVcCIsImZpbmQiLCJjbGljayIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzbGlkZURvd24iLCIkcHJlZmVyZW5jZXNGb3JtIiwibGVuZ3RoIiwib24iLCJwcmV2ZW50RGVmYXVsdCIsInZhbCIsImRvY3VtZW50IiwicmVmZXJyZXIiLCJnbG9iYWwiLCJHT1ZVSyIsImRldGFpbHMiLCJOQVRJVkVfREVUQUlMUyIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuIiwiS0VZX0VOVEVSIiwiS0VZX1NQQUNFIiwic3RhcnRlZCIsImFkZEV2ZW50Iiwibm9kZSIsInR5cGUiLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiYXR0YWNoRXZlbnQiLCJzcmNFbGVtZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJjaGFyQ29kZSIsIndoaWNoIiwia2V5Q29kZSIsInJldHVyblZhbHVlIiwiYWRkQ2xpY2tFdmVudCIsIm5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJnZXRBbmNlc3RvciIsIm1hdGNoIiwicGFyZW50Tm9kZSIsImFkZERldGFpbHNQb2x5ZmlsbCIsImxpc3QiLCJjb250YWluZXIiLCJib2R5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJuIiwiaSIsIl9fc3VtbWFyeSIsIml0ZW0iLCJfX2NvbnRlbnQiLCJpZCIsInNldEF0dHJpYnV0ZSIsInRhYkluZGV4Iiwib3BlbkF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImRpc3BsYXkiLCJfX2RldGFpbHMiLCJ0d2lzdHkiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX190d2lzdHkiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwic3VtbWFyeSIsInN0YXRlY2hhbmdlIiwiZXhwYW5kZWQiLCJoaWRkZW4iLCJyZW1vdmVBdHRyaWJ1dGUiLCJub2RlVmFsdWUiLCJkZXN0cm95IiwiaW5pdCIsIiRjb250YWluZXIiLCJOU0EiLCJmaWx0ZXJCb3hlcyIsImZpbHRlcnMiLCIkdGhhdCIsInRoaXMiLCJoZWFkZXIiLCJ0aXRsZSIsImNoZWNrYm94ZXMiLCJidXR0b24iLCJhZGRDbGFzcyIsImNoZWNrQ291bnQiLCJvcHRpb25zIiwibmV4dCIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhdHRyIiwiaGlkZSIsImFwcGVuZCIsInJlcGxhY2VXaXRoIiwidGV4dCIsImZpbHRlciIsImdhRXZlbnQiLCJjYXRlZ29yeSIsImRhdGEiLCJsYWJlbCIsImV2ZW50X2NhdGVnb3J5IiwiZXZlbnRfbGFiZWwiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJ1cmwiLCJocmVmIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic29ydFRhYmxlIiwidGFibGUiLCJyb3dzIiwic3dpdGNoaW5nIiwieCIsInkiLCJzaG91bGRTd2l0Y2giLCJkaXJlY3Rpb24iLCJzd2l0Y2hjb3VudCIsImlubmVySFRNTCIsIm1vZGFsIiwiZWxlbXMiLCJsaW5rcyIsIm1vZGFscyIsIm1vZGFsQmciLCJzZXRVcEV2ZW50cyIsInRoYXQiLCJiZyIsImhpZGVNb2RhbHMiLCJzaG93TW9kYWwiLCJqUXVlcnkiLCJTaG93SGlkZUNvbnRlbnQiLCJzZWxlY3RvcnMiLCJpbml0VG9nZ2xlZENvbnRlbnQiLCIkY29udHJvbCIsIiRjb250ZW50IiwiZ2V0VG9nZ2xlZENvbnRlbnQiLCJjbG9zZXN0Iiwic2hvd1RvZ2dsZWRDb250ZW50IiwiaGlkZVRvZ2dsZWRDb250ZW50IiwiaGFuZGxlUmFkaW9Db250ZW50Iiwic2VsZWN0b3IiLCIkZm9ybSIsImlzIiwiaGFuZGxlQ2hlY2tib3hDb250ZW50IiwiaGFuZGxlTGlua0NvbnRlbnQiLCIkZXZlbnQiLCJlbGVtZW50U2VsZWN0b3IiLCJldmVudFNlbGVjdG9ycyIsImhhbmRsZXIiLCJkZWZlcnJlZCIsIiRjb250cm9scyIsImlkeCIsImV2ZW50U2VsZWN0b3IiLCJzaG93SGlkZVJhZGlvVG9nZ2xlZENvbnRlbnQiLCJyYWRpb0dyb3VwcyIsIm1hcCIsImdyb3VwTmFtZSIsImluQXJyYXkiLCJwdXNoIiwic2hvd0hpZGVDaGVja2JveFRvZ2dsZWRDb250ZW50Iiwic2hvd0hpZGVMaW5rVG9nZ2xlZENvbnRlbnQiLCJvZmYiLCJwcm90b3R5cGUiLCJzaWduaW4iLCJmb3JtIiwic2V0dXBFdmVudHMiLCJoYW5kbGVTdWJtaXQiLCIkaW5wdXRzIiwibm90IiwicG9zdERhdGEiLCIkc3VibWl0QnV0dG9ucyIsIiRzdWJtaXRCdXR0b24iLCJlcSIsImNzcyIsIm91dGVyV2lkdGgiLCJwcm9wIiwiYWpheCIsImNvbnRleHQiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZWRpcmVjdCIsInVyaSIsImlzRmFpbGVkTG9naW4iLCJyZXNldFZhbGlkYXRpb24iLCJzaG93VmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZXMiLCJzaG93SW5saW5lVmFsaWRhdGlvbiIsInJlbW92ZUF0dHIiLCJidWlsZEZvcm1BbmRTdWJtaXQiLCIkZm9ybUdyb3VwcyIsIiRmaWVsZCIsIm1lc3NhZ2VzIiwiJGRpdiIsIiRoMiIsIiR1bENvbnRhaW5lciIsIiR1bCIsImluZGV4IiwiJGEiLCIkbGkiLCJodG1sIiwicHJlcGVuZCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCIkcGFyZW50IiwicGFyZW50IiwiJGxhYmVsIiwiZmlyc3QiLCJlcnJvck1lc3NhZ2UiLCJhZnRlciIsImFyaWEtZGVzY3JpYmVkYnkiLCJhcmlhLWludmFsaWQiLCJtZXRob2QiLCJhY3Rpb24iLCJkZXN0aW5hdGlvbiIsInBvc3RiYWNrRGF0YSIsInN1Ym1pdCIsImhlYWRpbmdDZWxscyIsInRvZ2dsZVRpcHMiLCJsaXZlUmVnaW9uIiwidG9nZ2xlVGlwIiwibWVzc2FnZSIsInNldFRpbWVvdXQiLCJiZWZvcmUiLCJmb3JtcyIsInNlbGVjdDJNb2RlbE1hdGNoZXIiLCJwYXJhbXMiLCJwYXJlbnRUZXh0IiwidHJpbSIsInRlcm0iLCJjaGlsZHJlbiIsImMiLCJjaGlsZCIsInNwbGljZSIsIm9yaWdpbmFsIiwidG9VcHBlckNhc2UiLCJpbmRleE9mIiwic2hvd1Bhc3N3b3JkIiwiJHB3ZEZsZCIsIiRjaGVja0xibCIsImZvciIsIiRjaGVja0JveCIsIiRjYldyYXAiLCJiYWNrTGluayIsImNsYXNzIiwiaGlzdG9yeSIsImJhY2siLCJzZWxlY3QyIiwibWF0Y2hlciIsImFsZXJ0IiwiaW5mbyIsInRvZ2dsZSIsIm1ldGEiLCJzZWFyY2hGaWVsZHMiLCJsb2FkZXIiLCJiMSIsImIyIiwiYXBwZW5kVG8iLCJsb2dvdXQiLCJzZWNyZXQiLCJuaWNld2FyZSIsImdlbmVyYXRlUGFzc3BocmFzZSIsImpvaW4iLCJjb25maXJtIiwiZm9ybVJlZ2lzdGVyIiwic2hvd0hpZGVDb250ZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxhQUFBLENBQ0FDLGdCQUFBLDBCQUNBQyxPQUFBLGtCQUdBQyxlQUFBLENBQ0FDLFdBQUEsRUFDQUMsVUFBQSxFQUNBQyxPQUFBLEdBR0FDLHFCQUFBLENBQ0FDLFFBQUEsSUFDQUMsUUFBQSxFQUNBQyxPQUFBLHFCQUdBQyxZQUFBLENBQ0FDLE9BQUEsU0FBQUMsR0FDQSxHQUFBQyxPQUFBQyxRQUlBLE9BQUFELE9BQUFDLFFBQUFDLElBQUFILElBRUFHLElBQUEsU0FBQUgsR0FDQSxHQUFBQyxPQUFBQyxRQUFBLENBSUEsSUFBQUUsRUFBQUgsT0FBQUMsUUFBQUMsSUFBQUgsR0FDQSxPQUFBSSxFQUNBQyxLQUFBQyxNQUFBRixHQUVBQSxJQUVBRyxJQUFBLFNBQUFQLEVBQUFJLEdBQ0EsR0FBQUgsT0FBQUMsUUFJQSxPQUFBRCxPQUFBQyxRQUFBSyxJQUNBUCxFQUNBSSxFQUNBVix1QkFHQWMsT0FBQSxTQUFBUixHQUNBLEdBQUFDLE9BQUFDLFFBSUEsT0FBQUQsT0FBQUMsUUFBQU0sT0FDQVIsRUFDQU4sd0JBd0ZBLFNBQUFlLCtCQUVBLElBQUFDLEVBQUFaLFlBQUFDLE9BQUEsMkJBQ0FZLEVBQUFiLFlBQUFLLElBQUEsa0JBRUEsR0FBQU8sR0FBQUMsR0FBQUEsRUFBQW5CLFNBQUEsQ0FDQSxJ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QUFBNkMsUUFBQXJLLFdBS0EsSUFBQTBGLFNBQUEzTSxFQUFBLGlCQUVBQSxFQUFBLGlCQUFBNEIsR0FBQSxRQUFBLFdBRUEsT0FEQTVCLEVBQUEsNkhBQUF5UixTQUFBOUUsV0FDQSxJQUdBLElBQUErRSxPQUFBMVIsRUFBQSxlQUVBQSxFQUFBLGVBQUE0QixHQUFBLFFBQUEsV0FFQSxPQURBNUIsRUFBQSx1SUFBQXlSLFNBQUFDLFNBQ0EsSUFJQTFSLEVBQUEsMkJBQUE0QixHQUFBLFFBQUEsV0FDQSxJQUNBK1AsRUFEQTFTLE9BQUEyUyxTQUFBQyxtQkFBQSxHQUNBQyxLQUFBLEtBS0EsT0FKQUMsUUFBQSwyREFFQS9SLEVBQUEsc0JBQUFnSCxLQUFBLFFBQUEySyxJQUVBLElBR0EzUixFQUFBLHdCQUFBNEIsR0FBQSxRQUFBLFdBQ0EsSUFDQStQLEVBREExUyxPQUFBMlMsU0FBQUMsbUJBQUEsR0FDQUMsS0FBQSxLQUtBLE9BSkFDLFFBQUEsd0RBRUEvUixFQUFBLG1CQUFBZ0gsS0FBQSxRQUFBMkssSUFFQSxJQUdBLElBQUFLLGFBQUFoUyxFQUFBLG1DQUVBLEVBQUFnUyxhQUFBclEsUUFDQXFRLGFBQUFqUixLQUFBLFdBQ0EsSUFBQWtMLEVBQUFqTSxFQUFBZ1MsY0FBQTNRLEtBQUEsaUJBQUE2SyxFQUFBRCxFQUFBRSxHQUFBLEdBQ0E2RixhQUFBcFEsR0FBQSxTQUFBLFdBQ0FxSyxFQUFBakYsS0FBQSxXQUFBLFlBRUFrRixFQUFBRSxJQUFBLFlBQUFGLEVBQUFHLGFBQUEsTUFFQUgsRUFBQWhGLE9BQUEsaUpBTUEsSUFBQStLLGdCQUFBLElBQUEvUCxNQUFBdUgsZ0JBQ0F3SSxnQkFBQWxNLE9BRUE3RCxNQUFBQyxRQUFBNEQiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBDT09LSUVfTkFNRVMgPSB7XG4gIFBSRUZFUkVOQ0VTX1NFVDogJ2Nvb2tpZXNfcHJlZmVyZW5jZXNfc2V0JyxcbiAgUE9MSUNZOiAnY29va2llc19wb2xpY3knXG59O1xuXG52YXIgREVGQVVMVF9QT0xJQ1kgPSB7XG4gIGVzc2VudGlhbDogdHJ1ZSxcbiAgc2V0dGluZ3M6IGZhbHNlLFxuICB1c2FnZTogdHJ1ZVxufTtcblxudmFyIEdPVlVLX0NPT0tJRV9PUFRJT05TID0ge1xuICBleHBpcmVzOiAzNjUsIC8vIGRheXNcbiAgc2VjdXJlOiB0cnVlLFxuICBkb21haW46ICcuZWR1Y2F0aW9uLmdvdi51aydcbn07XG5cbnZhciBHb3ZVS0Nvb2tpZSA9IHtcbiAgZ2V0UmF3OiBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuZ2V0KG5hbWUpO1xuICB9LFxuICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHdpbmRvdy5Db29raWVzLmdldChuYW1lKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuc2V0KFxuICAgICAgbmFtZSxcbiAgICAgIHZhbHVlLFxuICAgICAgR09WVUtfQ09PS0lFX09QVElPTlNcbiAgICApO1xuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5kb3cuQ29va2llcy5yZW1vdmUoXG4gICAgICBuYW1lLFxuICAgICAgR09WVUtfQ09PS0lFX09QVElPTlNcbiAgICApO1xuICB9XG59O1xuXG4oZnVuY3Rpb24gKHdpbmRvdykge1xuICB2YXIgJCA9IHdpbmRvdy4kO1xuICB2YXIgQ29va2llcyA9IHdpbmRvdy5Db29raWVzO1xuICBpZiAoIUNvb2tpZXMgfHwgISQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAoZnVuY3Rpb24gaW5pdEdBICgpIHtcbiAgICBpZiAoIXdpbmRvdy5ndGFnIHx8ICF3aW5kb3cuZ2FUcmFja2luZ0lkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnR29vZ2xlIEFuYWx5dGljcyAoR0EpIGhhcyBub3QgaW5pdGlhbGlzZWQuIEdBIHdpbGwgbm90IHRyYWNrIHRoaXMgc2Vzc2lvbi4nLFxuICAgICAgICB3aW5kb3cuZ3RhZyxcbiAgICAgICAgd2luZG93LmdhVHJhY2tpbmdJZCk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgd2luZG93Lmd0YWcoJ2pzJywgbmV3IERhdGUoKSk7XG4gICAgd2luZG93Lmd0YWcoJ2NvbmZpZycsIHdpbmRvdy5nYVRyYWNraW5nSWQsIHsgY29va2llX2ZsYWdzOiAnc2VjdXJlJ30pO1xuICB9KSgpO1xuXG4gIHZhciAkY29va2llQmFubmVyID0gJCgnI2RzaS1jb29raWUtYmFubmVyLmdsb2JhbC1jb29raWUtbWVzc2FnZS1kZmUtc2lnbi1pbicpO1xuICB2YXIgJGNvb2tpZUFjY2VwdEJ1dHRvbiA9ICRjb29raWVCYW5uZXIuZmluZCgnYnV0dG9uLmNvb2tpZS1hY2NlcHQnKTtcblxuICB2YXIgZ2V0QWNjZXB0ZWRBbGxQb2xpY3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjY2VwdGVkUG9saWN5ID0gJC5leHRlbmQoREVGQVVMVF9QT0xJQ1ksIHt9KTsgLy8gZGVlcCBjb3B5XG5cbiAgICAkLmVhY2goYWNjZXB0ZWRQb2xpY3ksIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGFjY2VwdGVkUG9saWN5W2tleV0gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFjY2VwdGVkUG9saWN5O1xuICB9O1xuXG4gIHZhciBvbkNvb2tpZUFjY2VwdCA9IGZ1bmN0aW9uIChldmVudCwgbmV3UG9saWN5KSB7XG4gICAgdmFyIGFjY2VwdGVkUG9saWN5ID0gbmV3UG9saWN5IHx8IGdldEFjY2VwdGVkQWxsUG9saWN5KCk7XG5cbiAgICBHb3ZVS0Nvb2tpZS5zZXQoXG4gICAgICBDT09LSUVfTkFNRVMuUE9MSUNZLFxuICAgICAgYWNjZXB0ZWRQb2xpY3lcbiAgICApO1xuICAgIEdvdlVLQ29va2llLnNldChcbiAgICAgIENPT0tJRV9OQU1FUy5QUkVGRVJFTkNFU19TRVQsXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIGlmIChldmVudC50YXJnZXQgPT09ICRjb29raWVBY2NlcHRCdXR0b25bMF0pIHtcbiAgICAgICRjb29raWVCYW5uZXIuc2xpZGVVcCgpO1xuICAgIH1cbiAgfTtcblxuICBpZiAoIUdvdlVLQ29va2llLmdldChDT09LSUVfTkFNRVMuUFJFRkVSRU5DRVNfU0VUKSkge1xuICAgIEdvdlVLQ29va2llLnNldChcbiAgICAgIENPT0tJRV9OQU1FUy5QT0xJQ1ksXG4gICAgICBERUZBVUxUX1BPTElDWVxuICAgICk7XG4gICAgJGNvb2tpZUFjY2VwdEJ1dHRvbi5jbGljayhvbkNvb2tpZUFjY2VwdCk7XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy9jb29raWVzJykge1xuICAgICAgJGNvb2tpZUJhbm5lci5zbGlkZURvd24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGNvb2tpZUJhbm5lci5zaG93KCk7XG4gICAgfVxuICB9XG5cbiAgdmFyICRwcmVmZXJlbmNlc0Zvcm0gPSAkKCcjZHNpLWNvb2tpZS1mb3JtLmNvb2tpZXMtcGFnZS1kZmUtc2lnbi1pbl9fcHJlZmVyZW5jZXMtZm9ybScpO1xuXG4gICRwcmVmZXJlbmNlc0Zvcm0ubGVuZ3RoICYmICRwcmVmZXJlbmNlc0Zvcm0ub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG5ld1BvbGljeSA9IHtcbiAgICAgIHNldHRpbmdzOiAhISRwcmVmZXJlbmNlc0Zvcm0uZmluZChcImlucHV0W25hbWU9J2Nvb2tpZS5zZXR0aW5ncyddOmNoZWNrZWRcIikudmFsKClcbiAgICB9O1xuXG4gICAgdmFyIGFjY2VwdGVkUG9saWN5ID0gJC5leHRlbmQoREVGQVVMVF9QT0xJQ1ksIG5ld1BvbGljeSk7XG4gICAgb25Db29raWVBY2NlcHQoZXZlbnQsIGFjY2VwdGVkUG9saWN5KTtcblxuICAgIGlmIChkb2N1bWVudC5yZWZlcnJlcikge1xuICAgICAgd2luZG93LmxvY2F0aW9uID0gZG9jdW1lbnQucmVmZXJyZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcblxufSkod2luZG93KTtcblxuZnVuY3Rpb24gY2hlY2tDb25kaXRpb25Gb3JVc2Vyc0Jhbm5lcigpIHtcbiAgLy8gQ2hlY2sgdXNlcidzIGNvbnNlbnQgZm9yIHRoZSBjb29raWVcbiAgdmFyIGNvb2tpZVByZWZlcmVuY2VzU2V0ID0gR292VUtDb29raWUuZ2V0UmF3KCdjb29raWVzX3ByZWZlcmVuY2VzX3NldCcpO1xuICB2YXIgY29va2llUG9saWN5ID0gR292VUtDb29raWUuZ2V0KCdjb29raWVzX3BvbGljeScpO1xuXG4gIGlmICghIWNvb2tpZVByZWZlcmVuY2VzU2V0ICYmICEhY29va2llUG9saWN5ICYmIGNvb2tpZVBvbGljeS5zZXR0aW5ncykge1xuICAgIHZhciBsYXN0U2VlbiA9IEdvdlVLQ29va2llLmdldFJhdygndXNlcl9iYW5uZXJfbGFzdF9zZWVuJyk7XG4gICAgaWYgKCEhbGFzdFNlZW4pIHtcbiAgICAgIHZhciBudW1iZXJPZkRheXMgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0U2VlbikgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgICBpZiAobnVtYmVyT2ZEYXlzID4gOTApIHtcbiAgICAgICAgLy8gaWYgdGhlIHBlcmlvZCBpcyBsb25nZXIgdGhhbiA5MCBkYXlzIHNob3cvdXBkYXRlIHRoZSBiYW5uZXJcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHZhbHVlIHRoZW4gc2hvdy91cGRhdGUgdGhlIGJhbm5lclxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2hvd1Jldmlld1VzZXJzQmFubmVyKCl7XG4gICQoJyNyZXZpZXctdXNlcnMtYmFubmVyJykuc2hvdygpO1xufVxuXG5mdW5jdGlvbiBzZXRSZXZpZXdVc2Vyc0Jhbm5lckxhc3RTZWVuKCl7XG4gIEdvdlVLQ29va2llLnNldCgndXNlcl9iYW5uZXJfbGFzdF9zZWVuJywgbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xufVxuXG5mdW5jdGlvbiBsb2FkUmV2aWV3VXNlcnNCYW5uZXIoKSB7XG4gIGlmIChjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyKCkpIHtcbiAgICBzaG93UmV2aWV3VXNlcnNCYW5uZXIoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVDb29raWVSZXZpZXdVc2Vyc0Jhbm5lcigpe1xuICBpZiAoY2hlY2tDb25kaXRpb25Gb3JVc2Vyc0Jhbm5lcigpKSB7XG4gICAgc2V0UmV2aWV3VXNlcnNCYW5uZXJMYXN0U2VlbigpO1xuICB9XG59XG4iLCIvLyA8ZGV0YWlscz4gcG9seWZpbGxcbi8vIGh0dHA6Ly9jYW5pdXNlLmNvbS8jZmVhdD1kZXRhaWxzXG5cbi8vIEZGIFN1cHBvcnQgZm9yIEhUTUw1J3MgPGRldGFpbHM+IGFuZCA8c3VtbWFyeT5cbi8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTU5MTczN1xuXG4vLyBodHRwOi8vd3d3LnNpdGVwb2ludC5jb20vZml4aW5nLXRoZS1kZXRhaWxzLWVsZW1lbnQvXG5cbjsoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAndXNlIHN0cmljdCdcblxuICB2YXIgR09WVUsgPSBnbG9iYWwuR09WVUsgfHwge31cblxuICBHT1ZVSy5kZXRhaWxzID0ge1xuICAgIE5BVElWRV9ERVRBSUxTOiB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGV0YWlscycpLm9wZW4gPT09ICdib29sZWFuJyxcbiAgICBLRVlfRU5URVI6IDEzLFxuICAgIEtFWV9TUEFDRTogMzIsXG5cbiAgICAvLyBDcmVhdGUgYSBzdGFydGVkIGZsYWcgc28gd2UgY2FuIHByZXZlbnQgdGhlIGluaXRpYWxpc2F0aW9uXG4gICAgLy8gZnVuY3Rpb24gZmlyaW5nIGZyb20gYm90aCBET01Db250ZW50TG9hZGVkIGFuZCB3aW5kb3cub25sb2FkXG4gICAgc3RhcnRlZDogZmFsc2UsXG5cbiAgICAvLyBBZGQgZXZlbnQgY29uc3RydWN0IGZvciBtb2Rlcm4gYnJvd3NlcnMgb3IgSUVcbiAgICAvLyB3aGljaCBmaXJlcyB0aGUgY2FsbGJhY2sgd2l0aCBhIHByZS1jb252ZXJ0ZWQgdGFyZ2V0IHJlZmVyZW5jZVxuICAgIGFkZEV2ZW50OiBmdW5jdGlvbiAobm9kZSwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmIChub2RlLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2FsbGJhY2soZSwgZS50YXJnZXQpXG4gICAgICAgIH0sIGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChub2RlLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgIG5vZGUuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2FsbGJhY2soZSwgZS5zcmNFbGVtZW50KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmVFdmVudDogZnVuY3Rpb24gKG5vZGUsIHR5cGUpIHtcbiAgICAgIGlmIChub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIH0sIGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChub2RlLmRldGFjaEV2ZW50KSB7XG4gICAgICAgIG5vZGUuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgY2hhcmFjdGVyIGNvZGUgLyBrZXkgcHJlc3NlZFxuICAgIGNoYXJDb2RlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuICh0eXBlb2YgZS53aGljaCA9PT0gJ251bWJlcicpID8gZS53aGljaCA6IGUua2V5Q29kZVxuICAgIH0sXG5cbiAgICAvLyBDcm9zcy1icm93c2VyIHByZXZlbnRpbmcgZGVmYXVsdCBhY3Rpb25cbiAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlXG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIEhhbmRsZSBjcm9zcy1tb2RhbCBjbGljayBldmVudHNcbiAgICBhZGRDbGlja0V2ZW50OiBmdW5jdGlvbiAobm9kZSwgY2FsbGJhY2spIHtcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkRXZlbnQobm9kZSwgJ2tleXByZXNzJywgZnVuY3Rpb24gKGUsIHRhcmdldCkge1xuICAgICAgICAvLyBXaGVuIHRoZSBrZXkgZ2V0cyBwcmVzc2VkIC0gY2hlY2sgaWYgaXQgaXMgZW50ZXIgb3Igc3BhY2VcbiAgICAgICAgaWYgKEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX0VOVEVSIHx8IEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX1NQQUNFKSB7XG4gICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc3VtbWFyeScpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgc3BhY2UgZnJvbSBzY3JvbGxpbmcgdGhlIHBhZ2VcbiAgICAgICAgICAgIC8vIGFuZCBlbnRlciBmcm9tIHN1Ym1pdHRpbmcgYSBmb3JtXG4gICAgICAgICAgICBHT1ZVSy5kZXRhaWxzLnByZXZlbnREZWZhdWx0KGUpXG4gICAgICAgICAgICAvLyBDbGljayB0byBsZXQgdGhlIGNsaWNrIGV2ZW50IGRvIGFsbCB0aGUgbmVjZXNzYXJ5IGFjdGlvblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGljaykge1xuICAgICAgICAgICAgICB0YXJnZXQuY2xpY2soKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gZXhjZXB0IFNhZmFyaSA1LjEgYW5kIHVuZGVyIGRvbid0IHN1cHBvcnQgLmNsaWNrKCkgaGVyZVxuICAgICAgICAgICAgICBjYWxsYmFjayhlLCB0YXJnZXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyBQcmV2ZW50IGtleXVwIHRvIHByZXZlbnQgY2xpY2tpbmcgdHdpY2UgaW4gRmlyZWZveCB3aGVuIHVzaW5nIHNwYWNlIGtleVxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCAna2V5dXAnLCBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIGlmIChHT1ZVSy5kZXRhaWxzLmNoYXJDb2RlKGUpID09PSBHT1ZVSy5kZXRhaWxzLktFWV9TUEFDRSkge1xuICAgICAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT09ICdTVU1NQVJZJykge1xuICAgICAgICAgICAgR09WVUsuZGV0YWlscy5wcmV2ZW50RGVmYXVsdChlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCAnY2xpY2snLCBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIGNhbGxiYWNrKGUsIHRhcmdldClcbiAgICAgIH0pXG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbmVhcmVzdCBhbmNlc3RvciBlbGVtZW50IG9mIGEgbm9kZSB0aGF0IG1hdGNoZXMgYSBnaXZlbiB0YWcgbmFtZVxuICAgIGdldEFuY2VzdG9yOiBmdW5jdGlvbiAobm9kZSwgbWF0Y2gpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbWF0Y2gpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGVcbiAgICAgIH0gd2hpbGUgKG5vZGUpXG5cbiAgICAgIHJldHVybiBub2RlXG4gICAgfSxcblxuICAgIC8vIEluaXRpYWxpc2F0aW9uIGZ1bmN0aW9uXG4gICAgYWRkRGV0YWlsc1BvbHlmaWxsOiBmdW5jdGlvbiAobGlzdCwgY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIgPSBjb250YWluZXIgfHwgZG9jdW1lbnQuYm9keVxuICAgICAgLy8gSWYgdGhpcyBoYXMgYWxyZWFkeSBoYXBwZW5lZCwganVzdCByZXR1cm5cbiAgICAgIC8vIGVsc2Ugc2V0IHRoZSBmbGFnIHNvIGl0IGRvZXNuJ3QgaGFwcGVuIGFnYWluXG4gICAgICBpZiAoR09WVUsuZGV0YWlscy5zdGFydGVkKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgR09WVUsuZGV0YWlscy5zdGFydGVkID0gdHJ1ZVxuICAgICAgLy8gR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGRldGFpbHMgZWxlbWVudHMsIGJ1dCBpZiB0aGF0J3MgZW1wdHlcbiAgICAgIC8vIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBib3RoZXIgd2l0aCB0aGUgcmVzdCBvZiB0aGUgc2NyaXB0aW5nXG4gICAgICBpZiAoKGxpc3QgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RldGFpbHMnKSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgLy8gZWxzZSBpdGVyYXRlIHRocm91Z2ggdGhlbSB0byBhcHBseSB0aGVpciBpbml0aWFsIHN0YXRlXG4gICAgICB2YXIgbiA9IGxpc3QubGVuZ3RoXG4gICAgICB2YXIgaSA9IDBcbiAgICAgIGZvciAoaTsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgZGV0YWlscyA9IGxpc3RbaV1cblxuICAgICAgICAvLyBTYXZlIHNob3J0Y3V0cyB0byB0aGUgaW5uZXIgc3VtbWFyeSBhbmQgY29udGVudCBlbGVtZW50c1xuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeSA9IGRldGFpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3N1bW1hcnknKS5pdGVtKDApXG4gICAgICAgIGRldGFpbHMuX19jb250ZW50ID0gZGV0YWlscy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JykuaXRlbSgwKVxuXG4gICAgICAgIGlmICghZGV0YWlscy5fX3N1bW1hcnkgfHwgIWRldGFpbHMuX19jb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIGNvbnRlbnQgZG9lc24ndCBoYXZlIGFuIElELCBhc3NpZ24gaXQgb25lIG5vd1xuICAgICAgICAvLyB3aGljaCB3ZSdsbCBuZWVkIGZvciB0aGUgc3VtbWFyeSdzIGFyaWEtY29udHJvbHMgYXNzaWdubWVudFxuICAgICAgICBpZiAoIWRldGFpbHMuX19jb250ZW50LmlkKSB7XG4gICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuaWQgPSAnZGV0YWlscy1jb250ZW50LScgKyBpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgQVJJQSByb2xlPVwiZ3JvdXBcIiB0byBkZXRhaWxzXG4gICAgICAgIGRldGFpbHMuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2dyb3VwJylcblxuICAgICAgICAvLyBBZGQgcm9sZT1idXR0b24gdG8gc3VtbWFyeVxuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJylcblxuICAgICAgICAvLyBBZGQgYXJpYS1jb250cm9sc1xuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCBkZXRhaWxzLl9fY29udGVudC5pZClcblxuICAgICAgICAvLyBTZXQgdGFiSW5kZXggc28gdGhlIHN1bW1hcnkgaXMga2V5Ym9hcmQgYWNjZXNzaWJsZSBmb3Igbm9uLW5hdGl2ZSBlbGVtZW50c1xuICAgICAgICAvLyBodHRwOi8vd3d3LnNhbGllbmNlcy5jb20vYnJvd3NlckJ1Z3MvdGFiSW5kZXguaHRtbFxuICAgICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS50YWJJbmRleCA9IDBcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERldGVjdCBpbml0aWFsIG9wZW4gc3RhdGVcbiAgICAgICAgdmFyIG9wZW5BdHRyID0gZGV0YWlscy5nZXRBdHRyaWJ1dGUoJ29wZW4nKSAhPT0gbnVsbFxuICAgICAgICBpZiAob3BlbkF0dHIgPT09IHRydWUpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpXG4gICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcbiAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuICAgICAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhIGNpcmN1bGFyIHJlZmVyZW5jZSBmcm9tIHRoZSBzdW1tYXJ5IGJhY2sgdG8gaXRzXG4gICAgICAgIC8vIHBhcmVudCBkZXRhaWxzIGVsZW1lbnQsIGZvciBjb252ZW5pZW5jZSBpbiB0aGUgY2xpY2sgaGFuZGxlclxuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5fX2RldGFpbHMgPSBkZXRhaWxzXG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBub3QgYSBuYXRpdmUgaW1wbGVtZW50YXRpb24sIGNyZWF0ZSBhbiBhcnJvd1xuICAgICAgICAvLyBpbnNpZGUgdGhlIHN1bW1hcnlcbiAgICAgICAgaWYgKCFHT1ZVSy5kZXRhaWxzLk5BVElWRV9ERVRBSUxTKSB7XG4gICAgICAgICAgdmFyIHR3aXN0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKVxuXG4gICAgICAgICAgaWYgKG9wZW5BdHRyID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0d2lzdHkuY2xhc3NOYW1lID0gJ2Fycm93IGFycm93LW9wZW4nXG4gICAgICAgICAgICB0d2lzdHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1xcdTI1YmMnKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHdpc3R5LmNsYXNzTmFtZSA9ICdhcnJvdyBhcnJvdy1jbG9zZWQnXG4gICAgICAgICAgICB0d2lzdHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1xcdTI1YmEnKSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5fX3R3aXN0eSA9IGRldGFpbHMuX19zdW1tYXJ5Lmluc2VydEJlZm9yZSh0d2lzdHksIGRldGFpbHMuX19zdW1tYXJ5LmZpcnN0Q2hpbGQpXG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuX190d2lzdHkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBCaW5kIGEgY2xpY2sgZXZlbnQgdG8gaGFuZGxlIHN1bW1hcnkgZWxlbWVudHNcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkQ2xpY2tFdmVudChjb250YWluZXIsIGZ1bmN0aW9uIChlLCBzdW1tYXJ5KSB7XG4gICAgICAgIGlmICghKHN1bW1hcnkgPSBHT1ZVSy5kZXRhaWxzLmdldEFuY2VzdG9yKHN1bW1hcnksICdzdW1tYXJ5JykpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR09WVUsuZGV0YWlscy5zdGF0ZWNoYW5nZShzdW1tYXJ5KVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgLy8gRGVmaW5lIGEgc3RhdGVjaGFuZ2UgZnVuY3Rpb24gdGhhdCB1cGRhdGVzIGFyaWEtZXhwYW5kZWQgYW5kIHN0eWxlLmRpc3BsYXlcbiAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgYXJyb3cgcG9zaXRpb25cbiAgICBzdGF0ZWNoYW5nZTogZnVuY3Rpb24gKHN1bW1hcnkpIHtcbiAgICAgIHZhciBleHBhbmRlZCA9IHN1bW1hcnkuX19kZXRhaWxzLl9fc3VtbWFyeS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnXG4gICAgICB2YXIgaGlkZGVuID0gc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSA9PT0gJ3RydWUnXG5cbiAgICAgIHN1bW1hcnkuX19kZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAoZXhwYW5kZWQgPyAnZmFsc2UnIDogJ3RydWUnKSlcbiAgICAgIHN1bW1hcnkuX19kZXRhaWxzLl9fY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgKGhpZGRlbiA/ICdmYWxzZScgOiAndHJ1ZScpKVxuXG4gICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LnN0eWxlLmRpc3BsYXkgPSAoZXhwYW5kZWQgPyAnbm9uZScgOiAnJylcblxuICAgICAgICB2YXIgaGFzT3BlbkF0dHIgPSBzdW1tYXJ5Ll9fZGV0YWlscy5nZXRBdHRyaWJ1dGUoJ29wZW4nKSAhPT0gbnVsbFxuICAgICAgICBpZiAoIWhhc09wZW5BdHRyKSB7XG4gICAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuc2V0QXR0cmlidXRlKCdvcGVuJywgJ29wZW4nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1bW1hcnkuX19kZXRhaWxzLnJlbW92ZUF0dHJpYnV0ZSgnb3BlbicpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHN1bW1hcnkuX190d2lzdHkpIHtcbiAgICAgICAgc3VtbWFyeS5fX3R3aXN0eS5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IChleHBhbmRlZCA/ICdcXHUyNWJhJyA6ICdcXHUyNWJjJylcbiAgICAgICAgc3VtbWFyeS5fX3R3aXN0eS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKGV4cGFuZGVkID8gJ2Fycm93IGFycm93LWNsb3NlZCcgOiAnYXJyb3cgYXJyb3ctb3BlbicpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICBkZXN0cm95OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgR09WVUsuZGV0YWlscy5yZW1vdmVFdmVudChub2RlLCAnY2xpY2snKVxuICAgIH0sXG5cbiAgICAvLyBCaW5kIHR3byBsb2FkIGV2ZW50cyBmb3IgbW9kZXJuIGFuZCBvbGRlciBicm93c2Vyc1xuICAgIC8vIElmIHRoZSBmaXJzdCBvbmUgZmlyZXMgaXQgd2lsbCBzZXQgYSBmbGFnIHRvIGJsb2NrIHRoZSBzZWNvbmQgb25lXG4gICAgLy8gYnV0IGlmIGl0J3Mgbm90IHN1cHBvcnRlZCB0aGVuIHRoZSBzZWNvbmQgb25lIHdpbGwgZmlyZVxuICAgIGluaXQ6IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KGRvY3VtZW50LCAnRE9NQ29udGVudExvYWRlZCcsIEdPVlVLLmRldGFpbHMuYWRkRGV0YWlsc1BvbHlmaWxsKVxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudCh3aW5kb3csICdsb2FkJywgR09WVUsuZGV0YWlscy5hZGREZXRhaWxzUG9seWZpbGwpXG4gICAgfVxuICB9XG4gIGdsb2JhbC5HT1ZVSyA9IEdPVlVLXG59KSh3aW5kb3cpXG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIE5TQSA9IE5TQSB8fCB7fTtcbnZhciBmaWx0ZXJCb3hlcyA9ICQoJy5maWx0ZXItYm94Jyk7XG5cbk5TQS5maWx0ZXJzID0ge1xuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgZmlsdGVyQm94ZXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpLFxuICAgICAgICAgIGhlYWRlciA9ICR0aGF0LmZpbmQoJy5jb250YWluZXItaGVhZCcpLFxuICAgICAgICAgIHRpdGxlID0gaGVhZGVyLmZpbmQoJy5vcHRpb24tc2VsZWN0LWxhYmVsJyksXG4gICAgICAgICAgY2hlY2tib3hlcyA9ICR0aGF0LmZpbmQoJ2lucHV0OmNoZWNrYm94JyksXG4gICAgICAgICAgYnV0dG9uID0gJCgnPGJ1dHRvbiAvPicpLmFkZENsYXNzKCdqcy1jb250YWluZXItaGVhZCcpLFxuICAgICAgICAgIGNoZWNrQ291bnQgPSAkKCc8ZGl2IC8+JykuYWRkQ2xhc3MoJ2pzLXNlbGVjdGVkLWNvdW50ZXInKTtcblxuICAgICAgYnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gJCh0aGlzKS5uZXh0KCk7XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdjbG9zZWQnKSkge1xuICAgICAgICAgIG9wdGlvbnMuc2hvdygpO1xuICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnY2xvc2VkJylcbiAgICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9ucy5oaWRlKCk7XG4gICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdjbG9zZWQnKVxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSkuYXBwZW5kKHRpdGxlLCBjaGVja0NvdW50KTtcblxuICAgICAgaGVhZGVyLnJlcGxhY2VXaXRoKGJ1dHRvbik7XG5cbiAgICAgIGNoZWNrYm94ZXMub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tDb3VudC50ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBjaGVja2JveGVzLmZpbHRlcignOmNoZWNrZWQnKS5sZW5ndGggPiAwID8gY2hlY2tib3hlcy5maWx0ZXIoJzpjaGVja2VkJykubGVuZ3RoICsgJyBzZWxlY3RlZCcgOiAnJztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5pZiAoZmlsdGVyQm94ZXMubGVuZ3RoID4gMCkge1xuICBOU0EuZmlsdGVycy5pbml0KCk7XG59XG4iLCJ2YXIgZ2FFdmVudCA9ICQoJyNnYS1ldmVudCcpO1xuXG5pZiAoZ2FFdmVudC5sZW5ndGggPiAwKSB7XG4gIHZhciBjYXRlZ29yeSA9IGdhRXZlbnQuZGF0YSgnY2F0ZWdvcnknKSxcbiAgICBsYWJlbCA9IGdhRXZlbnQuZGF0YSgnbGFiZWwnKSxcbiAgICBldmVudCA9IGdhRXZlbnQuZGF0YSgnZXZlbnQnKTtcblxuICBpZiAoZXZlbnQgIT09ICcnICYmIGxhYmVsICE9PSAnJyAmJiBjYXRlZ29yeSAhPT0gJycpIHtcbiAgICBndGFnKCdldmVudCcsIGV2ZW50LCB7XG4gICAgICBldmVudF9jYXRlZ29yeTogY2F0ZWdvcnksXG4gICAgICBldmVudF9sYWJlbDogbGFiZWwsXG4gICAgfSk7XG4gIH1cbn1cblxuJCgnLm5vdGlmaWNhdGlvbiBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBpZiAoJCh0aGlzKS5kYXRhKCdjbGllbnRpZCcpKSB7XG4gICAgZ3RhZygnZXZlbnQnLCAnZG93bmxvYWQnLCB7XG4gICAgICBldmVudF9jYXRlZ29yeTogJ21pZ3JhdGlvbi1oZWxwLXBkZicsXG4gICAgICBldmVudF9sYWJlbDogJCh0aGlzKS5kYXRhKCdjbGllbnRpZCcpLFxuICAgIH0pO1xuICB9XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgTlNBID0gTlNBIHx8IHt9O1xuXG5OU0Euc2lnbmluID0ge1xuICBmb3JtOiAkKCcuZm9ybS1zaWduaW4nKSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0dXBFdmVudHMoKTtcbiAgfSxcbiAgc2V0dXBFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZvcm0ub24oJ3N1Ym1pdCcsIHRoaXMsIHRoaXMuaGFuZGxlU3VibWl0KTtcbiAgfSxcbiAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiAoZSkge1xuXG4gICAgdmFyICRmb3JtID0gJCh0aGlzKTtcbiAgICB2YXIgJGlucHV0cyA9ICRmb3JtLmZpbmQoJ2lucHV0Jykubm90KCc6Y2hlY2tib3gnKSwgcG9zdERhdGEgPSB7fSwgJHN1Ym1pdEJ1dHRvbnMgPSAkKHRoaXMpLmZpbmQoJ2J1dHRvbjpzdWJtaXQnKSwgJHN1Ym1pdEJ1dHRvbiA9ICRzdWJtaXRCdXR0b25zLmVxKDApO1xuXG4gICAgJHN1Ym1pdEJ1dHRvbnMuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuICAgICRzdWJtaXRCdXR0b24uY3NzKCdtaW4td2lkdGgnLCAkc3VibWl0QnV0dG9uLm91dGVyV2lkdGgoKSArICdweCcpXG5cbiAgICAkc3VibWl0QnV0dG9uLmZpbmQoJy5sb2FkZXInKS5yZW1vdmVDbGFzcygndmgnKTtcblxuICAgICRpbnB1dHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHBvc3REYXRhW3RoaXMubmFtZV0gPSAkKHRoaXMpLnZhbCgpO1xuICAgIH0pO1xuXG4gICAgJCgnI3Bhc3N3b3JkJykucHJvcCgndHlwZScsICdwYXNzd29yZCcpLm5leHQoKS5yZW1vdmVDbGFzcygndHlwZS1wYXNzd29yZCcpO1xuXG4gICAgJC5hamF4KHtcbiAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgIGRhdGE6IHBvc3REYXRhLFxuICAgICAgdXJsOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcbiAgICAgIGNvbnRleHQ6IGUuZGF0YSxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5yZWRpcmVjdCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YS51cmk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRhdGEuaXNGYWlsZWRMb2dpbikge1xuICAgICAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb24oJGZvcm0pO1xuICAgICAgICAgICAgdGhpcy5zaG93VmFsaWRhdGlvbk1lc3NhZ2UoZGF0YS52YWxpZGF0aW9uTWVzc2FnZXMpO1xuICAgICAgICAgICAgdGhpcy5zaG93SW5saW5lVmFsaWRhdGlvbihkYXRhLnZhbGlkYXRpb25NZXNzYWdlcyk7XG4gICAgICAgICAgICAkc3VibWl0QnV0dG9ucy5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgJHN1Ym1pdEJ1dHRvbi5maW5kKCcubG9hZGVyJykuYWRkQ2xhc3MoJ3ZoJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGd0YWcoJ2V2ZW50JywgJ1N1Y2Nlc3NmdWwgbG9naW4nLCB7XG4gICAgICAgICAgICAgIGV2ZW50X2NhdGVnb3J5OiAnTG9naW4nLFxuICAgICAgICAgICAgICBldmVudF9sYWJlbDogZ2V0UGFyYW1ldGVyQnlOYW1lKCdjbGllbnRpZCcpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkRm9ybUFuZFN1Ym1pdChkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCRmb3JtKTtcbiAgICAgICAgdGhpcy5zaG93VmFsaWRhdGlvbk1lc3NhZ2UoKTtcbiAgICAgICAgJHN1Ym1pdEJ1dHRvbnMucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgJHN1Ym1pdEJ1dHRvbi5maW5kKCcubG9hZGVyJykuYWRkQ2xhc3MoJ3ZoJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICByZXNldFZhbGlkYXRpb246IGZ1bmN0aW9uICgkZm9ybSkge1xuXG4gICAgdmFyICRmb3JtR3JvdXBzID0gJGZvcm0uZmluZCgnLmdvdnVrZm9ybS1ncm91cCcpO1xuXG4gICAgJCgnLmdvdnVrLWVycm9yLXN1bW1hcnknKS5yZW1vdmUoKTtcblxuICAgICRmb3JtR3JvdXBzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRmaWVsZCA9ICQodGhpcykuZmluZCgnaW5wdXQnKS5lcSgwKTtcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpKSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJyk7XG4gICAgICAgICQodGhpcykuZmluZCgnc3Bhbi5nb3Z1ay1lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWRlc2NyaWJlZGJ5JykucmVtb3ZlQXR0cignYXJpYS1pbnZhbGlkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2hvd1ZhbGlkYXRpb25NZXNzYWdlOiBmdW5jdGlvbiAobWVzc2FnZXMpIHtcblxuICAgIHZhciAkZGl2ID0gJCgnPGRpdiAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWVycm9yLXN1bW1hcnkgZ292dWstIS1tYXJnaW4tdG9wLTYnKS5hdHRyKCdyb2xlJywgJ2FsZXJ0JykuYXR0cigndGFiaW5kZXgnLCAnLTEnKS5hdHRyKCdhcmlhLWxhYmVsbGVkYnknLCAnZXJyb3Itc3VtbWFyeS10aXRsZScpO1xuICAgIHZhciAkaDIgPSAkKCc8aDIgLz4nKS5hdHRyKCdjbGFzcycsICdnb3Z1ay1lcnJvci1zdW1tYXJ5X190aXRsZScpLmF0dHIoJ2lkJywgJ2Vycm9yLXN1bW1hcnknKTtcbiAgICB2YXIgJHVsQ29udGFpbmVyID0gJCgnPGRpdiAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWVycm9yLXN1bW1hcnlfX2JvZHknKTtcbiAgICB2YXIgJHVsID0gJCgnPHVsIC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstbGlzdCBnb3Z1ay1lcnJvci1zdW1tYXJ5X19saXN0Jyk7XG5cbiAgICBpZiAobWVzc2FnZXMpIHtcbiAgICAgICRoMi50ZXh0KCdJbmZvcm1hdGlvbiBtaXNzaW5nIG9yIGluY29ycmVjdCcpO1xuICAgICAgJC5lYWNoKG1lc3NhZ2VzLCBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gJ2xvZ2luRXJyb3InKSB7XG4gICAgICAgICAgaW5kZXggPSAndXNlcm5hbWUnO1xuICAgICAgICAgIGd0YWcoJ2V2ZW50JywgJ0ZhaWxlZCBsb2dpbicsIHtcbiAgICAgICAgICAgIGV2ZW50X2NhdGVnb3J5OiAnTG9naW4nLFxuICAgICAgICAgICAgZXZlbnRfbGFiZWw6ICdVc2VycyBsb2dpbiBjcmVkZW50aWFscyB3ZXJlIHdyb25nJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgJGEgPSAkKCc8YSAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWxpbmsnKS5hdHRyKCdocmVmJywgJyMnICsgaW5kZXgpLnRleHQodmFsdWUpO1xuICAgICAgICB2YXIgJGxpID0gJCgnPGxpIC8+JykuYXBwZW5kKCRhKTtcbiAgICAgICAgJHVsLmFwcGVuZCgkbGkpO1xuICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgJGgyLnRleHQoJ1RoZXJlIGhhcyBiZWVuIGFuIGVycm9yJyk7XG4gICAgICB2YXIgJGxpID0gJCgnPGxpIC8+JykuaHRtbCgnUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4gSWYgdGhlIHByb2JsZW0gY29udGludWVzLCBmb2xsb3cgdGhlIGxpbmsgdG8gPGEgaHJlZj1cImh0dHBzOi8vaGVscC5zaWduaW4uZWR1Y2F0aW9uLmdvdi51ay9jb250YWN0L2Zvcm1cIj5zdWJtaXQgYSBzdXBwb3J0IHJlcXVlc3Q8L2E+Jyk7XG4gICAgICAkdWwuYXBwZW5kKCRsaSk7XG4gICAgICBndGFnKCdldmVudCcsICdFcnJvciBvY2N1cnJlZCcsIHtcbiAgICAgICAgZXZlbnRfY2F0ZWdvcnk6ICdMb2dpbicsXG4gICAgICAgIGV2ZW50X2xhYmVsOiAnQSBzZXJ2ZXIgZXJyb3Igb2NjdXJyZWQgZHVyaW5nIGxvZ2luJyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgICRkaXYuYXBwZW5kKCRoMikuYXBwZW5kKCR1bENvbnRhaW5lci5hcHBlbmQoJHVsKSk7XG4gICAgJCgnbWFpbicpLnByZXBlbmQoJGRpdik7XG5cbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICBzY3JvbGxUb3A6ICRkaXYub2Zmc2V0KCkudG9wIC0gMTVcbiAgICB9LCAzMDApO1xuXG4gIH0sXG4gIHNob3dJbmxpbmVWYWxpZGF0aW9uOiBmdW5jdGlvbihtZXNzYWdlcykge1xuXG4gICAgJC5lYWNoKG1lc3NhZ2VzLCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICkge1xuICAgICAgdmFyICRmaWVsZCA9ICQoJ2lucHV0W25hbWU9JyArIGluZGV4ICsgJ10nKSxcbiAgICAgICAgJHBhcmVudCA9ICRmaWVsZC5wYXJlbnQoKTtcblxuICAgICAgaWYgKCRwYXJlbnQuaGFzQ2xhc3MoJ3Nob3ctcGFzc3dvcmQnKSkge1xuICAgICAgICAkcGFyZW50ID0gJHBhcmVudC5wYXJlbnQoKTtcbiAgICAgIH1cblxuICAgICAgdmFyICRsYWJlbCA9ICRwYXJlbnQuZmluZCgnbGFiZWwnKS5maXJzdCgpO1xuXG4gICAgICBpZiAoISRwYXJlbnQuaGFzQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJykpIHtcblxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gJCgnPHNwYW4gY2xhc3M9XCJnb3Z1ay1ib2R5XCI+JylcbiAgICAgICAgICAuaHRtbCh2YWx1ZSlcbiAgICAgICAgICAucHJvcCgnY2xhc3MnLCAnZ292dWstZXJyb3ItbWVzc2FnZScpXG4gICAgICAgICAgLnByb3AoJ2lkJywgJ3ZhbGlkYXRpb24tJyArIGluZGV4KTtcbiAgICAgIH1cblxuICAgICAgJGxhYmVsLmFmdGVyKGVycm9yTWVzc2FnZSk7XG4gICAgICAkcGFyZW50LmFkZENsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuICAgICAgJGZpZWxkLmF0dHIoe1xuICAgICAgICAnYXJpYS1kZXNjcmliZWRieScgOiAndmFsaWRhdGlvbi0nICsgaW5kZXgsXG4gICAgICAgICdhcmlhLWludmFsaWQnOiAndHJ1ZSdcbiAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgfSxcbiAgYnVpbGRGb3JtQW5kU3VibWl0OiBmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgdmFyICRmb3JtID0gJCgnPGZvcm0gLz4nKS5hdHRyKHtcbiAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgYWN0aW9uOiBkYXRhLmRlc3RpbmF0aW9uLFxuICAgICAgaWQ6ICdkZmVzaWduaW5mb3JtJ1xuICAgIH0pO1xuXG4gICAgJC5lYWNoKGRhdGEucG9zdGJhY2tEYXRhLCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICkge1xuICAgICAgdmFyICRmaWVsZCA9ICQoJzxpbnB1dCAvPicpLmF0dHIoe1xuICAgICAgICB0eXBlOiAnaGlkZGVuJyxcbiAgICAgICAgbmFtZTogaW5kZXgsXG4gICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgfSk7XG4gICAgICAkZm9ybS5hcHBlbmQoJGZpZWxkKTtcbiAgICB9KTtcblxuICAgICQoJyNkZmVzaWduaW5mb3JtJykucmVtb3ZlKCk7XG4gICAgJCgnYm9keScpLmFwcGVuZCgkZm9ybSk7XG4gICAgJGZvcm0uc3VibWl0KCk7XG4gIH0sXG59O1xuXG5pZiAoJCgnLmZvcm0tc2lnbmluJykubGVuZ3RoID4gMCkge1xuICBOU0Euc2lnbmluLmluaXQoKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGFyYW1ldGVyQnlOYW1lKG5hbWUsIHVybCkge1xuICBpZiAoIXVybCkgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csIFwiXFxcXCQmXCIpO1xuICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiWz8mXVwiICsgbmFtZSArIFwiKD0oW14mI10qKXwmfCN8JClcIiksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFyZXN1bHRzWzJdKSByZXR1cm4gJyc7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBzb3J0VGFibGUobikge1xuICB2YXIgdGFibGUsIHJvd3MsIHN3aXRjaGluZywgaSwgeCwgeSwgc2hvdWxkU3dpdGNoLCBkaXJlY3Rpb24sIHN3aXRjaGNvdW50ID0gMDtcbiAgdGFibGUgPSAkKCd0YWJsZS5zb3J0YWJsZScpO1xuICBzd2l0Y2hpbmcgPSB0cnVlO1xuICBkaXJlY3Rpb24gPSAnYSc7XG5cbiAgd2hpbGUgKHN3aXRjaGluZykge1xuXG4gICAgc3dpdGNoaW5nID0gZmFsc2U7XG4gICAgcm93cyA9IHRhYmxlLmZpbmQoJ3RyJyk7XG5cbiAgICBmb3IgKGkgPSAxOyBpIDwgKHJvd3MubGVuZ3RoIC0gMSk7IGkrKykge1xuXG4gICAgICBzaG91bGRTd2l0Y2ggPSBmYWxzZTtcblxuICAgICAgeCA9IHJvd3NbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1REJylbbl07XG4gICAgICB5ID0gcm93c1tpICsgMV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1REJylbbl07XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdhJykge1xuICAgICAgICBpZiAoeC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA+IHkuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICBzaG91bGRTd2l0Y2ggPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2QnKSB7XG4gICAgICAgIGlmICh4LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpIDwgeS5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHNob3VsZFN3aXRjaCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkU3dpdGNoKSB7XG5cbiAgICAgIHJvd3NbaV0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocm93c1tpICsgMV0sIHJvd3NbaV0pO1xuICAgICAgc3dpdGNoaW5nID0gdHJ1ZTtcblxuICAgICAgc3dpdGNoY291bnQgKys7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICBpZiAoc3dpdGNoY291bnQgPT09IDAgJiYgZGlyZWN0aW9uID09PSAnYScpIHtcbiAgICAgICAgZGlyZWN0aW9uID0gJ2QnO1xuICAgICAgICBzd2l0Y2hpbmcgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgfVxuICB9XG4gIHJldHVybiBkaXJlY3Rpb247XG59XG5cbiQoZnVuY3Rpb24gKCkge1xuXG4gICQoJ3RhYmxlLnNvcnRhYmxlIHRoZWFkIHRoJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGhlYWRpbmdDZWxscyA9ICQoJ3RhYmxlLnNvcnRhYmxlIHRoZWFkIHRyIHRoJyk7XG5cbiAgICBoZWFkaW5nQ2VsbHMucmVtb3ZlQ2xhc3MoJ3NvcnRlZCcpLnJlbW92ZUNsYXNzKCdkaXItYScpLnJlbW92ZUNsYXNzKCdkaXItZCcpO1xuXG4gICAgdmFyIGluZGV4ID0gaGVhZGluZ0NlbGxzLmluZGV4KCQodGhpcykpO1xuXG4gICAgdmFyIGRpcmVjdGlvbiA9IHNvcnRUYWJsZShpbmRleCk7XG5cbiAgICAkKHRoaXMpLmFkZENsYXNzKCdzb3J0ZWQgZGlyLScgKyBkaXJlY3Rpb24pO1xuXG4gIH0pO1xuXG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgTlNBID0gTlNBIHx8IHt9O1xuXG5OU0EubW9kYWwgPSB7XG4gIGVsZW1zOiB7XG4gICAgbGlua3M6ICQoJy5tb2RhbC1saW5rJyksXG4gICAgbW9kYWxzOiAkKCcubW9kYWwnKVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RhbEJnKCk7XG4gICAgdGhpcy5zZXRVcEV2ZW50cygpO1xuICB9LFxuICBtb2RhbEJnOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHZhciBiZyA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ21vZGFsLWJnJykuaGlkZSgpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsgdGhhdC5oaWRlTW9kYWxzKCk7IH0pO1xuICAgICQoJ2JvZHknKS5hcHBlbmQoYmcpO1xuICB9LFxuICBzZXRVcEV2ZW50czogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB0aGlzLmVsZW1zLmxpbmtzLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICB0aGF0LnNob3dNb2RhbCgkKHRhcmdldCkpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhhdC5lbGVtcy5tb2RhbHMuZmluZCgnLmNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoYXQuaGlkZU1vZGFscygpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJCgnYm9keScpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICgoZS5rZXlDb2RlIHx8IGUud2hpY2gpID09PSAyNylcbiAgICAgICAgdGhhdC5oaWRlTW9kYWxzKCk7XG4gICAgfSk7XG4gIH0sXG4gIHNob3dNb2RhbDogZnVuY3Rpb24gKG1vZGFsKSB7XG4gICAgJCgnaHRtbCcpLmFkZENsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJnJykuc2hvdygpO1xuICAgIG1vZGFsLnNob3coKTtcbiAgfSxcbiAgaGlkZU1vZGFsczogZnVuY3Rpb24gKCkge1xuICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iZycpLmhpZGUoKTtcbiAgICB0aGlzLmVsZW1zLm1vZGFscy5oaWRlKCk7XG4gIH1cbn1cblxuTlNBLm1vZGFsLmluaXQoKTtcbiIsIjsoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAndXNlIHN0cmljdCdcblxuICB2YXIgJCA9IGdsb2JhbC5qUXVlcnlcbiAgdmFyIEdPVlVLID0gZ2xvYmFsLkdPVlVLIHx8IHt9XG5cbiAgZnVuY3Rpb24gU2hvd0hpZGVDb250ZW50ICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcblxuICAgIC8vIFJhZGlvIGFuZCBDaGVja2JveCBzZWxlY3RvcnNcbiAgICB2YXIgc2VsZWN0b3JzID0ge1xuICAgICAgbmFtZXNwYWNlOiAnU2hvd0hpZGVDb250ZW50JyxcbiAgICAgIHJhZGlvOiAnW2RhdGEtdGFyZ2V0XSA+IGlucHV0W3R5cGU9XCJyYWRpb1wiXScsXG4gICAgICBjaGVja2JveDogJ1tkYXRhLXRhcmdldF0gPiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLFxuICAgICAgbGluazogJ2EuanMtdG9nZ2xlLWNvbnRlbnQnXG4gICAgfVxuXG4gICAgLy8gRXNjYXBlIG5hbWUgYXR0cmlidXRlIGZvciB1c2UgaW4gRE9NIHNlbGVjdG9yXG4gICAgZnVuY3Rpb24gZXNjYXBlRWxlbWVudE5hbWUgKHN0cikge1xuICAgICAgdmFyIHJlc3VsdCA9IHN0ci5yZXBsYWNlKCdbJywgJ1xcXFxbJykucmVwbGFjZSgnXScsICdcXFxcXScpXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuXG4gICAgLy8gQWRkcyBBUklBIGF0dHJpYnV0ZXMgdG8gY29udHJvbCArIGFzc29jaWF0ZWQgY29udGVudFxuICAgIGZ1bmN0aW9uIGluaXRUb2dnbGVkQ29udGVudCAoKSB7XG4gICAgICB2YXIgJGNvbnRyb2wgPSAkKHRoaXMpXG4gICAgICB2YXIgJGNvbnRlbnQgPSBnZXRUb2dnbGVkQ29udGVudCgkY29udHJvbClcblxuICAgICAgLy8gU2V0IGFyaWEtY29udHJvbHMgYW5kIGRlZmF1bHRzXG4gICAgICBpZiAoJGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgICRjb250cm9sLmF0dHIoJ2FyaWEtY29udHJvbHMnLCAkY29udGVudC5hdHRyKCdpZCcpKVxuICAgICAgICAkY29udHJvbC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcbiAgICAgICAgJGNvbnRlbnQuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRvZ2dsZWQgY29udGVudCBmb3IgY29udHJvbFxuICAgIGZ1bmN0aW9uIGdldFRvZ2dsZWRDb250ZW50ICgkY29udHJvbCkge1xuICAgICAgdmFyIGlkID0gJGNvbnRyb2wuYXR0cignYXJpYS1jb250cm9scycpXG5cbiAgICAgIC8vIEFSSUEgYXR0cmlidXRlcyBhcmVuJ3Qgc2V0IGJlZm9yZSBpbml0XG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIGlkID0gJGNvbnRyb2wuY2xvc2VzdCgnW2RhdGEtdGFyZ2V0XScpLmRhdGEoJ3RhcmdldCcpXG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgc2hvdy9oaWRlIGNvbnRlbnQgYnkgaWRcbiAgICAgIHJldHVybiAkKCcjJyArIGlkKVxuICAgIH1cblxuICAgIC8vIFNob3cgdG9nZ2xlZCBjb250ZW50IGZvciBjb250cm9sXG4gICAgZnVuY3Rpb24gc2hvd1RvZ2dsZWRDb250ZW50ICgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgIC8vIFNob3cgY29udGVudFxuICAgICAgaWYgKCRjb250ZW50Lmhhc0NsYXNzKCdqcy1oaWRkZW4nKSkge1xuICAgICAgICAkY29udGVudC5yZW1vdmVDbGFzcygnanMtaGlkZGVuJylcbiAgICAgICAgJGNvbnRlbnQuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKVxuXG4gICAgICAgIC8vIElmIHRoZSBjb250cm9sbGluZyBpbnB1dCwgdXBkYXRlIGFyaWEtZXhwYW5kZWRcbiAgICAgICAgaWYgKCRjb250cm9sLmF0dHIoJ2FyaWEtY29udHJvbHMnKSkge1xuICAgICAgICAgICRjb250cm9sLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIaWRlIHRvZ2dsZWQgY29udGVudCBmb3IgY29udHJvbFxuICAgIGZ1bmN0aW9uIGhpZGVUb2dnbGVkQ29udGVudCAoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAkY29udGVudCA9ICRjb250ZW50IHx8IGdldFRvZ2dsZWRDb250ZW50KCRjb250cm9sKVxuXG4gICAgICAvLyBIaWRlIGNvbnRlbnRcbiAgICAgIGlmICghJGNvbnRlbnQuaGFzQ2xhc3MoJ2pzLWhpZGRlbicpKSB7XG4gICAgICAgICRjb250ZW50LmFkZENsYXNzKCdqcy1oaWRkZW4nKVxuICAgICAgICAkY29udGVudC5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJylcblxuICAgICAgICAvLyBJZiB0aGUgY29udHJvbGxpbmcgaW5wdXQsIHVwZGF0ZSBhcmlhLWV4cGFuZGVkXG4gICAgICAgIGlmICgkY29udHJvbC5hdHRyKCdhcmlhLWNvbnRyb2xzJykpIHtcbiAgICAgICAgICAkY29udHJvbC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSByYWRpbyBzaG93L2hpZGVcbiAgICBmdW5jdGlvbiBoYW5kbGVSYWRpb0NvbnRlbnQgKCRjb250cm9sLCAkY29udGVudCkge1xuICAgICAgLy8gQWxsIHJhZGlvcyBpbiB0aGlzIGdyb3VwIHdoaWNoIGNvbnRyb2wgY29udGVudFxuICAgICAgdmFyIHNlbGVjdG9yID0gc2VsZWN0b3JzLnJhZGlvICsgJ1tuYW1lPScgKyBlc2NhcGVFbGVtZW50TmFtZSgkY29udHJvbC5hdHRyKCduYW1lJykpICsgJ11bYXJpYS1jb250cm9sc10nXG4gICAgICB2YXIgJGZvcm0gPSAkY29udHJvbC5jbG9zZXN0KCdmb3JtJylcbiAgICAgIHZhciAkcmFkaW9zID0gJGZvcm0ubGVuZ3RoID8gJGZvcm0uZmluZChzZWxlY3RvcikgOiAkKHNlbGVjdG9yKVxuXG4gICAgICAvLyBIaWRlIGNvbnRlbnQgZm9yIHJhZGlvcyBpbiBncm91cFxuICAgICAgJHJhZGlvcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGlkZVRvZ2dsZWRDb250ZW50KCQodGhpcykpXG4gICAgICB9KVxuXG4gICAgICAvLyBTZWxlY3QgY29udGVudCBmb3IgdGhpcyBjb250cm9sXG4gICAgICBpZiAoJGNvbnRyb2wuaXMoJ1thcmlhLWNvbnRyb2xzXScpKSB7XG4gICAgICAgIHNob3dUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoZWNrYm94IHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZUNoZWNrYm94Q29udGVudCAoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAvLyBTaG93IGNoZWNrYm94IGNvbnRlbnRcbiAgICAgIGlmICgkY29udHJvbC5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICBzaG93VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KVxuICAgICAgfSBlbHNlIHsgLy8gSGlkZSBjaGVja2JveCBjb250ZW50XG4gICAgICAgIGhpZGVUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoZWNrYm94IHNob3cvaGlkZVxuICAgIGZ1bmN0aW9uIGhhbmRsZUxpbmtDb250ZW50ICgkY29udHJvbCwgJGNvbnRlbnQsICRldmVudCkge1xuICAgICAgaWYgKCRjb250ZW50Lmhhc0NsYXNzKCdqcy1oaWRkZW4nKSkge1xuICAgICAgICBzaG93VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZVRvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudClcbiAgICAgIH1cbiAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuXG4gICAgLy8gU2V0IHVwIGV2ZW50IGhhbmRsZXJzIGV0Y1xuICAgIGZ1bmN0aW9uIGluaXQgKCRjb250YWluZXIsIGVsZW1lbnRTZWxlY3RvciwgZXZlbnRTZWxlY3RvcnMsIGhhbmRsZXIpIHtcbiAgICAgICRjb250YWluZXIgPSAkY29udGFpbmVyIHx8ICQoZG9jdW1lbnQuYm9keSlcblxuICAgICAgLy8gSGFuZGxlIGNvbnRyb2wgY2xpY2tzXG4gICAgICBmdW5jdGlvbiBkZWZlcnJlZCAoZXZlbnQpIHtcbiAgICAgICAgdmFyICRjb250cm9sID0gJCh0aGlzKVxuICAgICAgICBoYW5kbGVyKCRjb250cm9sLCBnZXRUb2dnbGVkQ29udGVudCgkY29udHJvbCksIGV2ZW50KVxuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIEFSSUEgYXR0cmlidXRlc1xuICAgICAgdmFyICRjb250cm9scyA9ICQoZWxlbWVudFNlbGVjdG9yKVxuICAgICAgJGNvbnRyb2xzLmVhY2goaW5pdFRvZ2dsZWRDb250ZW50KVxuXG4gICAgICAvLyBIYW5kbGUgZXZlbnRzXG4gICAgICAkLmVhY2goZXZlbnRTZWxlY3RvcnMsIGZ1bmN0aW9uIChpZHgsIGV2ZW50U2VsZWN0b3IpIHtcbiAgICAgICAgJGNvbnRhaW5lci5vbignY2xpY2suJyArIHNlbGVjdG9ycy5uYW1lc3BhY2UsIGV2ZW50U2VsZWN0b3IsIGRlZmVycmVkKVxuICAgICAgfSlcblxuICAgICAgLy8gQW55IGFscmVhZHkgOmNoZWNrZWQgb24gaW5pdD9cbiAgICAgIGlmICgkY29udHJvbHMuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgJGNvbnRyb2xzLmZpbHRlcignOmNoZWNrZWQnKS5lYWNoKGRlZmVycmVkKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCBldmVudCBzZWxlY3RvcnMgZm9yIGFsbCByYWRpbyBncm91cHNcbiAgICBmdW5jdGlvbiBnZXRFdmVudFNlbGVjdG9yc0ZvclJhZGlvR3JvdXBzICgpIHtcbiAgICAgIHZhciByYWRpb0dyb3VwcyA9IFtdXG5cbiAgICAgIC8vIEJ1aWxkIGFuIGFycmF5IG9mIHJhZGlvIGdyb3VwIHNlbGVjdG9yc1xuICAgICAgcmV0dXJuICQoc2VsZWN0b3JzLnJhZGlvKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ3JvdXBOYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJylcblxuICAgICAgICBpZiAoJC5pbkFycmF5KGdyb3VwTmFtZSwgcmFkaW9Hcm91cHMpID09PSAtMSkge1xuICAgICAgICAgIHJhZGlvR3JvdXBzLnB1c2goZ3JvdXBOYW1lKVxuICAgICAgICAgIHJldHVybiAnaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCInICsgJCh0aGlzKS5hdHRyKCduYW1lJykgKyAnXCJdJ1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIFNldCB1cCByYWRpbyBzaG93L2hpZGUgY29udGVudCBmb3IgY29udGFpbmVyXG4gICAgc2VsZi5zaG93SGlkZVJhZGlvVG9nZ2xlZENvbnRlbnQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgaW5pdCgkY29udGFpbmVyLCBzZWxlY3RvcnMucmFkaW8sIGdldEV2ZW50U2VsZWN0b3JzRm9yUmFkaW9Hcm91cHMoKSwgaGFuZGxlUmFkaW9Db250ZW50KVxuICAgIH1cblxuICAgIC8vIFNldCB1cCBjaGVja2JveCBzaG93L2hpZGUgY29udGVudCBmb3IgY29udGFpbmVyXG4gICAgc2VsZi5zaG93SGlkZUNoZWNrYm94VG9nZ2xlZENvbnRlbnQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgaW5pdCgkY29udGFpbmVyLCBzZWxlY3RvcnMuY2hlY2tib3gsIFtzZWxlY3RvcnMuY2hlY2tib3hdLCBoYW5kbGVDaGVja2JveENvbnRlbnQpXG4gICAgfVxuXG4gICAgLy8gU2V0IHVwIGxpbmtzIHNob3cvaGlkZSBjb250ZW50IGZvciBjb250YWluZXJcbiAgICBzZWxmLnNob3dIaWRlTGlua1RvZ2dsZWRDb250ZW50ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIGluaXQoJGNvbnRhaW5lciwgc2VsZWN0b3JzLmxpbmssIFtzZWxlY3RvcnMubGlua10sIGhhbmRsZUxpbmtDb250ZW50KVxuICAgIH1cblxuICAgIC8vIFJlbW92ZSBldmVudCBoYW5kbGVyc1xuICAgIHNlbGYuZGVzdHJveSA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICAkY29udGFpbmVyID0gJGNvbnRhaW5lciB8fCAkKGRvY3VtZW50LmJvZHkpXG4gICAgICAkY29udGFpbmVyLm9mZignLicgKyBzZWxlY3RvcnMubmFtZXNwYWNlKVxuICAgIH1cbiAgfVxuXG4gIFNob3dIaWRlQ29udGVudC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgdGhpcy5zaG93SGlkZVJhZGlvVG9nZ2xlZENvbnRlbnQoJGNvbnRhaW5lcilcbiAgICB0aGlzLnNob3dIaWRlQ2hlY2tib3hUb2dnbGVkQ29udGVudCgkY29udGFpbmVyKVxuICAgIHRoaXMuc2hvd0hpZGVMaW5rVG9nZ2xlZENvbnRlbnQoJGNvbnRhaW5lcilcbiAgfVxuXG4gIEdPVlVLLlNob3dIaWRlQ29udGVudCA9IFNob3dIaWRlQ29udGVudFxuICBnbG9iYWwuR09WVUsgPSBHT1ZVS1xufSkod2luZG93KVxuIiwidmFyIHRvZ2dsZVRpcHMgPSAkKCcudG9nZ2xlLWhlbHAnKTtcblxudG9nZ2xlVGlwcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICB2YXIgJHRoYXQsXG4gICAgbGl2ZVJlZ2lvbixcbiAgICBjb250YWluZXIsXG4gICAgdG9nZ2xlVGlwO1xuXG4gICR0aGF0ID0gJCh0aGlzKTtcblxuICBjb250YWluZXIgPSAkKCc8c3BhbiAvPicpLmF0dHIoJ2NsYXNzJywgJ3RvZ2dsZXRpcCcpO1xuXG4gIHRvZ2dsZVRpcCA9ICQoJzxidXR0b24gLz4nKVxuICAgIC5hdHRyKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgLmF0dHIoJ2FyaWEtbGFiZWwnLCAnSGVscCcpXG4gICAgLmF0dHIoJ2RhdGEtdG9nZ2xldGlwLWNvbnRlbnQnLCAkdGhhdC5odG1sKCkpXG4gICAgLnRleHQoJz8nKVxuICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9ICQodGhpcykuZGF0YSgndG9nZ2xldGlwLWNvbnRlbnQnKTtcbiAgICAgIHZhciBsaXZlUmVnaW9uID0gJCh0aGlzKS5uZXh0KCk7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxpdmVSZWdpb24uaHRtbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICQoJzxzcGFuIC8+JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICR0aGF0Lmh0bWwoKS5sZW5ndGggPiA1MCA/ICdidWJibGUgbG9uZycgOiAnYnViYmxlJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50ZXh0KG1lc3NhZ2UpXG4gICAgICAgIH0pXG4gICAgICB9LCAxMDApO1xuICAgIH0pXG4gICAgLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICgoZS5rZXlDb2RlIHx8IGUud2hpY2gpID09PSAyNylcbiAgICAgICAgbGl2ZVJlZ2lvbi5odG1sKCcnKTtcbiAgICB9KTtcblxuICBsaXZlUmVnaW9uID0gJCgnPHNwYW4gLz4nKVxuICAgIC5hdHRyKCdyb2xlJywgJ3N0YXR1cycpO1xuXG4gIGNvbnRhaW5lci5hcHBlbmQodG9nZ2xlVGlwLCBsaXZlUmVnaW9uKTtcblxuICAkdGhhdC5iZWZvcmUoY29udGFpbmVyKS5yZW1vdmUoKTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGlmICgkdGhhdFswXSAhPT0gJChlLnRhcmdldCkpIHtcbiAgICAgIGxpdmVSZWdpb24uaHRtbCgnJyk7XG4gICAgfVxuICB9KTtcblxufSk7XG4iLCJ2YXIgZm9ybXMgPSAkKCcjY29udGVudCBmb3JtJyk7XG4vL3ZhciBpbnB1dHMgPSBmb3Jtcy5maW5kKCcuZm9ybS1ncm91cCBpbnB1dCcpO1xuXG5mb3Jtcy5hdHRyKCdub3ZhbGlkYXRlJywgJ25vdmFsaWRhdGUnKTtcblxuLypcbmZvcm1zLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XG4gIGlucHV0cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5jaGVja1ZhbGlkaXR5KCk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHNob3dWYWxpZGF0aW9uTWVzc2FnZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlkZVZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB0aGlzLmNoZWNrVmFsaWRpdHkoKTtcbn0pO1xuXG5pbnB1dHMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrVmFsaWRpdHkoKTtcbiAgaWYgKCFyZXN1bHQpIHtcbiAgICBzaG93VmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZVZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICB9XG59KTtcblxudmFyIHNob3dWYWxpZGF0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChmaWVsZCkge1xuXG4gIHZhciBmaWVsZCA9IGZpZWxkLFxuICAgICRmaWVsZCA9ICQoZmllbGQpLFxuICAgICRwYXJlbnQgPSAkZmllbGQucGFyZW50KCk7XG5cbiAgaWYgKCRwYXJlbnQuaGFzQ2xhc3MoJ3Nob3ctcGFzc3dvcmQnKSkge1xuICAgICRwYXJlbnQgPSAkcGFyZW50LnBhcmVudCgpO1xuICB9XG5cbiAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpKSB7XG5cbiAgICB2YXIgbGFiZWxUZXh0ID0gJGZpZWxkLmRhdGEoJ2xhYmVsJykgfHwgJChcImxhYmVsW2Zvcj0nXCIgKyAkZmllbGQuYXR0cignaWQnKSArIFwiJ11cIikudGV4dCgpLFxuICAgICAgZXJyb3JNZXNzYWdlVGV4dCA9ICdFbnRlciBhIHZhbGlkICcgKyBsYWJlbFRleHQudG9Mb3dlckNhc2UoKSxcbiAgICAgIGVycm9yTWVzc2FnZSA9ICQoJzxwIGNsYXNzPVwiZ292dWstYm9keVwiPicpXG4gICAgICAgIC5odG1sKGVycm9yTWVzc2FnZVRleHQpXG4gICAgICAgIC5wcm9wKCdjbGFzcycsICdlcnJvci1tZXNzYWdlJylcbiAgICAgICAgLnByb3AoJ2lkJywgJ3ZhbGlkYXRpb24tJyArIHNsdWdpZnkobGFiZWxUZXh0KSk7XG5cbiAgICAkZmllbGQuYmVmb3JlKGVycm9yTWVzc2FnZSk7XG4gICAgJHBhcmVudC5hZGRDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKTtcbiAgICAkZmllbGQuYXR0cih7XG4gICAgICAnYXJpYS1kZXNjcmliZWRieScgOiAndmFsaWRhdGlvbi0nICsgc2x1Z2lmeShsYWJlbFRleHQpLFxuICAgICAgJ2FyaWEtaW52YWxpZCc6ICd0cnVlJ1xuICAgIH0pO1xuICB9XG59XG5cbnZhciBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgdmFyIGZpZWxkID0gZmllbGQsXG4gICAgJGZpZWxkID0gJChmaWVsZCksXG4gICAgJHBhcmVudCA9ICRmaWVsZC5wYXJlbnQoKTtcblxuICBpZiAoJHBhcmVudC5oYXNDbGFzcygnc2hvdy1wYXNzd29yZCcpKSB7XG4gICAgJHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XG4gIH1cblxuICAkcGFyZW50LnJlbW92ZUNsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuICAkcGFyZW50LmZpbmQoJ3AuZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xuICAkZmllbGQucmVtb3ZlQXR0cignYXJpYS1kZXNjcmliZWRieScpO1xuICAkZmllbGQucmVtb3ZlQXR0cignYXJpYS1pbnZhbGlkJyk7XG59XG5cbnZhciBzbHVnaWZ5ID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgcmV0dXJuIHRleHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9bXlxcd1xcLV0rL2csICcnKVxuICAgIC5yZXBsYWNlKC9cXC1cXC0rL2csICctJylcbiAgICAucmVwbGFjZSgvXi0rLywgJycpXG4gICAgLnJlcGxhY2UoLy0rJC8sICcnKTtcbn1cblxuKi9cbiIsInZhciBOU0EgPSBOU0EgfHwge307XG5cbk5TQSA9IHtcbiAgc2hvd1Bhc3N3b3JkIDogZnVuY3Rpb24gKCkge1xuICAgIHZhciAkc2hvd1Bhc3N3b3JkID0gJCgnLnNob3ctcGFzc3dvcmQnKTtcbiAgICAkc2hvd1Bhc3N3b3JkLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICB2YXIgJHB3ZEZsZCA9ICR0aGF0LmZpbmQoJ2lucHV0OnBhc3N3b3JkJyk7XG4gICAgICB2YXIgJGNoZWNrTGJsID0gJCgnPGxhYmVsIC8+JykucHJvcCh7IGZvcjogJ3Nob3ctcGFzc3dvcmQtJyArIGkgfSkuaHRtbCgnU2hvdycpO1xuICAgICAgdmFyICRjaGVja0JveCA9ICQoJzxpbnB1dCAvPicpLnByb3AoeyB0eXBlOiAnY2hlY2tib3gnLCBpZDogJ3Nob3ctcGFzc3dvcmQtJyArIGkgfSkub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGF0ID0gJCh0aGlzKTtcbiAgICAgICAgJHB3ZEZsZC5wcm9wKCd0eXBlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAkdGhhdC5wcm9wKCdjaGVja2VkJykgPyAndGV4dCcgOiAncGFzc3dvcmQnO1xuICAgICAgICB9KTtcbiAgICAgICAgJGNoZWNrTGJsLmh0bWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAkdGhhdC5wcm9wKCdjaGVja2VkJykgPyAnSGlkZScgOiAnU2hvdyc7XG4gICAgICAgIH0pO1xuICAgICAgICAkdGhhdC5wYXJlbnQoKS5yZW1vdmVDbGFzcygndHlwZS1wYXNzd29yZCcpO1xuICAgICAgICBpZiAoJHRoYXQucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgJHRoYXQucGFyZW50KCkuYWRkQ2xhc3MoJ3R5cGUtcGFzc3dvcmQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgJGNiV3JhcCA9ICQoJzxkaXYgLz4nKS5wcm9wKCdjbGFzcycsICdzaG93LXBhc3N3b3JkLWNvbnRyb2wnKS5hcHBlbmQoJGNoZWNrQm94LCAkY2hlY2tMYmwpO1xuICAgICAgJHB3ZEZsZC5hZnRlcigkY2JXcmFwKTtcbiAgICB9KTtcbiAgfSxcbiAgYmFja0xpbms6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFja0xpbmsgPSAkKCc8YSBjbGFzcz1cImdvdnVrLWJhY2stbGlua1wiPicpXG4gICAgICAuYXR0cih7ICdocmVmJzogJyMnLCAnY2xhc3MnOiAnbGluay1iYWNrJyB9KVxuICAgICAgLnRleHQoJ0JhY2snKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7IHdpbmRvdy5oaXN0b3J5LmJhY2soKTsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9KTtcbiAgICAkKCcuanMtYmFjay1saW5rJykuaHRtbChiYWNrTGluayk7XG4gIH0sXG59O1xuXG5cbmlmICgkKCdzZWxlY3Quc2VsZWN0MicpLmxlbmd0aCA+IDApIHtcbiAgJCgnc2VsZWN0LnNlbGVjdDInKS5zZWxlY3QyKHttYXRjaGVyOiBzZWxlY3QyTW9kZWxNYXRjaGVyfSk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdDJNb2RlbE1hdGNoZXIgKHBhcmFtcywgZGF0YSkge1xuICBkYXRhLnBhcmVudFRleHQgPSBkYXRhLnBhcmVudFRleHQgfHwgXCJcIjtcbiAgaWYgKCQudHJpbShwYXJhbXMudGVybSkgPT09ICcnKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgaWYgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgdmFyIG1hdGNoID0gJC5leHRlbmQodHJ1ZSwge30sIGRhdGEpO1xuICAgIGZvciAodmFyIGMgPSBkYXRhLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSB7XG4gICAgICB2YXIgY2hpbGQgPSBkYXRhLmNoaWxkcmVuW2NdO1xuICAgICAgY2hpbGQucGFyZW50VGV4dCArPSBkYXRhLnBhcmVudFRleHQgKyBcIiBcIiArIGRhdGEudGV4dDtcbiAgICAgIHZhciBtYXRjaGVzID0gc2VsZWN0Mk1vZGVsTWF0Y2hlcihwYXJhbXMsIGNoaWxkKTtcbiAgICAgIGlmIChtYXRjaGVzID09IG51bGwpIHtcbiAgICAgICAgbWF0Y2guY2hpbGRyZW4uc3BsaWNlKGMsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF0Y2guY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0Mk1vZGVsTWF0Y2hlcihwYXJhbXMsIG1hdGNoKTtcbiAgfVxuICB2YXIgb3JpZ2luYWwgPSAoZGF0YS5wYXJlbnRUZXh0ICsgJyAnICsgZGF0YS50ZXh0KS50b1VwcGVyQ2FzZSgpO1xuICB2YXIgdGVybSA9IHBhcmFtcy50ZXJtLnRvVXBwZXJDYXNlKCk7XG4gIGlmIChvcmlnaW5hbC5pbmRleE9mKHRlcm0pID4gLTEpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuaWYgKCQoJy5zaG93LXBhc3N3b3JkJykubGVuZ3RoID4gMCkge1xuICBOU0Euc2hvd1Bhc3N3b3JkKCk7XG59XG5cbmlmICgkKCcuanMtYmFjay1saW5rJykpIHtcbiAgTlNBLmJhY2tMaW5rKCk7XG59XG5cbiQoJy51bmRlci1jb25zdHJ1Y3Rpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICBhbGVydCgnVGhpcyBmdW5jdGlvbmFsaXR5IGlzIG5vdCBhdmFpbGFibGUgeWV0Jyk7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG5pZiAoJCgnLm5vdGlmaWNhdGlvbiBzcGFuLmljb24nKS5sZW5ndGggPiAwKSB7XG4gICQoJy5ub3RpZmljYXRpb24gc3Bhbi5pY29uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykucGFyZW50KCkuaGlkZSgpO1xuICB9KTtcbn1cblxuaWYgKCQoJ2FydGljbGUub3JnYW5pc2F0aW9uLXNlcnZpY2VzJykubGVuZ3RoID4gMCkge1xuXG4gICQoJy5pbmZvcm1hdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGluZm8gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5zZXJ2aWNlLWRlc2NyaXB0aW9uJyk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGluZm8udG9nZ2xlKCk7XG4gIH0pO1xuXG4gICQoJy5pbmZvLWxpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBtZXRhID0gJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIG1ldGEudG9nZ2xlKCk7XG4gIH0pO1xufVxuXG52YXIgc2VhcmNoRmllbGRzID0gJCgnZm9ybSAuc2VhcmNoLWZpZWxkJyk7XG5cbmlmIChzZWFyY2hGaWVsZHMubGVuZ3RoID4gMCkge1xuXG4gIHZhciBsb2FkZXIgPSAkKCc8c3BhbiAvPicpLmFkZENsYXNzKCdsb2FkZXIgc3Bpbm5lci1pbmxpbmUnKTtcbiAgdmFyIGIxID0gJCgnPHNwYW4gLz4nKS5hZGRDbGFzcygnYmFsbCBiLTEnKTtcbiAgdmFyIGIyID0gJCgnPHNwYW4gLz4nKS5hZGRDbGFzcygnYmFsbCBiLTInKTtcbiAgbG9hZGVyLmFwcGVuZChiMSkuYXBwZW5kKGIyKTtcblxuICBzZWFyY2hGaWVsZHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZvcm0gPSAkKHRoaXMpLnBhcmVudCgpO1xuICAgIHZhciBidXR0b24gPSBmb3JtLmZpbmQoJ2J1dHRvbicpO1xuICAgIGZvcm0ub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGJ1dHRvbi5hZnRlcihsb2FkZXIpLmhpZGUoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbnZhciByZWRpcmVjdCA9ICQoJyNyZWRpcmVjdC11cmwnKTtcblxuJCgnI2FkZC1yZWRpcmVjdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAkKCc8cCBjbGFzcz1cImdvdnVrLWJvZHlcIj48bGFiZWwgZm9yPVwicmVkaXJlY3QtdXJsXCI+PGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGlucHV0Q29uZmlnXCIgbmFtZT1cInJlZGlyZWN0X3VyaXNcIj48L2xhYmVsPjwvcD4nKS5hcHBlbmRUbyhyZWRpcmVjdCk7XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG52YXIgbG9nb3V0ID0gJCgnI2xvZ291dC11cmwnKTtcblxuJCgnI2FkZC1sb2dvdXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgJCgnPHAgY2xhc3M9XCJnb3Z1ay1ib2R5XCI+PGxhYmVsIGZvcj1cImxvZ291dC11cmxcIj48aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2wgaW5wdXRDb25maWdcIiBuYW1lPVwicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpc1wiPjwvbGFiZWw+PC9wPicpLmFwcGVuZFRvKGxvZ291dCk7XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG5cbiQoJyNnZW5lcmF0ZS1jbGllbnQtc2VjcmV0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gIHZhciBzZWNyZXRBcnJheSA9IHdpbmRvdy5uaWNld2FyZS5nZW5lcmF0ZVBhc3NwaHJhc2UoOCk7XG4gIHZhciBzZWNyZXQgPSBzZWNyZXRBcnJheS5qb2luKCctJyk7XG4gIHZhciBpc0NvbmZpcm0gPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVnZW5lcmF0ZSB0aGUgY2xpZW50IHNlY3JldD8nKTtcbiAgaWYgKGlzQ29uZmlybSkge1xuICAgICQoJ2lucHV0I2NsaWVudFNlY3JldCcpLmF0dHIoJ3ZhbHVlJywgc2VjcmV0KTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59KTtcblxuJCgnI2dlbmVyYXRlLWFwaS1zZWNyZXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgdmFyIHNlY3JldEFycmF5ID0gd2luZG93Lm5pY2V3YXJlLmdlbmVyYXRlUGFzc3BocmFzZSg4KTtcbiAgdmFyIHNlY3JldCA9IHNlY3JldEFycmF5LmpvaW4oJy0nKTtcbiAgdmFyIGlzQ29uZmlybSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZWdlbmVyYXRlIHRoZSBhcGkgc2VjcmV0PycpO1xuICBpZiAoaXNDb25maXJtKSB7XG4gICAgJCgnaW5wdXQjYXBpU2VjcmV0JykuYXR0cigndmFsdWUnLCBzZWNyZXQpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG52YXIgZm9ybVJlZ2lzdGVyID0gJCgnLnByZXZlbnQtZm9ybS1kb3VibGUtc3VibWlzc2lvbicpO1xuXG5pZiAoZm9ybVJlZ2lzdGVyLmxlbmd0aCA+IDApIHtcbiAgZm9ybVJlZ2lzdGVyLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciAkc3VibWl0QnV0dG9ucyA9ICQoZm9ybVJlZ2lzdGVyKS5maW5kKCdidXR0b246c3VibWl0JyksICRzdWJtaXRCdXR0b24gPSAkc3VibWl0QnV0dG9ucy5lcSgwKTtcbiAgICBmb3JtUmVnaXN0ZXIub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICRzdWJtaXRCdXR0b25zLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICRzdWJtaXRCdXR0b24uY3NzKCdtaW4td2lkdGgnLCAkc3VibWl0QnV0dG9uLm91dGVyV2lkdGgoKSArICdweCcpO1xuXG4gICAgICAkc3VibWl0QnV0dG9uLmFwcGVuZChcIjxzcGFuIGNsYXNzPSdsb2FkZXIgc3Bpbm5lci1pbmxpbmUnPiA8c3BhbiBjbGFzcz0nYmFsbCBiLTEnPjwvc3Bhbj4gPHNwYW4gY2xhc3M9J2JhbGwgYi0yJz48L3NwYW4+IDxzcGFuIGNsYXNzPSdiYWxsIGItMyc+PC9zcGFuPiA8L3NwYW4+XCIpO1xuXG4gICAgfSk7XG4gIH0pO1xufVxuXG52YXIgc2hvd0hpZGVDb250ZW50ID0gbmV3IEdPVlVLLlNob3dIaWRlQ29udGVudCgpXG5zaG93SGlkZUNvbnRlbnQuaW5pdCgpXG5cbkdPVlVLLmRldGFpbHMuaW5pdCgpXG5cbiJdfQ==
