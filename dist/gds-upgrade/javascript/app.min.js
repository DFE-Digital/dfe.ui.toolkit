var COOKIE_NAMES={PREFERENCES_SET:"cookies_preferences_set",POLICY:"cookies_policy",GA:"_ga",GA_GID:"_gid",GA_GAT:"_gat",USER_BANNER_LAST_SEEN:"user_banner_last_seen"},GOVUK_COOKIE_OPTIONS={expires:365,secure:!0,domain:".education.gov.uk"},GovUKCookie={getRaw:function(e){if(window.Cookies)return window.Cookies.get(e)},get:function(e){if(window.Cookies){var t=window.Cookies.get(e);return t?JSON.parse(t):t}},set:function(e,t){if(window.Cookies)return window.Cookies.set(e,t,GOVUK_COOKIE_OPTIONS)},remove:function(e){if(window.Cookies)return window.Cookies.remove(e,GOVUK_COOKIE_OPTIONS)}};function checkConditionForUsersBanner(){var e=GovUKCookie.getRaw(COOKIE_NAMES.USER_BANNER_LAST_SEEN);return!e||((new Date).getTime()-e)/864e5>90}function showReviewUsersBanner(){$("#review-users-banner").show()}function setReviewUsersBannerLastSeen(){GovUKCookie.set(COOKIE_NAMES.USER_BANNER_LAST_SEEN,(new Date).getTime())}function loadReviewUsersBanner(){checkConditionForUsersBanner()&&showReviewUsersBanner()}function updateCookieReviewUsersBanner(){checkConditionForUsersBanner()&&setReviewUsersBannerLastSeen()}GovUKCookie.remove(COOKIE_NAMES.POLICY),GovUKCookie.remove(COOKIE_NAMES.PREFERENCES_SET),GovUKCookie.remove(COOKIE_NAMES.GA),GovUKCookie.remove(COOKIE_NAMES.GA_GAT),GovUKCookie.remove(COOKIE_NAMES.GA_GID),function(e){"use strict";var t=e.GOVUK||{};t.details={NATIVE_DETAILS:"boolean"==typeof document.createElement("details").open,KEY_ENTER:13,KEY_SPACE:32,started:!1,addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,(function(e){n(e,e.target)}),!1):e.attachEvent&&e.attachEvent("on"+t,(function(e){n(e,e.srcElement)}))},removeEvent:function(e,t){e.removeEventListener?e.removeEventListener(t,(function(e){}),!1):e.detachEvent&&e.detachEvent("on"+t,(function(e){}))},charCode:function(e){return"number"==typeof e.which?e.which:e.keyCode},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},addClickEvent:function(e,n){t.details.addEvent(e,"keypress",(function(e,o){t.details.charCode(e)!==t.details.KEY_ENTER&&t.details.charCode(e)!==t.details.KEY_SPACE||"summary"===o.nodeName.toLowerCase()&&(t.details.preventDefault(e),o.click?o.click():n(e,o))})),t.details.addEvent(e,"keyup",(function(e,n){t.details.charCode(e)===t.details.KEY_SPACE&&"SUMMARY"===n.nodeName&&t.details.preventDefault(e)})),t.details.addEvent(e,"click",(function(e,t){n(e,t)}))},getAncestor:function(e,t){do{if(!e||e.nodeName.toLowerCase()===t)break;e=e.parentNode}while(e);return e},addDetailsPolyfill:function(e,n){if(n=n||document.body,!t.details.started&&(t.details.started=!0,0!==(e=n.getElementsByTagName("details")).length)){for(var o=e.length,a=0;a<o;a++){var i=e[a];if(i.__summary=i.getElementsByTagName("summary").item(0),i.__content=i.getElementsByTagName("div").item(0),!i.__summary||!i.__content)return;i.__content.id||(i.__content.id="details-content-"+a),i.setAttribute("role","group"),i.__summary.setAttribute("role","button"),i.__summary.setAttribute("aria-controls",i.__content.id),t.details.NATIVE_DETAILS||(i.__summary.tabIndex=0);var r=null!==i.getAttribute("open");if(!0===r?(i.__summary.setAttribute("aria-expanded","true"),i.__content.setAttribute("aria-hidden","false")):(i.__summary.setAttribute("aria-expanded","false"),i.__content.setAttribute("aria-hidden","true"),t.details.NATIVE_DETAILS||(i.__content.style.display="none")),i.__summary.__details=i,!t.details.NATIVE_DETAILS){var s=document.createElement("i");!0===r?(s.className="arrow arrow-open",s.appendChild(document.createTextNode("▼"))):(s.className="arrow arrow-closed",s.appendChild(document.createTextNode("►"))),i.__summary.__twisty=i.__summary.insertBefore(s,i.__summary.firstChild),i.__summary.__twisty.setAttribute("aria-hidden","true")}}t.details.addClickEvent(n,(function(e,n){return!(n=t.details.getAncestor(n,"summary"))||t.details.statechange(n)}))}},statechange:function(e){var n="true"===e.__details.__summary.getAttribute("aria-expanded"),o="true"===e.__details.__content.getAttribute("aria-hidden");(e.__details.__summary.setAttribute("aria-expanded",n?"false":"true"),e.__details.__content.setAttribute("aria-hidden",o?"false":"true"),t.details.NATIVE_DETAILS)||(e.__details.__content.style.display=n?"none":"",null!==e.__details.getAttribute("open")?e.__details.removeAttribute("open"):e.__details.setAttribute("open","open"));return e.__twisty&&(e.__twisty.firstChild.nodeValue=n?"►":"▼",e.__twisty.setAttribute("class",n?"arrow arrow-closed":"arrow arrow-open")),!0},destroy:function(e){t.details.removeEvent(e,"click")},init:function(e){t.details.addEvent(document,"DOMContentLoaded",t.details.addDetailsPolyfill),t.details.addEvent(window,"load",t.details.addDetailsPolyfill)}},e.GOVUK=t}(window);var NSA=NSA||{},filterBoxes=$(".filter-box");function toKebabCase(e){return e.toLowerCase().replace(/\s+/g,"-")}function updateCount(e){const t=toKebabCase(e),n=$(`.${t} .govuk-checkboxes__input:checked`).length;$(`#${t}-count`).text(n)}function updateCategoryHeader(e){const t=toKebabCase(e),n=$(`#${t}-text`),o=$(`input[id^='show-hide-${t}']:checked`).length>0;n.css("display",o?"block":"none")}function updateNoFilterMessage(){const e=$(".govuk-checkboxes__input.dfe-filter-input:checked").length>0;$("#show-hide-selected-filters").css("display",e?"none":"block")}function showMe(e,t,n){const o=$(`#${n}`).prop("checked");$(`#${e}`).css("display",o?"block":"none"),updateCategoryHeader(t),updateNoFilterMessage()}function hideMe(e,t,n){$(`#${e}`).hide(),$(`#${n}`).prop("checked",!1),updateCount(t),updateCategoryHeader(t),updateNoFilterMessage()}function initializeFilters(){$(".govuk-checkboxes__input.dfe-filter-input").each((function(){if($(this).prop("checked")){const e=$(this).attr("id"),t=e.match(/show-hide-(.+)-(\d+)/);if(t&&3===t.length){const n=t[1];showMe(`${n}-option-${t[2]}`,n,e),updateCount(n),updateCategoryHeader(n),updateNoFilterMessage()}}}))}NSA.filters={init:function(){filterBoxes.each((function(){var e=$(this),t=e.find(".container-head"),n=t.find(".option-select-label"),o=e.find("input:checkbox"),a=$("<button />").addClass("js-container-head"),i=$("<div />").addClass("js-selected-counter");a.on("click",(function(e){var t=$(this).next();$(this).hasClass("closed")?(t.show(),$(this).removeClass("closed").attr("aria-expanded",!0)):(t.hide(),$(this).addClass("closed").attr("aria-expanded",!1)),e.preventDefault()})).append(n,i),t.replaceWith(a),o.on("change",(function(){i.text((function(){return o.filter(":checked").length>0?o.filter(":checked").length+" selected":""}))}))}))}},filterBoxes.length>0&&NSA.filters.init(),$(document).ready((()=>{initializeFilters()})),(NSA=NSA||{}).modal={elems:{links:$(".modal-link"),modals:$(".modal")},init:function(){this.modalBg(),this.setUpEvents()},modalBg:function(){var e=this,t=$("<div>").addClass("modal-bg").hide().on("click",(function(){e.hideModals()}));$("body").append(t)},setUpEvents:function(){var e=this;this.elems.links.on("click",(function(t){var n=$(this).attr("href");e.showModal($(n)),t.preventDefault()})),e.elems.modals.find(".close").on("click",(function(t){e.hideModals(),t.preventDefault()})),$("body").on("keydown",(function(t){27===(t.keyCode||t.which)&&e.hideModals()}))},showModal:function(e){$("html").addClass("modal-open"),$(".modal-bg").show(),e.show()},hideModals:function(){$("html").removeClass("modal-open"),$(".modal-bg").hide(),this.elems.modals.hide()}},NSA.modal.init();const RESPONSE_TYPE_CODE="code",RESPONSE_TYPE_ID_TOKEN="ID token",RESPONSE_TYPE_TOKEN="token",FLOW_TYPE_IMPLICIT="implicit",FLOW_TYPE_AUTHORISATION="authorisation",FLOW_TYPE_HYBRID="hybrid";function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function sortTable(e){var t,n,o,a,i,r,s,l,d=0;for(t=$("table.sortable"),o=!0,l="a";o;){for(o=!1,n=t.find("tr"),a=1;a<n.length-1;a++)if(s=!1,i=n[a].getElementsByTagName("TD")[e],r=n[a+1].getElementsByTagName("TD")[e],"a"===l){if(i.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){s=!0;break}}else if("d"===l&&i.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){s=!0;break}s?(n[a].parentNode.insertBefore(n[a+1],n[a]),o=!0,d++):0===d&&"a"===l&&(l="d",o=!0)}return l}$((()=>{const e=(e,t,n)=>{const o=$(`#${e}-add`),a=$(`${t}`);o.on("click",(function(){let t=parseInt(a.data(`${e}-counter`),10);const o=`${e}-${t}`;return $(`\n      <div class="govuk-body dfe-flex-container" id="${e}-input-group-${t}">\n        <label for="${o}" class="govuk-label govuk-label--s govuk-visually-hidden">\n          ${n}\n        </label>\n        <input\n          class="form-control dfe-flex-input-grow govuk-input"\n          id="${o}"\n          name="${e}"\n        />\n        <a href="#" class="govuk-link govuk-link--no-visited-state remove-redirect" id="${e}-remove-${t}" data-group-id="${t}">Remove</a>\n      </div>`).appendTo(a),t+=1,a.data(`${e}-counter`,t),$(this).trigger("blur"),!1})),a.on("click",".remove-redirect",(function(t){t.preventDefault();const n=$(this).data("group-id");$(`#${e}-input-group-${n}`).remove(),$(this).trigger("blur");const o=a.find(".dfe-flex-container").length;a.data(`${e}-counter`,o)}))};function t(e,t,n){$(e).on("click",(function(){const e=window.niceware.generatePassphrase(8).join("-");return window.confirm(n)&&$(`input#${t}`).attr("value",e),$(this).trigger("blur"),!1}))}function n(){const e=[];$("#response_types-id_token").is(":checked")&&e.push("ID token"),$("#response_types-token").is(":checked")&&e.push("token"),$("#response_types-code").is(":checked")&&e.push("code");let t="";if(e.length>0){e.sort(((e,t)=>{const n=["code","ID token","token"];return n.indexOf(e)-n.indexOf(t)}));let n="implicit";if(1===e.length&&e.includes("code")?n="authorisation":(e.includes("code")&&e.includes("token")||e.includes("code")&&e.includes("ID token"))&&(n="hybrid"),1===e.length&&e.includes("token"))t="";else{let o;if(e.length>1){o=`${e.slice(0,-1).join(", ")} and ${e[e.length-1]}`}else[o]=e;t=`\n            <div class="govuk-warning-text govuk-!-margin-top-5 govuk-!-margin-bottom-0">\n                <span class="govuk-warning-text__icon" aria-hidden="true">!</span>\n                <strong class="govuk-warning-text__text">\n                    <span class="govuk-warning-text__assistive">Warning</span>\n                    You have selected ${o} as your response type. This means ${n} flow is your flow.\n                </strong>\n            </div>\n        `}}$(".govuk-warning-text").remove(),t&&$("#response_types-fieldset").append(t);const n=$("#response_types-code").offset().top,o=$(window).scrollTop();$("#response_types-code").is(":checked")?($("#refresh_token-wrapper :input, #clientSecret-wrapper :input, #tokenEndpointAuthMethod-wrapper select").prop("disabled",!1),$("#refresh_token-wrapper, #clientSecret-wrapper, #tokenEndpointAuthMethod-wrapper").slideDown(500)):$("#refresh_token-wrapper, #clientSecret-wrapper, #tokenEndpointAuthMethod-wrapper").slideUp(500,(()=>{$("#refresh_token-wrapper :input, #clientSecret-wrapper :input, #tokenEndpointAuthMethod-wrapper select").prop("disabled",!0)}));const a=$("#response_types-code").offset().top-n;$("html, body").animate({scrollTop:o+a},50,"linear")}e("redirect_uris","#redirect_uris-form-group","Redirect URL"),e("post_logout_redirect_uris","#post_logout_redirect_uris-form-group","Logout redirect URL"),t("#generate-clientSecret","clientSecret","Are you sure you want to regenerate the client secret?"),t("#generate-apiSecret","apiSecret","Are you sure you want to regenerate the API secret?"),n(),$("#response_types-id_token, #response_types-token, #response_types-code").on("change",(()=>{n()}))})),function(e){"use strict";var t=e.jQuery,n=e.GOVUK||{};function o(){var e=this,n="ShowHideContent",o='[data-target] > input[type="radio"]',a='[data-target] > input[type="checkbox"]',i="a.js-toggle-content";function r(){var e=t(this),n=s(e);n.length&&(e.attr("aria-controls",n.attr("id")),e.attr("aria-expanded","false"),n.attr("aria-hidden","true"))}function s(e){var n=e.attr("aria-controls");return n||(n=e.closest("[data-target]").data("target")),t("#"+n)}function l(e,t){t.hasClass("js-hidden")&&(t.removeClass("js-hidden"),t.attr("aria-hidden","false"),e.attr("aria-controls")&&e.attr("aria-expanded","true"))}function d(e,t){(t=t||s(e)).hasClass("js-hidden")||(t.addClass("js-hidden"),t.attr("aria-hidden","true"),e.attr("aria-controls")&&e.attr("aria-expanded","false"))}function c(e,n){var a=o+"[name="+(e.attr("name").replace("[","\\[").replace("]","\\]")+"][aria-controls]"),i=e.closest("form");(i.length?i.find(a):t(a)).each((function(){d(t(this))})),e.is("[aria-controls]")&&l(e,n)}function u(e,t){e.is(":checked")?l(e,t):d(e,t)}function p(e,t,n){t.hasClass("js-hidden")?l(e,t):d(e,t),n.preventDefault()}function h(e,o,a,i){function l(e){var n=t(this);i(n,s(n),e)}e=e||t(document.body);var d=t(o);d.each(r),t.each(a,(function(t,o){e.on("click."+n,o,l)})),d.is(":checked")&&d.filter(":checked").each(l)}e.showHideRadioToggledContent=function(e){var n;h(e,o,(n=[],t(o).map((function(){var e=t(this).attr("name");return-1===t.inArray(e,n)?(n.push(e),'input[type="radio"][name="'+t(this).attr("name")+'"]'):null}))),c)},e.showHideCheckboxToggledContent=function(e){h(e,a,[a],u)},e.showHideLinkToggledContent=function(e){h(e,i,[i],p)},e.destroy=function(e){(e=e||t(document.body)).off("."+n)}}o.prototype.init=function(e){this.showHideRadioToggledContent(e),this.showHideCheckboxToggledContent(e),this.showHideLinkToggledContent(e)},n.ShowHideContent=o,e.GOVUK=n}(window),(NSA=NSA||{}).signin={form:$(".form-signin"),init:function(){this.setupEvents()},setupEvents:function(){this.form.on("submit",this,this.handleSubmit)},handleSubmit:function(e){var t=$(this),n=t.find("input").not(":checkbox"),o={},a=$(this).find("button:submit"),i=a.eq(0);a.attr("disabled","disabled"),i.css("min-width",i.outerWidth()+"px"),i.find(".loader").removeClass("vh"),n.each((function(){o[this.name]=$(this).val()})),$(".password-input").each((function(e){$(this).attr("type","password"),$(this).siblings(".show-password").html("Show")})),$.ajax({type:"POST",data:o,url:t.attr("action"),context:e.data,dataType:"json",success:function(e){e.redirect?(window.location.href=e.uri,$("title").html("DfE Sign-in")):e.isFailedLogin?(this.resetValidation(t),$("title").html("Error: DfE Sign-in"),e.delayTill?this.showValidationMessage(e.validationMessages,!0):(this.showValidationMessage(e.validationMessages),a.removeAttr("disabled")),this.showInlineValidation(e.validationMessages),i.find(".loader").addClass("vh")):this.buildFormAndSubmit(e)},error:function(){this.resetValidation(t),this.showValidationMessage(),a.removeAttr("disabled"),i.find(".loader").addClass("vh")}}),e.preventDefault()},resetValidation:function(e){$(".govuk-error-summary").remove(),e.find(".govuk-form-group").each((function(){var e=$(this).find("input").eq(0);$(this).hasClass("govuk-form-group--error")&&($(this).removeClass("govuk-form-group--error"),$(this).find("span.govuk-error-message").remove(),e.removeAttr("aria-describedby").removeAttr("aria-invalid"))}))},showValidationMessage:function(e,t){var n=$("<div />").attr("class","govuk-error-summary govuk-!-margin-top-6").attr("role","alert").attr("tabindex","-1").attr("aria-labelledby","error-summary-title"),o=$("<h2 />").attr("class","govuk-error-summary__title").attr("id","error-summary"),a=$("<div />").attr("class","govuk-error-summary__body"),i=$("<ul />").attr("class","govuk-list govuk-error-summary__list");if(e){if(o.text("There is a problem"),$.each(e,(function(e,t){"loginError"===e&&(e="username");var n=$("<a />").attr("class","govuk-link").attr("href","#"+e).text(t),o=$("<li />").append(n);i.append(o)})),t){var r=$("<a />").attr("class","govuk-link-bold").attr("href","").attr("onclick","window.location.reload()").text("Refresh this page").css("color","#1d70b8"),s=$("<li />").append(r);i.append(s)}}else{o.text("There has been an error");s=$("<li />").html('Please try again later. If the problem continues, follow the link to <a href="https://help.signin.education.gov.uk/contact/form">submit a support request</a>');i.append(s)}n.append(o).append(a.append(i)),$("main").prepend(n),$("html, body").animate({scrollTop:n.offset().top-15},300)},showInlineValidation:function(e){$.each(e,(function(e,t){var n=$("input[name="+e+"]"),o=n.parent(),a=o.find("label").first();if(!o.hasClass("govuk-form-group--error"))var i=$('<span class="govuk-body">').html('<span class="govuk-visually-hidden">Error:</span>'+t).prop("class","govuk-error-message").prop("id","validation-"+e);a.after(i),o.addClass("govuk-form-group--error"),n.attr({"aria-describedby":"validation-"+e,"aria-invalid":"true"})}))},buildFormAndSubmit:function(e){var t=$("<form />").attr({method:"post",action:e.destination,id:"dfesigninform"});$.each(e.postbackData,(function(e,n){var o=$("<input />").attr({type:"hidden",name:e,value:n});t.append(o)})),$("#dfesigninform").remove(),$("body").append(t),t.submit()}},$(".form-signin").length>0&&NSA.signin.init(),$((function(){$("table.sortable thead th").on("click",(function(){var e=$("table.sortable thead tr th");e.removeClass("sorted").removeClass("dir-a").removeClass("dir-d");var t=sortTable(e.index($(this)));$(this).addClass("sorted dir-"+t)}))}));var toggleTips=$(".toggle-help");function validatePassword(){var e=$(this).attr("id"),t=[{Pattern:/(.*[A-Z]){2}/,Target:`upper-case-${e}`},{Pattern:/(.*[a-z]){2}/,Target:`lower-case-${e}`},{Pattern:/(.*\d){2}/,Target:`numbers-${e}`}],n=$(this).val();$(`#length-${e}`).removeClass(n.length>7?"icon-remove":"icon-ok"),$(`#length-${e}`).addClass(n.length>7?"icon-ok":"icon-remove");for(var o=0;o<t.length;o++)$("#"+t[o].Target).removeClass(new RegExp(t[o].Pattern).test(n)?"icon-remove":"icon-ok"),$("#"+t[o].Target).addClass(new RegExp(t[o].Pattern).test(n)?"icon-ok":"icon-remove")}toggleTips.each((function(){var e,t,n,o;e=$(this),n=$("<span />").attr("class","toggletip"),o=$("<button />").attr("type","button").attr("aria-label","Help").attr("data-toggletip-content",e.html()).text("?").on("click",(function(){var t=$(this).data("toggletip-content"),n=$(this).next();window.setTimeout((function(){n.html((function(){return $("<span />").attr("class",(function(){return e.html().length>50?"bubble long":"bubble"})).text(t)}))}),100)})).on("keydown",(function(e){27===(e.keyCode||e.which)&&t.html("")})),t=$("<span />").attr("role","status"),n.append(o,t),e.before(n).remove(),$(document).on("click",(function(n){e[0]!==$(n.target)&&t.html("")}))})),$(".password-input-check").each((function(e,t){var n=$(this),o=n.attr("id"),a=$(`<div id='validation-feedback-${o}'>`).append(`<div id='length-${o}' class='icon-remove'>8 characters minimum</div>`).append(`<div id='upper-case-${o}' class='icon-remove'>contain at least 2 upper-case characters</div>`).append(`<div id='lower-case-${o}' class='icon-remove'>contain at least 2 lower-case characters</div>`).append(`<div id='numbers-${o}' class='icon-remove' style='margin-bottom: 6px;'>contain at least 2 numbers</div>`);n.before(a)})),$(".password-input-check").on("keyup",validatePassword);var forms=$("#content form");forms.attr("novalidate","novalidate");NSA=NSA||{};function select2ModelMatcher(e,t){if(t.parentText=t.parentText||"",void 0===e.term||!e.term||""===e.term.trim())return t;if(t.children&&t.children.length>0){for(var n=$.extend(!0,{},t),o=t.children.length-1;o>=0;o--){var a=t.children[o];a.parentText+=t.parentText+" "+t.text,null==select2ModelMatcher(e,a)&&n.children.splice(o,1)}return n.children.length>0?n:select2ModelMatcher(e,n)}var i=(t.parentText+" "+t.text).toUpperCase(),r=e.term.toUpperCase();return i.indexOf(r)>-1?t:null}NSA={initialiseShowPassword:function(){$(".password-input").each((function(e){var t=$(this),n=$("<button />").prop({type:"button",class:"show-password govuk-button govuk-button--secondary govuk-!-margin-bottom-1",ariaLabel:ariaLabel="Show password"});n.html("Show"),n.on("click",(function(){"password"===t.attr("type")?(t.attr("type","text"),n.text("Hide")):(t.attr("type","password"),n.text("Show"))})),t.after(n)}))},backLink:function(){var e=$("<a>").attr({href:"#",class:"govuk-back-link-bold"}).text("Back").on("click",(function(e){window.history.back(),e.preventDefault()}));$(".js-back-link").html(e)}},$("select.select2").length>0&&$("select.select2").select2({matcher:select2ModelMatcher}),$(".password-input").length>0&&NSA.initialiseShowPassword(),$(".js-back-link")&&NSA.backLink(),$(".under-construction").on("click",(function(e){alert("This functionality is not available yet"),e.preventDefault()})),$(".notification span.icon").length>0&&$(".notification span.icon").on("click",(function(){$(this).parent().hide()})),$("article.organisation-services").length>0&&($(".information").on("click",(function(e){var t=$(this).parent().parent().find(".service-description");e.preventDefault(),t.toggle()})),$(".info-link").on("click",(function(e){var t=$(this).parent().next();e.preventDefault(),t.toggle()})));var searchFields=$("form .search-field");if(searchFields.length>0){var loader=$("<span />").addClass("loader spinner-inline"),b1=$("<span />").addClass("ball b-1"),b2=$("<span />").addClass("ball b-2");loader.append(b1).append(b2),searchFields.each((function(){var e=$(this).parent(),t=e.find("button");e.on("submit",(function(){t.after(loader).hide()}))}))}var formRegister=$(".prevent-form-double-submission");formRegister.length>0&&formRegister.each((function(){var e=$(formRegister).find("button:submit"),t=e.eq(0);formRegister.on("submit",(function(){e.attr("disabled","disabled"),t.css("min-width",t.outerWidth()+"px"),t.append("<span class='loader spinner-inline'> <span class='ball b-1'></span> <span class='ball b-2'></span> <span class='ball b-3'></span> </span>")}))})),$(".auto-scroll-on-change").on("change",(function(e){$(window).scrollTop($(".auto-scroll-dest").position().top)})),$(".close-button").on("click",(function(e){e.target.closest(".govuk-notification-banner").remove()})),$(".toggle-open").on("click",(function(e){var t=$(this).next();e.preventDefault(),t.removeClass("govuk-visually-hidden"),$(this).addClass("govuk-visually-hidden")}));var timeoutTimer,tabId=(new Date).getTime();function sessionTimeout(){localStorage.removeItem("uri"),window.onfocus=function(){countTimeDiff()},setTimeout((function(){localStorage.setItem("tabs","1"),$(".session-timeout-overlay").show(),$("#modal-signin").focus(),startTimer()}),826e3)}function startTimer(){var e="4 minutes and 60 seconds";timeoutTimer=setInterval((function(){"0"===localStorage.getItem("tabs")&&(clearInterval(timeoutTimer),location.reload());var t=e.split("and"),n=parseInt(t[0],10),o=parseInt(t[1],10);n=--o<0?--n:n,o=(o=o<0?59:o)<10?"0"+o:o,$("#minutes").html(n),$("#seconds").html(o),n<0||o<=0&&n<=0?callTimeout():tabId&&countTimeDiff(),e=n+" minutes and "+o+" seconds"}),1e3)}function callTimeout(){clearInterval(timeoutTimer),localStorage.setItem("uri",location.pathname),location.href="/signout"}function countTimeDiff(){((new Date).getTime()-Number(tabId))/6e4>20&&(localStorage.setItem("uri",location.pathname),clearInterval(timeoutTimer),location.reload())}$("#modal-signin").on("click",(()=>{clearInterval(timeoutTimer),localStorage.setItem("tabs","0"),location.reload()})),$("#modal-signout").on("click",(()=>{clearInterval(timeoutTimer),location.href="/signout"}));var showHideContent=new GOVUK.ShowHideContent;showHideContent.init(),GOVUK.details.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb29raWVzLmpzIiwiX2RldGFpbHMucG9seWZpbGwuanMiLCJfZmlsdGVyLWJveGVzLmpzIiwiX2ZpbHRlcnMuanMiLCJfbW9kYWwuanMiLCJfc2VydmljZUNvbmZpZ0Zvcm0uanMiLCJfc2lnbmluLmpzIiwiX3RhYmxlc29ydC5qcyIsIl9zaG93LWhpZGUtY29udGVudC5qcyIsIl90b29sdGlwLmpzIiwiX3ZhbGlkYXRlLXBhc3N3b3JkLmpzIiwiX3ZhbGlkYXRpb24uanMiLCJhcHAuanMiXSwibmFtZXMiOlsiQ09PS0lFX05BTUVTIiwiUFJFRkVSRU5DRVNfU0VUIiwiUE9MSUNZIiwiR0EiLCJHQV9HSUQiLCJHQV9HQVQiLCJVU0VSX0JBTk5FUl9MQVNUX1NFRU4iLCJHT1ZVS19DT09LSUVfT1BUSU9OUyIsImV4cGlyZXMiLCJzZWN1cmUiLCJkb21haW4iLCJHb3ZVS0Nvb2tpZSIsImdldFJhdyIsIm5hbWUiLCJ3aW5kb3ciLCJDb29raWVzIiwiZ2V0IiwidmFsdWUiLCJKU09OIiwicGFyc2UiLCJzZXQiLCJyZW1vdmUiLCJjaGVja0NvbmRpdGlvbkZvclVzZXJzQmFubmVyIiwibGFzdFNlZW4iLCJEYXRlIiwiZ2V0VGltZSIsInNob3dSZXZpZXdVc2Vyc0Jhbm5lciIsIiQiLCJzaG93Iiwic2V0UmV2aWV3VXNlcnNCYW5uZXJMYXN0U2VlbiIsImxvYWRSZXZpZXdVc2Vyc0Jhbm5lciIsInVwZGF0ZUNvb2tpZVJldmlld1VzZXJzQmFubmVyIiwiZ2xvYmFsIiwiR09WVUsiLCJkZXRhaWxzIiwiTkFUSVZFX0RFVEFJTFMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJvcGVuIiwiS0VZX0VOVEVSIiwiS0VZX1NQQUNFIiwic3RhcnRlZCIsImFkZEV2ZW50Iiwibm9kZSIsInR5cGUiLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiYXR0YWNoRXZlbnQiLCJzcmNFbGVtZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJjaGFyQ29kZSIsIndoaWNoIiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJhZGRDbGlja0V2ZW50Iiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImNsaWNrIiwiZ2V0QW5jZXN0b3IiLCJtYXRjaCIsInBhcmVudE5vZGUiLCJhZGREZXRhaWxzUG9seWZpbGwiLCJsaXN0IiwiY29udGFpbmVyIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwibiIsImkiLCJfX3N1bW1hcnkiLCJpdGVtIiwiX19jb250ZW50IiwiaWQiLCJzZXRBdHRyaWJ1dGUiLCJ0YWJJbmRleCIsIm9wZW5BdHRyIiwiZ2V0QXR0cmlidXRlIiwic3R5bGUiLCJkaXNwbGF5IiwiX19kZXRhaWxzIiwidHdpc3R5IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsIl9fdHdpc3R5IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInN1bW1hcnkiLCJzdGF0ZWNoYW5nZSIsImV4cGFuZGVkIiwiaGlkZGVuIiwicmVtb3ZlQXR0cmlidXRlIiwibm9kZVZhbHVlIiwiZGVzdHJveSIsImluaXQiLCIkY29udGFpbmVyIiwiTlNBIiwiZmlsdGVyQm94ZXMiLCJ0b0tlYmFiQ2FzZSIsInN0ciIsInJlcGxhY2UiLCJ1cGRhdGVDb3VudCIsImNhdGVnb3J5TmFtZSIsInNhZmVDYXRlZ29yeU5hbWUiLCJjaGVja2VkQ291bnQiLCJ0ZXh0IiwidXBkYXRlQ2F0ZWdvcnlIZWFkZXIiLCJjYXRlZ29yeUhlYWRlciIsImlzQW55Q2hlY2tlZEluQ2F0ZWdvcnkiLCJjc3MiLCJ1cGRhdGVOb0ZpbHRlck1lc3NhZ2UiLCJpc0FueUNoZWNrZWRHbG9iYWwiLCJzaG93TWUiLCJib3hJZCIsImNoZWNrZWRFbGVtZW50SWQiLCJpc0NoZWNrZWQiLCJwcm9wIiwiaGlkZU1lIiwibGlzdElkIiwiY2hlY2tib3hJZCIsImhpZGUiLCJpbml0aWFsaXplRmlsdGVycyIsImVhY2giLCJ0aGlzIiwiYXR0ciIsInBhcnRzIiwiZmlsdGVycyIsIiR0aGF0IiwiaGVhZGVyIiwiZmluZCIsInRpdGxlIiwiY2hlY2tib3hlcyIsImJ1dHRvbiIsImFkZENsYXNzIiwiY2hlY2tDb3VudCIsIm9uIiwib3B0aW9ucyIsIm5leHQiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYXBwZW5kIiwicmVwbGFjZVdpdGgiLCJmaWx0ZXIiLCJyZWFkeSIsIm1vZGFsIiwiZWxlbXMiLCJsaW5rcyIsIm1vZGFscyIsIm1vZGFsQmciLCJzZXRVcEV2ZW50cyIsInRoYXQiLCJiZyIsImhpZGVNb2RhbHMiLCJzaG93TW9kYWwiLCJSRVNQT05TRV9UWVBFX0NPREUiLCJSRVNQT05TRV9UWVBFX0lEX1RPS0VOIiwiUkVTUE9OU0VfVFlQRV9UT0tFTiIsIkZMT1dfVFlQRV9JTVBMSUNJVCIsIkZMT1dfVFlQRV9BVVRIT1JJU0FUSU9OIiwiRkxPV19UWVBFX0hZQlJJRCIsImdldFBhcmFtZXRlckJ5TmFtZSIsInVybCIsImxvY2F0aW9uIiwiaHJlZiIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic29ydFRhYmxlIiwidGFibGUiLCJyb3dzIiwic3dpdGNoaW5nIiwieCIsInkiLCJzaG91bGRTd2l0Y2giLCJkaXJlY3Rpb24iLCJzd2l0Y2hjb3VudCIsImlubmVySFRNTCIsImNyZWF0ZVNlcnZpY2VDb25maWdVcmxTZWN0aW9ucyIsInNlY3Rpb25JZCIsImZvcm1Hcm91cFNlbGVjdG9yIiwibGFiZWxUZXh0IiwiYWRkQnV0dG9uIiwiZm9ybUdyb3VwIiwiY291bnRlciIsInBhcnNlSW50IiwiZGF0YSIsIm5ld0lucHV0SWQiLCJhcHBlbmRUbyIsInRyaWdnZXIiLCJncm91cElkIiwibmV3Q291bnRlciIsImhhbmRsZVNlY3JldEdlbmVyYXRpb24iLCJldmVudElkIiwiaW5wdXRJZCIsImNvbmZpcm1NZXNzYWdlIiwic2VjcmV0IiwibmljZXdhcmUiLCJnZW5lcmF0ZVBhc3NwaHJhc2UiLCJqb2luIiwiY29uZmlybSIsInVwZGF0ZVNlY3Rpb25zIiwic2VsZWN0ZWRUeXBlcyIsImlzIiwicHVzaCIsIndhcm5pbmdNZXNzYWdlIiwic29ydCIsImEiLCJiIiwib3JkZXIiLCJpbmRleE9mIiwiZmxvd1R5cGUiLCJpbmNsdWRlcyIsInNlbGVjdGVkVHlwZXNEaXNwbGF5Iiwic2xpY2UiLCJpbml0aWFsT2Zmc2V0Iiwib2Zmc2V0IiwidG9wIiwiaW5pdGlhbFNjcm9sbFBvc2l0aW9uIiwic2Nyb2xsVG9wIiwic2xpZGVEb3duIiwic2xpZGVVcCIsIm9mZnNldERpZmZlcmVuY2UiLCJhbmltYXRlIiwialF1ZXJ5IiwiU2hvd0hpZGVDb250ZW50Iiwic2VsZiIsInNlbGVjdG9ycyIsImluaXRUb2dnbGVkQ29udGVudCIsIiRjb250cm9sIiwiJGNvbnRlbnQiLCJnZXRUb2dnbGVkQ29udGVudCIsImNsb3Nlc3QiLCJzaG93VG9nZ2xlZENvbnRlbnQiLCJoaWRlVG9nZ2xlZENvbnRlbnQiLCJoYW5kbGVSYWRpb0NvbnRlbnQiLCJzZWxlY3RvciIsIiRmb3JtIiwiaGFuZGxlQ2hlY2tib3hDb250ZW50IiwiaGFuZGxlTGlua0NvbnRlbnQiLCIkZXZlbnQiLCJlbGVtZW50U2VsZWN0b3IiLCJldmVudFNlbGVjdG9ycyIsImhhbmRsZXIiLCJkZWZlcnJlZCIsImV2ZW50IiwiJGNvbnRyb2xzIiwiaWR4IiwiZXZlbnRTZWxlY3RvciIsInNob3dIaWRlUmFkaW9Ub2dnbGVkQ29udGVudCIsInJhZGlvR3JvdXBzIiwibWFwIiwiZ3JvdXBOYW1lIiwiaW5BcnJheSIsInNob3dIaWRlQ2hlY2tib3hUb2dnbGVkQ29udGVudCIsInNob3dIaWRlTGlua1RvZ2dsZWRDb250ZW50Iiwib2ZmIiwicHJvdG90eXBlIiwic2lnbmluIiwiZm9ybSIsInNldHVwRXZlbnRzIiwiaGFuZGxlU3VibWl0IiwiJGlucHV0cyIsIm5vdCIsInBvc3REYXRhIiwiJHN1Ym1pdEJ1dHRvbnMiLCIkc3VibWl0QnV0dG9uIiwiZXEiLCJvdXRlcldpZHRoIiwidmFsIiwic2libGluZ3MiLCJodG1sIiwiYWpheCIsImNvbnRleHQiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZWRpcmVjdCIsInVyaSIsImlzRmFpbGVkTG9naW4iLCJyZXNldFZhbGlkYXRpb24iLCJkZWxheVRpbGwiLCJzaG93VmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZXMiLCJyZW1vdmVBdHRyIiwic2hvd0lubGluZVZhbGlkYXRpb24iLCJidWlsZEZvcm1BbmRTdWJtaXQiLCJlcnJvciIsIiRmaWVsZCIsIm1lc3NhZ2VzIiwic2hvd1JlZnJlc2hMaW5rIiwiJGRpdiIsIiRoMiIsIiR1bENvbnRhaW5lciIsIiR1bCIsImluZGV4IiwiJGEiLCIkbGkiLCJwcmVwZW5kIiwiJHBhcmVudCIsInBhcmVudCIsIiRsYWJlbCIsImZpcnN0IiwiZXJyb3JNZXNzYWdlIiwiYWZ0ZXIiLCJtZXRob2QiLCJhY3Rpb24iLCJkZXN0aW5hdGlvbiIsInBvc3RiYWNrRGF0YSIsInN1Ym1pdCIsImhlYWRpbmdDZWxscyIsInRvZ2dsZVRpcHMiLCJ2YWxpZGF0ZVBhc3N3b3JkIiwicnVsZXMiLCJQYXR0ZXJuIiwiVGFyZ2V0IiwicGFzc3dvcmQiLCJ0ZXN0IiwibGl2ZVJlZ2lvbiIsInRvZ2dsZVRpcCIsIm1lc3NhZ2UiLCJzZXRUaW1lb3V0IiwiYmVmb3JlIiwiZWxlbWVudCIsIiRwYXNzd29yZElucHV0IiwidmFsaWRhdGVQYXNzd29yZEh0bWwiLCJmb3JtcyIsInNlbGVjdDJNb2RlbE1hdGNoZXIiLCJwYXJhbXMiLCJwYXJlbnRUZXh0IiwidGVybSIsInRyaW0iLCJjaGlsZHJlbiIsImV4dGVuZCIsImMiLCJjaGlsZCIsInNwbGljZSIsIm9yaWdpbmFsIiwidG9VcHBlckNhc2UiLCJpbml0aWFsaXNlU2hvd1Bhc3N3b3JkIiwiJHNob3dCdXR0b24iLCJjbGFzcyIsImFyaWFMYWJlbCIsImJhY2tMaW5rIiwiaGlzdG9yeSIsImJhY2siLCJzZWxlY3QyIiwibWF0Y2hlciIsImFsZXJ0IiwiaW5mbyIsInRvZ2dsZSIsIm1ldGEiLCJzZWFyY2hGaWVsZHMiLCJsb2FkZXIiLCJiMSIsImIyIiwiZm9ybVJlZ2lzdGVyIiwicG9zaXRpb24iLCJ0aW1lb3V0VGltZXIiLCJ0YWJJZCIsInNlc3Npb25UaW1lb3V0IiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsIm9uZm9jdXMiLCJjb3VudFRpbWVEaWZmIiwic2V0SXRlbSIsImZvY3VzIiwic3RhcnRUaW1lciIsInRpbWVQbGFjZUhvbGRlciIsInNldEludGVydmFsIiwiZ2V0SXRlbSIsImNsZWFySW50ZXJ2YWwiLCJyZWxvYWQiLCJ0aW1lciIsInNwbGl0IiwibWludXRlcyIsInNlY29uZHMiLCJjYWxsVGltZW91dCIsInBhdGhuYW1lIiwiTnVtYmVyIiwic2hvd0hpZGVDb250ZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxhQUFBLENBQ0FDLGdCQUFBLDBCQUNBQyxPQUFBLGlCQUNBQyxHQUFBLE1BQ0FDLE9BQUEsT0FDQUMsT0FBQSxPQUNBQyxzQkFBQSx5QkFHQUMscUJBQUEsQ0FDQUMsUUFBQSxJQUNBQyxRQUFBLEVBQ0FDLE9BQUEscUJBR0FDLFlBQUEsQ0FDQUMsT0FBQSxTQUFBQyxHQUNBLEdBQUFDLE9BQUFDLFFBSUEsT0FBQUQsT0FBQUMsUUFBQUMsSUFBQUgsSUFFQUcsSUFBQSxTQUFBSCxHQUNBLEdBQUFDLE9BQUFDLFFBQUEsQ0FJQSxJQUFBRSxFQUFBSCxPQUFBQyxRQUFBQyxJQUFBSCxHQUNBLE9BQUFJLEVBQ0FDLEtBQUFDLE1BQUFGLEdBRUFBLElBRUFHLElBQUEsU0FBQVAsRUFBQUksR0FDQSxHQUFBSCxPQUFBQyxRQUlBLE9BQUFELE9BQUFDLFFBQUFLLElBQ0FQLEVBQ0FJLEVBQ0FWLHVCQUdBYyxPQUFBLFNBQUFSLEdBQ0EsR0FBQUMsT0FBQUMsUUFJQSxPQUFBRCxPQUFBQyxRQUFBTSxPQUNBUixFQUNBTix3QkFvQkEsU0FBQWUsK0JB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LEdBQUEsR0FBQUQsR0FBQSxFQUNBRSxjQUNBbEIsT0FDQUssZ0JBR0FJLEVBQUFPLEVBQUEsZ0JBQUFDLEVBQUEsYUFDQSxLQUdBLFNBQUFDLGNBQ0FOLGNBQUFiLGNBQ0FHLGFBQUFJLFFBQUEsTUFBQTFNLFNBQUF1TixVQUNBdk4sU0FBQUMsS0FBQSxXQUdBLFNBQUF3TSxrQkFDQSxJQUFBeFYsTUFBQUMsVUFBQXNXLE9BQUFwQixRQUNBLElBRUEsS0FDQUUsYUFBQUksUUFBQSxNQUFBMU0sU0FBQXVOLFVBQ0FQLGNBQUFiLGNBQ0FuTSxTQUFBaU4sVUF6REE3VixFQUFBLGlCQUFBaUgsR0FBQSxTQUFBLEtBQ0EyTyxjQUFBYixjQUNBRyxhQUFBSSxRQUFBLE9BQUEsS0FDQTFNLFNBQUFpTixZQUdBN1YsRUFBQSxrQkFBQWlILEdBQUEsU0FBQSxLQUNBMk8sY0FBQWIsY0FDQW5NLFNBQUFDLEtBQUEsY0F1REEsSUFBQXdOLGdCQUFBLElBQUEvVixNQUFBcU0sZ0JBQ0EwSixnQkFBQTdSLE9BRUFsRSxNQUFBQyxRQUFBaUUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBDT09LSUVfTkFNRVMgPSB7XG4gIFBSRUZFUkVOQ0VTX1NFVDogJ2Nvb2tpZXNfcHJlZmVyZW5jZXNfc2V0JyxcbiAgUE9MSUNZOiAnY29va2llc19wb2xpY3knLFxuICBHQTogJ19nYScsXG4gIEdBX0dJRDogJ19naWQnLFxuICBHQV9HQVQ6ICdfZ2F0JyxcbiAgVVNFUl9CQU5ORVJfTEFTVF9TRUVOOiAndXNlcl9iYW5uZXJfbGFzdF9zZWVuJ1xufTtcblxudmFyIEdPVlVLX0NPT0tJRV9PUFRJT05TID0ge1xuICBleHBpcmVzOiAzNjUsIC8vIGRheXNcbiAgc2VjdXJlOiB0cnVlLFxuICBkb21haW46ICcuZWR1Y2F0aW9uLmdvdi51aydcbn07XG5cbnZhciBHb3ZVS0Nvb2tpZSA9IHtcbiAgZ2V0UmF3OiBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuZ2V0KG5hbWUpO1xuICB9LFxuICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHdpbmRvdy5Db29raWVzLmdldChuYW1lKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghd2luZG93LkNvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gd2luZG93LkNvb2tpZXMuc2V0KFxuICAgICAgbmFtZSxcbiAgICAgIHZhbHVlLFxuICAgICAgR09WVUtfQ09PS0lFX09QVElPTlNcbiAgICApO1xuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKCF3aW5kb3cuQ29va2llcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5kb3cuQ29va2llcy5yZW1vdmUoXG4gICAgICBuYW1lLFxuICAgICAgR09WVUtfQ09PS0lFX09QVElPTlNcbiAgICApO1xuICB9XG59O1xuXG4vLyBmdW5jdGlvbiB0aGF0IHdpbGwgcmVtb3ZlIGFueSBleGlzdGluZyB0cmFja2luZyBjb29raWVzIG9uIHBhZ2UgbG9hZFxuKGZ1bmN0aW9uICgpIHtcbiAgR292VUtDb29raWUucmVtb3ZlKENPT0tJRV9OQU1FUy5QT0xJQ1kpO1xuICBHb3ZVS0Nvb2tpZS5yZW1vdmUoQ09PS0lFX05BTUVTLlBSRUZFUkVOQ0VTX1NFVCk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuR0EpO1xuICBHb3ZVS0Nvb2tpZS5yZW1vdmUoQ09PS0lFX05BTUVTLkdBX0dBVCk7XG4gIEdvdlVLQ29va2llLnJlbW92ZShDT09LSUVfTkFNRVMuR0FfR0lEKTtcbn0pKCk7XG5cblxuLyoqXG4gKiBTZWN0aW9uIHRvIGhhbmRsZSByZXZpZXcgdXNlcnMgYmFubmVyXG4gKiBJdCB1c2VzIGEgZGVkaWNhdGVkIGNvb2tpZSAndXNlcl9iYW5uZXJfbGFzdF9zZWVuJ1xuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29uZGl0aW9uRm9yVXNlcnNCYW5uZXIoKSB7XG4gIHZhciBsYXN0U2VlbiA9IEdvdlVLQ29va2llLmdldFJhdyhDT09LSUVfTkFNRVMuVVNFUl9CQU5ORVJfTEFTVF9TRUVOKTtcbiAgaWYgKCEhbGFzdFNlZW4pIHtcbiAgICB2YXIgbnVtYmVyT2ZEYXlzID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbGFzdFNlZW4pIC8gKDEwMDAgKiAzNjAwICogMjQpO1xuICAgIGlmIChudW1iZXJPZkRheXMgPiA5MCkge1xuICAgICAgLy8gaWYgdGhlIHBlcmlvZCBpcyBsb25nZXIgdGhhbiA5MCBkYXlzIHNob3cvdXBkYXRlIHRoZSBiYW5uZXJcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyB2YWx1ZSB0aGVuIHNob3cvdXBkYXRlIHRoZSBiYW5uZXJcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNob3dSZXZpZXdVc2Vyc0Jhbm5lcigpIHtcbiAgJCgnI3Jldmlldy11c2Vycy1iYW5uZXInKS5zaG93KCk7XG59XG5cbmZ1bmN0aW9uIHNldFJldmlld1VzZXJzQmFubmVyTGFzdFNlZW4oKSB7XG4gIEdvdlVLQ29va2llLnNldChDT09LSUVfTkFNRVMuVVNFUl9CQU5ORVJfTEFTVF9TRUVOLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRSZXZpZXdVc2Vyc0Jhbm5lcigpIHtcbiAgaWYgKGNoZWNrQ29uZGl0aW9uRm9yVXNlcnNCYW5uZXIoKSkge1xuICAgIHNob3dSZXZpZXdVc2Vyc0Jhbm5lcigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvb2tpZVJldmlld1VzZXJzQmFubmVyKCkge1xuICBpZiAoY2hlY2tDb25kaXRpb25Gb3JVc2Vyc0Jhbm5lcigpKSB7XG4gICAgc2V0UmV2aWV3VXNlcnNCYW5uZXJMYXN0U2VlbigpO1xuICB9XG59XG4iLCIvLyA8ZGV0YWlscz4gcG9seWZpbGxcbi8vIGh0dHA6Ly9jYW5pdXNlLmNvbS8jZmVhdD1kZXRhaWxzXG5cbi8vIEZGIFN1cHBvcnQgZm9yIEhUTUw1J3MgPGRldGFpbHM+IGFuZCA8c3VtbWFyeT5cbi8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTU5MTczN1xuXG4vLyBodHRwOi8vd3d3LnNpdGVwb2ludC5jb20vZml4aW5nLXRoZS1kZXRhaWxzLWVsZW1lbnQvXG5cbjsoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAndXNlIHN0cmljdCdcblxuICB2YXIgR09WVUsgPSBnbG9iYWwuR09WVUsgfHwge31cblxuICBHT1ZVSy5kZXRhaWxzID0ge1xuICAgIE5BVElWRV9ERVRBSUxTOiB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGV0YWlscycpLm9wZW4gPT09ICdib29sZWFuJyxcbiAgICBLRVlfRU5URVI6IDEzLFxuICAgIEtFWV9TUEFDRTogMzIsXG5cbiAgICAvLyBDcmVhdGUgYSBzdGFydGVkIGZsYWcgc28gd2UgY2FuIHByZXZlbnQgdGhlIGluaXRpYWxpc2F0aW9uXG4gICAgLy8gZnVuY3Rpb24gZmlyaW5nIGZyb20gYm90aCBET01Db250ZW50TG9hZGVkIGFuZCB3aW5kb3cub25sb2FkXG4gICAgc3RhcnRlZDogZmFsc2UsXG5cbiAgICAvLyBBZGQgZXZlbnQgY29uc3RydWN0IGZvciBtb2Rlcm4gYnJvd3NlcnMgb3IgSUVcbiAgICAvLyB3aGljaCBmaXJlcyB0aGUgY2FsbGJhY2sgd2l0aCBhIHByZS1jb252ZXJ0ZWQgdGFyZ2V0IHJlZmVyZW5jZVxuICAgIGFkZEV2ZW50OiBmdW5jdGlvbiAobm9kZSwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmIChub2RlLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2FsbGJhY2soZSwgZS50YXJnZXQpXG4gICAgICAgIH0sIGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChub2RlLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgIG5vZGUuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2FsbGJhY2soZSwgZS5zcmNFbGVtZW50KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmVFdmVudDogZnVuY3Rpb24gKG5vZGUsIHR5cGUpIHtcbiAgICAgIGlmIChub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIH0sIGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChub2RlLmRldGFjaEV2ZW50KSB7XG4gICAgICAgIG5vZGUuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgY2hhcmFjdGVyIGNvZGUgLyBrZXkgcHJlc3NlZFxuICAgIGNoYXJDb2RlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuICh0eXBlb2YgZS53aGljaCA9PT0gJ251bWJlcicpID8gZS53aGljaCA6IGUua2V5Q29kZVxuICAgIH0sXG5cbiAgICAvLyBDcm9zcy1icm93c2VyIHByZXZlbnRpbmcgZGVmYXVsdCBhY3Rpb25cbiAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlXG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIEhhbmRsZSBjcm9zcy1tb2RhbCBjbGljayBldmVudHNcbiAgICBhZGRDbGlja0V2ZW50OiBmdW5jdGlvbiAobm9kZSwgY2FsbGJhY2spIHtcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkRXZlbnQobm9kZSwgJ2tleXByZXNzJywgZnVuY3Rpb24gKGUsIHRhcmdldCkge1xuICAgICAgICAvLyBXaGVuIHRoZSBrZXkgZ2V0cyBwcmVzc2VkIC0gY2hlY2sgaWYgaXQgaXMgZW50ZXIgb3Igc3BhY2VcbiAgICAgICAgaWYgKEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX0VOVEVSIHx8IEdPVlVLLmRldGFpbHMuY2hhckNvZGUoZSkgPT09IEdPVlVLLmRldGFpbHMuS0VZX1NQQUNFKSB7XG4gICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc3VtbWFyeScpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgc3BhY2UgZnJvbSBzY3JvbGxpbmcgdGhlIHBhZ2VcbiAgICAgICAgICAgIC8vIGFuZCBlbnRlciBmcm9tIHN1Ym1pdHRpbmcgYSBmb3JtXG4gICAgICAgICAgICBHT1ZVSy5kZXRhaWxzLnByZXZlbnREZWZhdWx0KGUpXG4gICAgICAgICAgICAvLyBDbGljayB0byBsZXQgdGhlIGNsaWNrIGV2ZW50IGRvIGFsbCB0aGUgbmVjZXNzYXJ5IGFjdGlvblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGljaykge1xuICAgICAgICAgICAgICB0YXJnZXQuY2xpY2soKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gZXhjZXB0IFNhZmFyaSA1LjEgYW5kIHVuZGVyIGRvbid0IHN1cHBvcnQgLmNsaWNrKCkgaGVyZVxuICAgICAgICAgICAgICBjYWxsYmFjayhlLCB0YXJnZXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyBQcmV2ZW50IGtleXVwIHRvIHByZXZlbnQgY2xpY2tpbmcgdHdpY2UgaW4gRmlyZWZveCB3aGVuIHVzaW5nIHNwYWNlIGtleVxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCAna2V5dXAnLCBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIGlmIChHT1ZVSy5kZXRhaWxzLmNoYXJDb2RlKGUpID09PSBHT1ZVSy5kZXRhaWxzLktFWV9TUEFDRSkge1xuICAgICAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT09ICdTVU1NQVJZJykge1xuICAgICAgICAgICAgR09WVUsuZGV0YWlscy5wcmV2ZW50RGVmYXVsdChlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudChub2RlLCAnY2xpY2snLCBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIGNhbGxiYWNrKGUsIHRhcmdldClcbiAgICAgIH0pXG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbmVhcmVzdCBhbmNlc3RvciBlbGVtZW50IG9mIGEgbm9kZSB0aGF0IG1hdGNoZXMgYSBnaXZlbiB0YWcgbmFtZVxuICAgIGdldEFuY2VzdG9yOiBmdW5jdGlvbiAobm9kZSwgbWF0Y2gpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbWF0Y2gpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGVcbiAgICAgIH0gd2hpbGUgKG5vZGUpXG5cbiAgICAgIHJldHVybiBub2RlXG4gICAgfSxcblxuICAgIC8vIEluaXRpYWxpc2F0aW9uIGZ1bmN0aW9uXG4gICAgYWRkRGV0YWlsc1BvbHlmaWxsOiBmdW5jdGlvbiAobGlzdCwgY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIgPSBjb250YWluZXIgfHwgZG9jdW1lbnQuYm9keVxuICAgICAgLy8gSWYgdGhpcyBoYXMgYWxyZWFkeSBoYXBwZW5lZCwganVzdCByZXR1cm5cbiAgICAgIC8vIGVsc2Ugc2V0IHRoZSBmbGFnIHNvIGl0IGRvZXNuJ3QgaGFwcGVuIGFnYWluXG4gICAgICBpZiAoR09WVUsuZGV0YWlscy5zdGFydGVkKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgR09WVUsuZGV0YWlscy5zdGFydGVkID0gdHJ1ZVxuICAgICAgLy8gR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGRldGFpbHMgZWxlbWVudHMsIGJ1dCBpZiB0aGF0J3MgZW1wdHlcbiAgICAgIC8vIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBib3RoZXIgd2l0aCB0aGUgcmVzdCBvZiB0aGUgc2NyaXB0aW5nXG4gICAgICBpZiAoKGxpc3QgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RldGFpbHMnKSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgLy8gZWxzZSBpdGVyYXRlIHRocm91Z2ggdGhlbSB0byBhcHBseSB0aGVpciBpbml0aWFsIHN0YXRlXG4gICAgICB2YXIgbiA9IGxpc3QubGVuZ3RoXG4gICAgICB2YXIgaSA9IDBcbiAgICAgIGZvciAoaTsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgZGV0YWlscyA9IGxpc3RbaV1cblxuICAgICAgICAvLyBTYXZlIHNob3J0Y3V0cyB0byB0aGUgaW5uZXIgc3VtbWFyeSBhbmQgY29udGVudCBlbGVtZW50c1xuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeSA9IGRldGFpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3N1bW1hcnknKS5pdGVtKDApXG4gICAgICAgIGRldGFpbHMuX19jb250ZW50ID0gZGV0YWlscy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JykuaXRlbSgwKVxuXG4gICAgICAgIGlmICghZGV0YWlscy5fX3N1bW1hcnkgfHwgIWRldGFpbHMuX19jb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIGNvbnRlbnQgZG9lc24ndCBoYXZlIGFuIElELCBhc3NpZ24gaXQgb25lIG5vd1xuICAgICAgICAvLyB3aGljaCB3ZSdsbCBuZWVkIGZvciB0aGUgc3VtbWFyeSdzIGFyaWEtY29udHJvbHMgYXNzaWdubWVudFxuICAgICAgICBpZiAoIWRldGFpbHMuX19jb250ZW50LmlkKSB7XG4gICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuaWQgPSAnZGV0YWlscy1jb250ZW50LScgKyBpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgQVJJQSByb2xlPVwiZ3JvdXBcIiB0byBkZXRhaWxzXG4gICAgICAgIGRldGFpbHMuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2dyb3VwJylcblxuICAgICAgICAvLyBBZGQgcm9sZT1idXR0b24gdG8gc3VtbWFyeVxuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJylcblxuICAgICAgICAvLyBBZGQgYXJpYS1jb250cm9sc1xuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCBkZXRhaWxzLl9fY29udGVudC5pZClcblxuICAgICAgICAvLyBTZXQgdGFiSW5kZXggc28gdGhlIHN1bW1hcnkgaXMga2V5Ym9hcmQgYWNjZXNzaWJsZSBmb3Igbm9uLW5hdGl2ZSBlbGVtZW50c1xuICAgICAgICAvLyBodHRwOi8vd3d3LnNhbGllbmNlcy5jb20vYnJvd3NlckJ1Z3MvdGFiSW5kZXguaHRtbFxuICAgICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS50YWJJbmRleCA9IDBcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERldGVjdCBpbml0aWFsIG9wZW4gc3RhdGVcbiAgICAgICAgdmFyIG9wZW5BdHRyID0gZGV0YWlscy5nZXRBdHRyaWJ1dGUoJ29wZW4nKSAhPT0gbnVsbFxuICAgICAgICBpZiAob3BlbkF0dHIgPT09IHRydWUpIHtcbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpXG4gICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcbiAgICAgICAgICBkZXRhaWxzLl9fY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuICAgICAgICAgIGlmICghR09WVUsuZGV0YWlscy5OQVRJVkVfREVUQUlMUykge1xuICAgICAgICAgICAgZGV0YWlscy5fX2NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhIGNpcmN1bGFyIHJlZmVyZW5jZSBmcm9tIHRoZSBzdW1tYXJ5IGJhY2sgdG8gaXRzXG4gICAgICAgIC8vIHBhcmVudCBkZXRhaWxzIGVsZW1lbnQsIGZvciBjb252ZW5pZW5jZSBpbiB0aGUgY2xpY2sgaGFuZGxlclxuICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5fX2RldGFpbHMgPSBkZXRhaWxzXG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBub3QgYSBuYXRpdmUgaW1wbGVtZW50YXRpb24sIGNyZWF0ZSBhbiBhcnJvd1xuICAgICAgICAvLyBpbnNpZGUgdGhlIHN1bW1hcnlcbiAgICAgICAgaWYgKCFHT1ZVSy5kZXRhaWxzLk5BVElWRV9ERVRBSUxTKSB7XG4gICAgICAgICAgdmFyIHR3aXN0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKVxuXG4gICAgICAgICAgaWYgKG9wZW5BdHRyID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0d2lzdHkuY2xhc3NOYW1lID0gJ2Fycm93IGFycm93LW9wZW4nXG4gICAgICAgICAgICB0d2lzdHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1xcdTI1YmMnKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHdpc3R5LmNsYXNzTmFtZSA9ICdhcnJvdyBhcnJvdy1jbG9zZWQnXG4gICAgICAgICAgICB0d2lzdHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1xcdTI1YmEnKSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZXRhaWxzLl9fc3VtbWFyeS5fX3R3aXN0eSA9IGRldGFpbHMuX19zdW1tYXJ5Lmluc2VydEJlZm9yZSh0d2lzdHksIGRldGFpbHMuX19zdW1tYXJ5LmZpcnN0Q2hpbGQpXG4gICAgICAgICAgZGV0YWlscy5fX3N1bW1hcnkuX190d2lzdHkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBCaW5kIGEgY2xpY2sgZXZlbnQgdG8gaGFuZGxlIHN1bW1hcnkgZWxlbWVudHNcbiAgICAgIEdPVlVLLmRldGFpbHMuYWRkQ2xpY2tFdmVudChjb250YWluZXIsIGZ1bmN0aW9uIChlLCBzdW1tYXJ5KSB7XG4gICAgICAgIGlmICghKHN1bW1hcnkgPSBHT1ZVSy5kZXRhaWxzLmdldEFuY2VzdG9yKHN1bW1hcnksICdzdW1tYXJ5JykpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR09WVUsuZGV0YWlscy5zdGF0ZWNoYW5nZShzdW1tYXJ5KVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgLy8gRGVmaW5lIGEgc3RhdGVjaGFuZ2UgZnVuY3Rpb24gdGhhdCB1cGRhdGVzIGFyaWEtZXhwYW5kZWQgYW5kIHN0eWxlLmRpc3BsYXlcbiAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgYXJyb3cgcG9zaXRpb25cbiAgICBzdGF0ZWNoYW5nZTogZnVuY3Rpb24gKHN1bW1hcnkpIHtcbiAgICAgIHZhciBleHBhbmRlZCA9IHN1bW1hcnkuX19kZXRhaWxzLl9fc3VtbWFyeS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnXG4gICAgICB2YXIgaGlkZGVuID0gc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSA9PT0gJ3RydWUnXG5cbiAgICAgIHN1bW1hcnkuX19kZXRhaWxzLl9fc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAoZXhwYW5kZWQgPyAnZmFsc2UnIDogJ3RydWUnKSlcbiAgICAgIHN1bW1hcnkuX19kZXRhaWxzLl9fY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgKGhpZGRlbiA/ICdmYWxzZScgOiAndHJ1ZScpKVxuXG4gICAgICBpZiAoIUdPVlVLLmRldGFpbHMuTkFUSVZFX0RFVEFJTFMpIHtcbiAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuX19jb250ZW50LnN0eWxlLmRpc3BsYXkgPSAoZXhwYW5kZWQgPyAnbm9uZScgOiAnJylcblxuICAgICAgICB2YXIgaGFzT3BlbkF0dHIgPSBzdW1tYXJ5Ll9fZGV0YWlscy5nZXRBdHRyaWJ1dGUoJ29wZW4nKSAhPT0gbnVsbFxuICAgICAgICBpZiAoIWhhc09wZW5BdHRyKSB7XG4gICAgICAgICAgc3VtbWFyeS5fX2RldGFpbHMuc2V0QXR0cmlidXRlKCdvcGVuJywgJ29wZW4nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1bW1hcnkuX19kZXRhaWxzLnJlbW92ZUF0dHJpYnV0ZSgnb3BlbicpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHN1bW1hcnkuX190d2lzdHkpIHtcbiAgICAgICAgc3VtbWFyeS5fX3R3aXN0eS5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IChleHBhbmRlZCA/ICdcXHUyNWJhJyA6ICdcXHUyNWJjJylcbiAgICAgICAgc3VtbWFyeS5fX3R3aXN0eS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKGV4cGFuZGVkID8gJ2Fycm93IGFycm93LWNsb3NlZCcgOiAnYXJyb3cgYXJyb3ctb3BlbicpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICBkZXN0cm95OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgR09WVUsuZGV0YWlscy5yZW1vdmVFdmVudChub2RlLCAnY2xpY2snKVxuICAgIH0sXG5cbiAgICAvLyBCaW5kIHR3byBsb2FkIGV2ZW50cyBmb3IgbW9kZXJuIGFuZCBvbGRlciBicm93c2Vyc1xuICAgIC8vIElmIHRoZSBmaXJzdCBvbmUgZmlyZXMgaXQgd2lsbCBzZXQgYSBmbGFnIHRvIGJsb2NrIHRoZSBzZWNvbmQgb25lXG4gICAgLy8gYnV0IGlmIGl0J3Mgbm90IHN1cHBvcnRlZCB0aGVuIHRoZSBzZWNvbmQgb25lIHdpbGwgZmlyZVxuICAgIGluaXQ6IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBHT1ZVSy5kZXRhaWxzLmFkZEV2ZW50KGRvY3VtZW50LCAnRE9NQ29udGVudExvYWRlZCcsIEdPVlVLLmRldGFpbHMuYWRkRGV0YWlsc1BvbHlmaWxsKVxuICAgICAgR09WVUsuZGV0YWlscy5hZGRFdmVudCh3aW5kb3csICdsb2FkJywgR09WVUsuZGV0YWlscy5hZGREZXRhaWxzUG9seWZpbGwpXG4gICAgfVxuICB9XG4gIGdsb2JhbC5HT1ZVSyA9IEdPVlVLXG59KSh3aW5kb3cpXG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIE5TQSA9IE5TQSB8fCB7fTtcbnZhciBmaWx0ZXJCb3hlcyA9ICQoJy5maWx0ZXItYm94Jyk7XG5cbk5TQS5maWx0ZXJzID0ge1xuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgZmlsdGVyQm94ZXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpLFxuICAgICAgICAgIGhlYWRlciA9ICR0aGF0LmZpbmQoJy5jb250YWluZXItaGVhZCcpLFxuICAgICAgICAgIHRpdGxlID0gaGVhZGVyLmZpbmQoJy5vcHRpb24tc2VsZWN0LWxhYmVsJyksXG4gICAgICAgICAgY2hlY2tib3hlcyA9ICR0aGF0LmZpbmQoJ2lucHV0OmNoZWNrYm94JyksXG4gICAgICAgICAgYnV0dG9uID0gJCgnPGJ1dHRvbiAvPicpLmFkZENsYXNzKCdqcy1jb250YWluZXItaGVhZCcpLFxuICAgICAgICAgIGNoZWNrQ291bnQgPSAkKCc8ZGl2IC8+JykuYWRkQ2xhc3MoJ2pzLXNlbGVjdGVkLWNvdW50ZXInKTtcblxuICAgICAgYnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gJCh0aGlzKS5uZXh0KCk7XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdjbG9zZWQnKSkge1xuICAgICAgICAgIG9wdGlvbnMuc2hvdygpO1xuICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnY2xvc2VkJylcbiAgICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9ucy5oaWRlKCk7XG4gICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdjbG9zZWQnKVxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSkuYXBwZW5kKHRpdGxlLCBjaGVja0NvdW50KTtcblxuICAgICAgaGVhZGVyLnJlcGxhY2VXaXRoKGJ1dHRvbik7XG5cbiAgICAgIGNoZWNrYm94ZXMub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tDb3VudC50ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBjaGVja2JveGVzLmZpbHRlcignOmNoZWNrZWQnKS5sZW5ndGggPiAwID8gY2hlY2tib3hlcy5maWx0ZXIoJzpjaGVja2VkJykubGVuZ3RoICsgJyBzZWxlY3RlZCcgOiAnJztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5pZiAoZmlsdGVyQm94ZXMubGVuZ3RoID4gMCkge1xuICBOU0EuZmlsdGVycy5pbml0KCk7XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuZnVuY3Rpb24gdG9LZWJhYkNhc2Uoc3RyKSB7XG4gIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvdW50KGNhdGVnb3J5TmFtZSkge1xuICBjb25zdCBzYWZlQ2F0ZWdvcnlOYW1lID0gdG9LZWJhYkNhc2UoY2F0ZWdvcnlOYW1lKTtcbiAgY29uc3QgY2hlY2tlZENvdW50ID0gJChgLiR7c2FmZUNhdGVnb3J5TmFtZX0gLmdvdnVrLWNoZWNrYm94ZXNfX2lucHV0OmNoZWNrZWRgKS5sZW5ndGg7XG4gICQoYCMke3NhZmVDYXRlZ29yeU5hbWV9LWNvdW50YCkudGV4dChjaGVja2VkQ291bnQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDYXRlZ29yeUhlYWRlcihjYXRlZ29yeU5hbWUpIHtcbiAgY29uc3Qgc2FmZUNhdGVnb3J5TmFtZSA9IHRvS2ViYWJDYXNlKGNhdGVnb3J5TmFtZSk7XG4gIGNvbnN0IGNhdGVnb3J5SGVhZGVyID0gJChgIyR7c2FmZUNhdGVnb3J5TmFtZX0tdGV4dGApO1xuICBjb25zdCBpc0FueUNoZWNrZWRJbkNhdGVnb3J5ID1cbiAgICAkKGBpbnB1dFtpZF49J3Nob3ctaGlkZS0ke3NhZmVDYXRlZ29yeU5hbWV9J106Y2hlY2tlZGApLmxlbmd0aCA+IDA7XG4gIGNhdGVnb3J5SGVhZGVyLmNzcygnZGlzcGxheScsIGlzQW55Q2hlY2tlZEluQ2F0ZWdvcnkgPyAnYmxvY2snIDogJ25vbmUnKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlTm9GaWx0ZXJNZXNzYWdlKCkge1xuICBjb25zdCBpc0FueUNoZWNrZWRHbG9iYWwgPVxuICAgICQoJy5nb3Z1ay1jaGVja2JveGVzX19pbnB1dC5kZmUtZmlsdGVyLWlucHV0OmNoZWNrZWQnKS5sZW5ndGggPiAwO1xuICAkKCcjc2hvdy1oaWRlLXNlbGVjdGVkLWZpbHRlcnMnKS5jc3MoXG4gICAgJ2Rpc3BsYXknLFxuICAgIGlzQW55Q2hlY2tlZEdsb2JhbCA/ICdub25lJyA6ICdibG9jaycsXG4gICk7XG59XG5cbmZ1bmN0aW9uIHNob3dNZShib3hJZCwgY2F0ZWdvcnlOYW1lLCBjaGVja2VkRWxlbWVudElkKSB7XG4gIGNvbnN0IGlzQ2hlY2tlZCA9ICQoYCMke2NoZWNrZWRFbGVtZW50SWR9YCkucHJvcCgnY2hlY2tlZCcpO1xuICAkKGAjJHtib3hJZH1gKS5jc3MoJ2Rpc3BsYXknLCBpc0NoZWNrZWQgPyAnYmxvY2snIDogJ25vbmUnKTtcblxuICB1cGRhdGVDYXRlZ29yeUhlYWRlcihjYXRlZ29yeU5hbWUpO1xuICB1cGRhdGVOb0ZpbHRlck1lc3NhZ2UoKTtcbn1cblxuZnVuY3Rpb24gaGlkZU1lKGxpc3RJZCwgY2F0ZWdvcnlOYW1lLCBjaGVja2JveElkKSB7XG4gICQoYCMke2xpc3RJZH1gKS5oaWRlKCk7XG4gICQoYCMke2NoZWNrYm94SWR9YCkucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcblxuICB1cGRhdGVDb3VudChjYXRlZ29yeU5hbWUpO1xuICB1cGRhdGVDYXRlZ29yeUhlYWRlcihjYXRlZ29yeU5hbWUpO1xuICB1cGRhdGVOb0ZpbHRlck1lc3NhZ2UoKTtcbn1cblxuXG5mdW5jdGlvbiBpbml0aWFsaXplRmlsdGVycygpIHtcbiAgJCgnLmdvdnVrLWNoZWNrYm94ZXNfX2lucHV0LmRmZS1maWx0ZXItaW5wdXQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBpc0NoZWNrZWQgPSAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKTtcbiAgICBpZiAoaXNDaGVja2VkKSB7XG4gICAgICBjb25zdCBjaGVja2JveElkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgY29uc3QgcGFydHMgPSBjaGVja2JveElkLm1hdGNoKC9zaG93LWhpZGUtKC4rKS0oXFxkKykvKTtcbiAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlOYW1lID0gcGFydHNbMV07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFydHNbMl07XG4gICAgICAgIGNvbnN0IGJveElkID0gYCR7Y2F0ZWdvcnlOYW1lfS1vcHRpb24tJHtpbmRleH1gO1xuXG4gICAgICAgIHNob3dNZShib3hJZCwgY2F0ZWdvcnlOYW1lLCBjaGVja2JveElkKTtcbiAgICAgICAgdXBkYXRlQ291bnQoY2F0ZWdvcnlOYW1lKTtcbiAgICAgICAgdXBkYXRlQ2F0ZWdvcnlIZWFkZXIoY2F0ZWdvcnlOYW1lKTtcbiAgICAgICAgdXBkYXRlTm9GaWx0ZXJNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuICBpbml0aWFsaXplRmlsdGVycygpO1xufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIE5TQSA9IE5TQSB8fCB7fTtcblxuTlNBLm1vZGFsID0ge1xuICBlbGVtczoge1xuICAgIGxpbmtzOiAkKCcubW9kYWwtbGluaycpLFxuICAgIG1vZGFsczogJCgnLm1vZGFsJylcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubW9kYWxCZygpO1xuICAgIHRoaXMuc2V0VXBFdmVudHMoKTtcbiAgfSxcbiAgbW9kYWxCZzogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgYmcgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdtb2RhbC1iZycpLmhpZGUoKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7IHRoYXQuaGlkZU1vZGFscygpOyB9KTtcbiAgICAkKCdib2R5JykuYXBwZW5kKGJnKTtcbiAgfSxcbiAgc2V0VXBFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5lbGVtcy5saW5rcy5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgdGhhdC5zaG93TW9kYWwoJCh0YXJnZXQpKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoYXQuZWxlbXMubW9kYWxzLmZpbmQoJy5jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGF0LmhpZGVNb2RhbHMoKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgICQoJ2JvZHknKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoKGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PT0gMjcpXG4gICAgICAgIHRoYXQuaGlkZU1vZGFscygpO1xuICAgIH0pO1xuICB9LFxuICBzaG93TW9kYWw6IGZ1bmN0aW9uIChtb2RhbCkge1xuICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iZycpLnNob3coKTtcbiAgICBtb2RhbC5zaG93KCk7XG4gIH0sXG4gIGhpZGVNb2RhbHM6IGZ1bmN0aW9uICgpIHtcbiAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmcnKS5oaWRlKCk7XG4gICAgdGhpcy5lbGVtcy5tb2RhbHMuaGlkZSgpO1xuICB9XG59XG5cbk5TQS5tb2RhbC5pbml0KCk7XG4iLCIvKiBnbG9iYWwgd2luZG93ICovXG4vKiBnbG9iYWwgJCAqL1xuXG5jb25zdCBSRVNQT05TRV9UWVBFX0NPREUgPSAnY29kZSc7XG5jb25zdCBSRVNQT05TRV9UWVBFX0lEX1RPS0VOID0gJ0lEIHRva2VuJztcbmNvbnN0IFJFU1BPTlNFX1RZUEVfVE9LRU4gPSAndG9rZW4nO1xuXG5jb25zdCBGTE9XX1RZUEVfSU1QTElDSVQgPSAnaW1wbGljaXQnO1xuY29uc3QgRkxPV19UWVBFX0FVVEhPUklTQVRJT04gPSAnYXV0aG9yaXNhdGlvbic7XG5jb25zdCBGTE9XX1RZUEVfSFlCUklEID0gJ2h5YnJpZCc7XG5cbiQoKCkgPT4ge1xuICBjb25zdCBjcmVhdGVTZXJ2aWNlQ29uZmlnVXJsU2VjdGlvbnMgPSAoc2VjdGlvbklkLCBmb3JtR3JvdXBTZWxlY3RvciwgbGFiZWxUZXh0KSA9PiB7XG4gICAgY29uc3QgYWRkQnV0dG9uID0gJChgIyR7c2VjdGlvbklkfS1hZGRgKTtcbiAgICBjb25zdCBmb3JtR3JvdXAgPSAkKGAke2Zvcm1Hcm91cFNlbGVjdG9yfWApO1xuXG4gICAgYWRkQnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uIGFkZElucHV0RkllbGQoKSB7XG4gICAgICBsZXQgY291bnRlciA9IHBhcnNlSW50KGZvcm1Hcm91cC5kYXRhKGAke3NlY3Rpb25JZH0tY291bnRlcmApLCAxMCk7XG4gICAgICBjb25zdCBuZXdJbnB1dElkID0gYCR7c2VjdGlvbklkfS0ke2NvdW50ZXJ9YDtcbiAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZ292dWstYm9keSBkZmUtZmxleC1jb250YWluZXJcIiBpZD1cIiR7c2VjdGlvbklkfS1pbnB1dC1ncm91cC0ke2NvdW50ZXJ9XCI+XG4gICAgICAgIDxsYWJlbCBmb3I9XCIke25ld0lucHV0SWR9XCIgY2xhc3M9XCJnb3Z1ay1sYWJlbCBnb3Z1ay1sYWJlbC0tcyBnb3Z1ay12aXN1YWxseS1oaWRkZW5cIj5cbiAgICAgICAgICAke2xhYmVsVGV4dH1cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2wgZGZlLWZsZXgtaW5wdXQtZ3JvdyBnb3Z1ay1pbnB1dFwiXG4gICAgICAgICAgaWQ9XCIke25ld0lucHV0SWR9XCJcbiAgICAgICAgICBuYW1lPVwiJHtzZWN0aW9uSWR9XCJcbiAgICAgICAgLz5cbiAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cImdvdnVrLWxpbmsgZ292dWstbGluay0tbm8tdmlzaXRlZC1zdGF0ZSByZW1vdmUtcmVkaXJlY3RcIiBpZD1cIiR7c2VjdGlvbklkfS1yZW1vdmUtJHtjb3VudGVyfVwiIGRhdGEtZ3JvdXAtaWQ9XCIke2NvdW50ZXJ9XCI+UmVtb3ZlPC9hPlxuICAgICAgPC9kaXY+YDtcblxuICAgICAgJChuZXdFbGVtZW50KS5hcHBlbmRUbyhmb3JtR3JvdXApO1xuICAgICAgY291bnRlciArPSAxO1xuICAgICAgZm9ybUdyb3VwLmRhdGEoYCR7c2VjdGlvbklkfS1jb3VudGVyYCwgY291bnRlcik7XG4gICAgICAkKHRoaXMpLnRyaWdnZXIoJ2JsdXInKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGZvcm1Hcm91cC5vbignY2xpY2snLCAnLnJlbW92ZS1yZWRpcmVjdCcsIGZ1bmN0aW9uIHJlbW92ZUlucHV0KGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGdyb3VwSWQgPSAkKHRoaXMpLmRhdGEoJ2dyb3VwLWlkJyk7XG4gICAgICAkKGAjJHtzZWN0aW9uSWR9LWlucHV0LWdyb3VwLSR7Z3JvdXBJZH1gKS5yZW1vdmUoKTtcbiAgICAgICQodGhpcykudHJpZ2dlcignYmx1cicpO1xuXG4gICAgICBjb25zdCBuZXdDb3VudGVyID0gZm9ybUdyb3VwLmZpbmQoJy5kZmUtZmxleC1jb250YWluZXInKS5sZW5ndGg7XG4gICAgICBmb3JtR3JvdXAuZGF0YShgJHtzZWN0aW9uSWR9LWNvdW50ZXJgLCBuZXdDb3VudGVyKTtcbiAgICB9KTtcbiAgfTtcblxuICBjcmVhdGVTZXJ2aWNlQ29uZmlnVXJsU2VjdGlvbnMoJ3JlZGlyZWN0X3VyaXMnLCAnI3JlZGlyZWN0X3VyaXMtZm9ybS1ncm91cCcsICdSZWRpcmVjdCBVUkwnKTtcbiAgY3JlYXRlU2VydmljZUNvbmZpZ1VybFNlY3Rpb25zKCdwb3N0X2xvZ291dF9yZWRpcmVjdF91cmlzJywgJyNwb3N0X2xvZ291dF9yZWRpcmVjdF91cmlzLWZvcm0tZ3JvdXAnLCAnTG9nb3V0IHJlZGlyZWN0IFVSTCcpO1xuXG5cbiAgZnVuY3Rpb24gaGFuZGxlU2VjcmV0R2VuZXJhdGlvbihldmVudElkLCBpbnB1dElkLCBjb25maXJtTWVzc2FnZSkge1xuICAgICQoZXZlbnRJZCkub24oJ2NsaWNrJywgZnVuY3Rpb24gZ2VuZXJhdGVTZWNyZXQoKSB7XG4gICAgICBjb25zdCBzZWNyZXRBcnJheSA9IHdpbmRvdy5uaWNld2FyZS5nZW5lcmF0ZVBhc3NwaHJhc2UoOCk7XG4gICAgICBjb25zdCBzZWNyZXQgPSBzZWNyZXRBcnJheS5qb2luKCctJyk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzLCBuby1hbGVydFxuICAgICAgY29uc3QgaXNDb25maXJtID0gd2luZG93LmNvbmZpcm0oY29uZmlybU1lc3NhZ2UpO1xuICAgICAgaWYgKGlzQ29uZmlybSkge1xuICAgICAgICAkKGBpbnB1dCMke2lucHV0SWR9YCkuYXR0cigndmFsdWUnLCBzZWNyZXQpO1xuICAgICAgfVxuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdibHVyJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVTZWNyZXRHZW5lcmF0aW9uKCcjZ2VuZXJhdGUtY2xpZW50U2VjcmV0JywgJ2NsaWVudFNlY3JldCcsICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVnZW5lcmF0ZSB0aGUgY2xpZW50IHNlY3JldD8nKTtcbiAgaGFuZGxlU2VjcmV0R2VuZXJhdGlvbignI2dlbmVyYXRlLWFwaVNlY3JldCcsICdhcGlTZWNyZXQnLCAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlZ2VuZXJhdGUgdGhlIEFQSSBzZWNyZXQ/Jyk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2VjdGlvbnMoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRUeXBlcyA9IFtdO1xuXG4gICAgaWYgKCQoJyNyZXNwb25zZV90eXBlcy1pZF90b2tlbicpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICBzZWxlY3RlZFR5cGVzLnB1c2goUkVTUE9OU0VfVFlQRV9JRF9UT0tFTik7XG4gICAgfVxuXG4gICAgaWYgKCQoJyNyZXNwb25zZV90eXBlcy10b2tlbicpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICBzZWxlY3RlZFR5cGVzLnB1c2goUkVTUE9OU0VfVFlQRV9UT0tFTik7XG4gICAgfVxuXG4gICAgaWYgKCQoJyNyZXNwb25zZV90eXBlcy1jb2RlJykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgIHNlbGVjdGVkVHlwZXMucHVzaChSRVNQT05TRV9UWVBFX0NPREUpO1xuICAgIH1cblxuICAgIGxldCB3YXJuaW5nTWVzc2FnZSA9ICcnO1xuXG4gICAgaWYgKHNlbGVjdGVkVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgc2VsZWN0ZWRUeXBlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gW1JFU1BPTlNFX1RZUEVfQ09ERSwgUkVTUE9OU0VfVFlQRV9JRF9UT0tFTiwgUkVTUE9OU0VfVFlQRV9UT0tFTl07XG4gICAgICAgIHJldHVybiBvcmRlci5pbmRleE9mKGEpIC0gb3JkZXIuaW5kZXhPZihiKTtcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgZmxvd1R5cGUgPSBGTE9XX1RZUEVfSU1QTElDSVQ7XG5cbiAgICAgIGlmIChzZWxlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJiBzZWxlY3RlZFR5cGVzLmluY2x1ZGVzKFJFU1BPTlNFX1RZUEVfQ09ERSkpIHtcbiAgICAgICAgZmxvd1R5cGUgPSBGTE9XX1RZUEVfQVVUSE9SSVNBVElPTjtcbiAgICAgIH0gZWxzZSBpZiAoKHNlbGVjdGVkVHlwZXMuaW5jbHVkZXMoUkVTUE9OU0VfVFlQRV9DT0RFKSAmJlxuICAgICAgc2VsZWN0ZWRUeXBlcy5pbmNsdWRlcyhSRVNQT05TRV9UWVBFX1RPS0VOKSkgfHxcbiAgICAgICAgICAgIChzZWxlY3RlZFR5cGVzLmluY2x1ZGVzKFJFU1BPTlNFX1RZUEVfQ09ERSkgJiZcbiAgICAgICAgICAgIHNlbGVjdGVkVHlwZXMuaW5jbHVkZXMoUkVTUE9OU0VfVFlQRV9JRF9UT0tFTikpKSB7XG4gICAgICAgIGZsb3dUeXBlID0gRkxPV19UWVBFX0hZQlJJRDtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdGVkVHlwZXMubGVuZ3RoID09PSAxICYmIHNlbGVjdGVkVHlwZXMuaW5jbHVkZXMoUkVTUE9OU0VfVFlQRV9UT0tFTikpIHtcbiAgICAgICAgd2FybmluZ01lc3NhZ2UgPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBzZWxlY3RlZFR5cGVzRGlzcGxheTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRUeXBlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgY29uc3QgYWxsQnV0TGFzdCA9IHNlbGVjdGVkVHlwZXMuc2xpY2UoMCwgLTEpLmpvaW4oJywgJyk7XG4gICAgICAgICAgY29uc3QgbGFzdCA9IHNlbGVjdGVkVHlwZXNbc2VsZWN0ZWRUeXBlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICBzZWxlY3RlZFR5cGVzRGlzcGxheSA9IGAke2FsbEJ1dExhc3R9IGFuZCAke2xhc3R9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBbc2VsZWN0ZWRUeXBlc0Rpc3BsYXldID0gc2VsZWN0ZWRUeXBlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHdhcm5pbmdNZXNzYWdlID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdvdnVrLXdhcm5pbmctdGV4dCBnb3Z1ay0hLW1hcmdpbi10b3AtNSBnb3Z1ay0hLW1hcmdpbi1ib3R0b20tMFwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ292dWstd2FybmluZy10ZXh0X19pY29uXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+ITwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nIGNsYXNzPVwiZ292dWstd2FybmluZy10ZXh0X190ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ292dWstd2FybmluZy10ZXh0X19hc3Npc3RpdmVcIj5XYXJuaW5nPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBZb3UgaGF2ZSBzZWxlY3RlZCAke3NlbGVjdGVkVHlwZXNEaXNwbGF5fSBhcyB5b3VyIHJlc3BvbnNlIHR5cGUuIFRoaXMgbWVhbnMgJHtmbG93VHlwZX0gZmxvdyBpcyB5b3VyIGZsb3cuXG4gICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgZXhpc3Rpbmcgd2FybmluZywgaWYgYW55XG4gICAgJCgnLmdvdnVrLXdhcm5pbmctdGV4dCcpLnJlbW92ZSgpO1xuXG4gICAgLy8gQWRkIHRoZSBuZXcgd2FybmluZ1xuICAgIGlmICh3YXJuaW5nTWVzc2FnZSkge1xuICAgICAgJCgnI3Jlc3BvbnNlX3R5cGVzLWZpZWxkc2V0JykuYXBwZW5kKHdhcm5pbmdNZXNzYWdlKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbml0aWFsT2Zmc2V0ID0gJCgnI3Jlc3BvbnNlX3R5cGVzLWNvZGUnKS5vZmZzZXQoKS50b3A7XG4gICAgY29uc3QgaW5pdGlhbFNjcm9sbFBvc2l0aW9uID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgaWYgKCQoJyNyZXNwb25zZV90eXBlcy1jb2RlJykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICQoJyNyZWZyZXNoX3Rva2VuLXdyYXBwZXIgOmlucHV0LCAjY2xpZW50U2VjcmV0LXdyYXBwZXIgOmlucHV0LCAjdG9rZW5FbmRwb2ludEF1dGhNZXRob2Qtd3JhcHBlciBzZWxlY3QnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICQoJyNyZWZyZXNoX3Rva2VuLXdyYXBwZXIsICNjbGllbnRTZWNyZXQtd3JhcHBlciwgI3Rva2VuRW5kcG9pbnRBdXRoTWV0aG9kLXdyYXBwZXInKS5zbGlkZURvd24oNTAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnI3JlZnJlc2hfdG9rZW4td3JhcHBlciwgI2NsaWVudFNlY3JldC13cmFwcGVyLCAjdG9rZW5FbmRwb2ludEF1dGhNZXRob2Qtd3JhcHBlcicpLnNsaWRlVXAoNTAwLCAoKSA9PiB7XG4gICAgICAgICQoJyNyZWZyZXNoX3Rva2VuLXdyYXBwZXIgOmlucHV0LCAjY2xpZW50U2VjcmV0LXdyYXBwZXIgOmlucHV0LCAjdG9rZW5FbmRwb2ludEF1dGhNZXRob2Qtd3JhcHBlciBzZWxlY3QnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBjb25zdCBuZXdPZmZzZXQgPSAkKCcjcmVzcG9uc2VfdHlwZXMtY29kZScpLm9mZnNldCgpLnRvcDtcbiAgICBjb25zdCBvZmZzZXREaWZmZXJlbmNlID0gbmV3T2Zmc2V0IC0gaW5pdGlhbE9mZnNldDtcblxuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogaW5pdGlhbFNjcm9sbFBvc2l0aW9uICsgb2Zmc2V0RGlmZmVyZW5jZSxcbiAgICB9LCA1MCwgJ2xpbmVhcicpO1xuICB9XG4gIHVwZGF0ZVNlY3Rpb25zKCk7XG5cbiAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBjaGVja2JveGVzXG4gICQoJyNyZXNwb25zZV90eXBlcy1pZF90b2tlbiwgI3Jlc3BvbnNlX3R5cGVzLXRva2VuLCAjcmVzcG9uc2VfdHlwZXMtY29kZScpLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgdXBkYXRlU2VjdGlvbnMoKTtcbiAgfSk7XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgTlNBID0gTlNBIHx8IHt9O1xuXG5OU0Euc2lnbmluID0ge1xuICBmb3JtOiAkKCcuZm9ybS1zaWduaW4nKSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0dXBFdmVudHMoKTtcbiAgfSxcbiAgc2V0dXBFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZvcm0ub24oJ3N1Ym1pdCcsIHRoaXMsIHRoaXMuaGFuZGxlU3VibWl0KTtcbiAgfSxcbiAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiAoZSkge1xuXG4gICAgdmFyICRmb3JtID0gJCh0aGlzKTtcbiAgICB2YXIgJGlucHV0cyA9ICRmb3JtLmZpbmQoJ2lucHV0Jykubm90KCc6Y2hlY2tib3gnKSwgcG9zdERhdGEgPSB7fSwgJHN1Ym1pdEJ1dHRvbnMgPSAkKHRoaXMpLmZpbmQoJ2J1dHRvbjpzdWJtaXQnKSwgJHN1Ym1pdEJ1dHRvbiA9ICRzdWJtaXRCdXR0b25zLmVxKDApO1xuXG4gICAgJHN1Ym1pdEJ1dHRvbnMuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuICAgICRzdWJtaXRCdXR0b24uY3NzKCdtaW4td2lkdGgnLCAkc3VibWl0QnV0dG9uLm91dGVyV2lkdGgoKSArICdweCcpXG5cbiAgICAkc3VibWl0QnV0dG9uLmZpbmQoJy5sb2FkZXInKS5yZW1vdmVDbGFzcygndmgnKTtcblxuICAgICRpbnB1dHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHBvc3REYXRhW3RoaXMubmFtZV0gPSAkKHRoaXMpLnZhbCgpO1xuICAgIH0pO1xuXG4gICAgLy8gSGlkZSBhbnkgcGFzc3dvcmQgaW5wdXRzIHdlIG1heSBoYXZlIGluIHRoZSBmb3JtXG4gICAgdmFyICRwYXNzd29yZElucHV0cyA9ICQoJy5wYXNzd29yZC1pbnB1dCcpO1xuICAgICRwYXNzd29yZElucHV0cy5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAvLyBIaWRlIHBhc3N3b3JkXG4gICAgICAkKHRoaXMpLmF0dHIoXCJ0eXBlXCIsIFwicGFzc3dvcmRcIik7XG4gICAgICAvLyBVcGRhdGUgdGV4dCBpbiBzaG93L2hpZGUgYnV0dG9uXG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuc2hvdy1wYXNzd29yZCcpLmh0bWwoJ1Nob3cnKTtcbiAgICB9KTtcblxuICAgICQuYWpheCh7XG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICBkYXRhOiBwb3N0RGF0YSxcbiAgICAgIHVybDogJGZvcm0uYXR0cignYWN0aW9uJyksXG4gICAgICBjb250ZXh0OiBlLmRhdGEsXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEucmVkaXJlY3QpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRhdGEudXJpO1xuICAgICAgICAgICQoJ3RpdGxlJykuaHRtbCgnRGZFIFNpZ24taW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZGF0YS5pc0ZhaWxlZExvZ2luKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigkZm9ybSk7XG4gICAgICAgICAgICAkKCd0aXRsZScpLmh0bWwoJ0Vycm9yOiBEZkUgU2lnbi1pbicpO1xuICAgICAgICAgICAgaWYgKGRhdGEuZGVsYXlUaWxsKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2hvd1ZhbGlkYXRpb25NZXNzYWdlKGRhdGEudmFsaWRhdGlvbk1lc3NhZ2VzLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc2hvd1ZhbGlkYXRpb25NZXNzYWdlKGRhdGEudmFsaWRhdGlvbk1lc3NhZ2VzKTtcbiAgICAgICAgICAgICAgJHN1Ym1pdEJ1dHRvbnMucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2hvd0lubGluZVZhbGlkYXRpb24oZGF0YS52YWxpZGF0aW9uTWVzc2FnZXMpO1xuICAgICAgICAgICAgJHN1Ym1pdEJ1dHRvbi5maW5kKCcubG9hZGVyJykuYWRkQ2xhc3MoJ3ZoJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRGb3JtQW5kU3VibWl0KGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb24oJGZvcm0pO1xuICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uTWVzc2FnZSgpO1xuICAgICAgICAkc3VibWl0QnV0dG9ucy5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAkc3VibWl0QnV0dG9uLmZpbmQoJy5sb2FkZXInKS5hZGRDbGFzcygndmgnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG4gIHJlc2V0VmFsaWRhdGlvbjogZnVuY3Rpb24gKCRmb3JtKSB7XG5cbiAgICAkKCcuZ292dWstZXJyb3Itc3VtbWFyeScpLnJlbW92ZSgpO1xuXG4gICAgdmFyICRmb3JtR3JvdXBzID0gJGZvcm0uZmluZCgnLmdvdnVrLWZvcm0tZ3JvdXAnKTtcblxuICAgICRmb3JtR3JvdXBzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRmaWVsZCA9ICQodGhpcykuZmluZCgnaW5wdXQnKS5lcSgwKTtcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpKSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2dvdnVrLWZvcm0tZ3JvdXAtLWVycm9yJyk7XG4gICAgICAgICQodGhpcykuZmluZCgnc3Bhbi5nb3Z1ay1lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICRmaWVsZC5yZW1vdmVBdHRyKCdhcmlhLWRlc2NyaWJlZGJ5JykucmVtb3ZlQXR0cignYXJpYS1pbnZhbGlkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2hvd1ZhbGlkYXRpb25NZXNzYWdlOiBmdW5jdGlvbiAobWVzc2FnZXMsIHNob3dSZWZyZXNoTGluaykge1xuXG4gICAgdmFyICRkaXYgPSAkKCc8ZGl2IC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstZXJyb3Itc3VtbWFyeSBnb3Z1ay0hLW1hcmdpbi10b3AtNicpLmF0dHIoJ3JvbGUnLCAnYWxlcnQnKS5hdHRyKCd0YWJpbmRleCcsICctMScpLmF0dHIoJ2FyaWEtbGFiZWxsZWRieScsICdlcnJvci1zdW1tYXJ5LXRpdGxlJyk7XG4gICAgdmFyICRoMiA9ICQoJzxoMiAvPicpLmF0dHIoJ2NsYXNzJywgJ2dvdnVrLWVycm9yLXN1bW1hcnlfX3RpdGxlJykuYXR0cignaWQnLCAnZXJyb3Itc3VtbWFyeScpO1xuICAgIHZhciAkdWxDb250YWluZXIgPSAkKCc8ZGl2IC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstZXJyb3Itc3VtbWFyeV9fYm9keScpO1xuICAgIHZhciAkdWwgPSAkKCc8dWwgLz4nKS5hdHRyKCdjbGFzcycsICdnb3Z1ay1saXN0IGdvdnVrLWVycm9yLXN1bW1hcnlfX2xpc3QnKTtcblxuICAgIGlmIChtZXNzYWdlcykge1xuICAgICAgJGgyLnRleHQoJ1RoZXJlIGlzIGEgcHJvYmxlbScpO1xuICAgICAgJC5lYWNoKG1lc3NhZ2VzLCBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gJ2xvZ2luRXJyb3InKSB7XG4gICAgICAgICAgaW5kZXggPSAndXNlcm5hbWUnO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkYSA9ICQoJzxhIC8+JykuYXR0cignY2xhc3MnLCAnZ292dWstbGluaycpLmF0dHIoJ2hyZWYnLCAnIycgKyBpbmRleCkudGV4dCh2YWx1ZSk7XG4gICAgICAgIHZhciAkbGkgPSAkKCc8bGkgLz4nKS5hcHBlbmQoJGEpO1xuICAgICAgICAkdWwuYXBwZW5kKCRsaSk7XG4gICAgICB9KTtcbiAgICAgIGlmIChzaG93UmVmcmVzaExpbmspIHtcbiAgICAgICAgdmFyICRhID0gJCgnPGEgLz4nKS5hdHRyKCdjbGFzcycsICdnb3Z1ay1saW5rLWJvbGQnKS5hdHRyKCdocmVmJywgJycpLmF0dHIoJ29uY2xpY2snLCAnd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpJykudGV4dCgnUmVmcmVzaCB0aGlzIHBhZ2UnKS5jc3MoJ2NvbG9yJywgJyMxZDcwYjgnKTtcbiAgICAgICAgdmFyICRsaSA9ICQoJzxsaSAvPicpLmFwcGVuZCgkYSk7XG4gICAgICAgICR1bC5hcHBlbmQoJGxpKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAkaDIudGV4dCgnVGhlcmUgaGFzIGJlZW4gYW4gZXJyb3InKTtcbiAgICAgIHZhciAkbGkgPSAkKCc8bGkgLz4nKS5odG1sKCdQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLiBJZiB0aGUgcHJvYmxlbSBjb250aW51ZXMsIGZvbGxvdyB0aGUgbGluayB0byA8YSBocmVmPVwiaHR0cHM6Ly9oZWxwLnNpZ25pbi5lZHVjYXRpb24uZ292LnVrL2NvbnRhY3QvZm9ybVwiPnN1Ym1pdCBhIHN1cHBvcnQgcmVxdWVzdDwvYT4nKTtcbiAgICAgICR1bC5hcHBlbmQoJGxpKTtcbiAgICB9XG4gICAgJGRpdi5hcHBlbmQoJGgyKS5hcHBlbmQoJHVsQ29udGFpbmVyLmFwcGVuZCgkdWwpKTtcbiAgICAkKCdtYWluJykucHJlcGVuZCgkZGl2KTtcblxuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogJGRpdi5vZmZzZXQoKS50b3AgLSAxNVxuICAgIH0sIDMwMCk7XG5cbiAgfSxcbiAgc2hvd0lubGluZVZhbGlkYXRpb246IGZ1bmN0aW9uKG1lc3NhZ2VzKSB7XG5cbiAgICAkLmVhY2gobWVzc2FnZXMsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG4gICAgICB2YXIgJGZpZWxkID0gJCgnaW5wdXRbbmFtZT0nICsgaW5kZXggKyAnXScpLFxuICAgICAgICAkcGFyZW50ID0gJGZpZWxkLnBhcmVudCgpO1xuXG4gICAgICB2YXIgJGxhYmVsID0gJHBhcmVudC5maW5kKCdsYWJlbCcpLmZpcnN0KCk7XG5cbiAgICAgIGlmICghJHBhcmVudC5oYXNDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKSkge1xuXG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAkKCc8c3BhbiBjbGFzcz1cImdvdnVrLWJvZHlcIj4nKVxuICAgICAgICAgIC5odG1sKCc8c3BhbiBjbGFzcz1cImdvdnVrLXZpc3VhbGx5LWhpZGRlblwiPkVycm9yOjwvc3Bhbj4nICsgdmFsdWUpXG4gICAgICAgICAgLnByb3AoJ2NsYXNzJywgJ2dvdnVrLWVycm9yLW1lc3NhZ2UnKVxuICAgICAgICAgIC5wcm9wKCdpZCcsICd2YWxpZGF0aW9uLScgKyBpbmRleCk7XG4gICAgICB9XG5cbiAgICAgICRsYWJlbC5hZnRlcihlcnJvck1lc3NhZ2UpO1xuICAgICAgJHBhcmVudC5hZGRDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKTtcbiAgICAgICRmaWVsZC5hdHRyKHtcbiAgICAgICAgJ2FyaWEtZGVzY3JpYmVkYnknIDogJ3ZhbGlkYXRpb24tJyArIGluZGV4LFxuICAgICAgICAnYXJpYS1pbnZhbGlkJzogJ3RydWUnXG4gICAgICB9KTtcblxuICAgIH0pO1xuXG4gIH0sXG4gIGJ1aWxkRm9ybUFuZFN1Ym1pdDogZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgIHZhciAkZm9ybSA9ICQoJzxmb3JtIC8+JykuYXR0cih7XG4gICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgIGFjdGlvbjogZGF0YS5kZXN0aW5hdGlvbixcbiAgICAgIGlkOiAnZGZlc2lnbmluZm9ybSdcbiAgICB9KTtcblxuICAgICQuZWFjaChkYXRhLnBvc3RiYWNrRGF0YSwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApIHtcbiAgICAgIHZhciAkZmllbGQgPSAkKCc8aW5wdXQgLz4nKS5hdHRyKHtcbiAgICAgICAgdHlwZTogJ2hpZGRlbicsXG4gICAgICAgIG5hbWU6IGluZGV4LFxuICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgIH0pO1xuICAgICAgJGZvcm0uYXBwZW5kKCRmaWVsZCk7XG4gICAgfSk7XG5cbiAgICAkKCcjZGZlc2lnbmluZm9ybScpLnJlbW92ZSgpO1xuICAgICQoJ2JvZHknKS5hcHBlbmQoJGZvcm0pO1xuICAgICRmb3JtLnN1Ym1pdCgpO1xuICB9LFxufTtcblxuaWYgKCQoJy5mb3JtLXNpZ25pbicpLmxlbmd0aCA+IDApIHtcbiAgTlNBLnNpZ25pbi5pbml0KCk7XG59XG5cbmZ1bmN0aW9uIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lLCB1cmwpIHtcbiAgaWYgKCF1cmwpIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCBcIlxcXFwkJlwiKTtcbiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIls/Jl1cIiArIG5hbWUgKyBcIig9KFteJiNdKil8JnwjfCQpXCIpLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gIGlmICghcmVzdWx0cykgcmV0dXJuIG51bGw7XG4gIGlmICghcmVzdWx0c1syXSkgcmV0dXJuICcnO1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gc29ydFRhYmxlKG4pIHtcbiAgdmFyIHRhYmxlLCByb3dzLCBzd2l0Y2hpbmcsIGksIHgsIHksIHNob3VsZFN3aXRjaCwgZGlyZWN0aW9uLCBzd2l0Y2hjb3VudCA9IDA7XG4gIHRhYmxlID0gJCgndGFibGUuc29ydGFibGUnKTtcbiAgc3dpdGNoaW5nID0gdHJ1ZTtcbiAgZGlyZWN0aW9uID0gJ2EnO1xuXG4gIHdoaWxlIChzd2l0Y2hpbmcpIHtcblxuICAgIHN3aXRjaGluZyA9IGZhbHNlO1xuICAgIHJvd3MgPSB0YWJsZS5maW5kKCd0cicpO1xuXG4gICAgZm9yIChpID0gMTsgaSA8IChyb3dzLmxlbmd0aCAtIDEpOyBpKyspIHtcblxuICAgICAgc2hvdWxkU3dpdGNoID0gZmFsc2U7XG5cbiAgICAgIHggPSByb3dzW2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdURCcpW25dO1xuICAgICAgeSA9IHJvd3NbaSArIDFdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdURCcpW25dO1xuXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSAnYScpIHtcbiAgICAgICAgaWYgKHguaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkgPiB5LmlubmVySFRNTC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgc2hvdWxkU3dpdGNoID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdkJykge1xuICAgICAgICBpZiAoeC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA8IHkuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICBzaG91bGRTd2l0Y2ggPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNob3VsZFN3aXRjaCkge1xuXG4gICAgICByb3dzW2ldLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHJvd3NbaSArIDFdLCByb3dzW2ldKTtcbiAgICAgIHN3aXRjaGluZyA9IHRydWU7XG5cbiAgICAgIHN3aXRjaGNvdW50ICsrO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgaWYgKHN3aXRjaGNvdW50ID09PSAwICYmIGRpcmVjdGlvbiA9PT0gJ2EnKSB7XG4gICAgICAgIGRpcmVjdGlvbiA9ICdkJztcbiAgICAgICAgc3dpdGNoaW5nID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgIH1cbiAgfVxuICByZXR1cm4gZGlyZWN0aW9uO1xufVxuXG4kKGZ1bmN0aW9uICgpIHtcblxuICAkKCd0YWJsZS5zb3J0YWJsZSB0aGVhZCB0aCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBoZWFkaW5nQ2VsbHMgPSAkKCd0YWJsZS5zb3J0YWJsZSB0aGVhZCB0ciB0aCcpO1xuXG4gICAgaGVhZGluZ0NlbGxzLnJlbW92ZUNsYXNzKCdzb3J0ZWQnKS5yZW1vdmVDbGFzcygnZGlyLWEnKS5yZW1vdmVDbGFzcygnZGlyLWQnKTtcblxuICAgIHZhciBpbmRleCA9IGhlYWRpbmdDZWxscy5pbmRleCgkKHRoaXMpKTtcblxuICAgIHZhciBkaXJlY3Rpb24gPSBzb3J0VGFibGUoaW5kZXgpO1xuXG4gICAgJCh0aGlzKS5hZGRDbGFzcygnc29ydGVkIGRpci0nICsgZGlyZWN0aW9uKTtcblxuICB9KTtcblxufSk7XG4iLCI7KGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgdmFyICQgPSBnbG9iYWwualF1ZXJ5XG4gIHZhciBHT1ZVSyA9IGdsb2JhbC5HT1ZVSyB8fCB7fVxuXG4gIGZ1bmN0aW9uIFNob3dIaWRlQ29udGVudCAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgICAvLyBSYWRpbyBhbmQgQ2hlY2tib3ggc2VsZWN0b3JzXG4gICAgdmFyIHNlbGVjdG9ycyA9IHtcbiAgICAgIG5hbWVzcGFjZTogJ1Nob3dIaWRlQ29udGVudCcsXG4gICAgICByYWRpbzogJ1tkYXRhLXRhcmdldF0gPiBpbnB1dFt0eXBlPVwicmFkaW9cIl0nLFxuICAgICAgY2hlY2tib3g6ICdbZGF0YS10YXJnZXRdID4gaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyxcbiAgICAgIGxpbms6ICdhLmpzLXRvZ2dsZS1jb250ZW50J1xuICAgIH1cblxuICAgIC8vIEVzY2FwZSBuYW1lIGF0dHJpYnV0ZSBmb3IgdXNlIGluIERPTSBzZWxlY3RvclxuICAgIGZ1bmN0aW9uIGVzY2FwZUVsZW1lbnROYW1lIChzdHIpIHtcbiAgICAgIHZhciByZXN1bHQgPSBzdHIucmVwbGFjZSgnWycsICdcXFxcWycpLnJlcGxhY2UoJ10nLCAnXFxcXF0nKVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIC8vIEFkZHMgQVJJQSBhdHRyaWJ1dGVzIHRvIGNvbnRyb2wgKyBhc3NvY2lhdGVkIGNvbnRlbnRcbiAgICBmdW5jdGlvbiBpbml0VG9nZ2xlZENvbnRlbnQgKCkge1xuICAgICAgdmFyICRjb250cm9sID0gJCh0aGlzKVxuICAgICAgdmFyICRjb250ZW50ID0gZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpXG5cbiAgICAgIC8vIFNldCBhcmlhLWNvbnRyb2xzIGFuZCBkZWZhdWx0c1xuICAgICAgaWYgKCRjb250ZW50Lmxlbmd0aCkge1xuICAgICAgICAkY29udHJvbC5hdHRyKCdhcmlhLWNvbnRyb2xzJywgJGNvbnRlbnQuYXR0cignaWQnKSlcbiAgICAgICAgJGNvbnRyb2wuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpXG4gICAgICAgICRjb250ZW50LmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0b2dnbGVkIGNvbnRlbnQgZm9yIGNvbnRyb2xcbiAgICBmdW5jdGlvbiBnZXRUb2dnbGVkQ29udGVudCAoJGNvbnRyb2wpIHtcbiAgICAgIHZhciBpZCA9ICRjb250cm9sLmF0dHIoJ2FyaWEtY29udHJvbHMnKVxuXG4gICAgICAvLyBBUklBIGF0dHJpYnV0ZXMgYXJlbid0IHNldCBiZWZvcmUgaW5pdFxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBpZCA9ICRjb250cm9sLmNsb3Nlc3QoJ1tkYXRhLXRhcmdldF0nKS5kYXRhKCd0YXJnZXQnKVxuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHNob3cvaGlkZSBjb250ZW50IGJ5IGlkXG4gICAgICByZXR1cm4gJCgnIycgKyBpZClcbiAgICB9XG5cbiAgICAvLyBTaG93IHRvZ2dsZWQgY29udGVudCBmb3IgY29udHJvbFxuICAgIGZ1bmN0aW9uIHNob3dUb2dnbGVkQ29udGVudCAoJGNvbnRyb2wsICRjb250ZW50KSB7XG4gICAgICAvLyBTaG93IGNvbnRlbnRcbiAgICAgIGlmICgkY29udGVudC5oYXNDbGFzcygnanMtaGlkZGVuJykpIHtcbiAgICAgICAgJGNvbnRlbnQucmVtb3ZlQ2xhc3MoJ2pzLWhpZGRlbicpXG4gICAgICAgICRjb250ZW50LmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJylcblxuICAgICAgICAvLyBJZiB0aGUgY29udHJvbGxpbmcgaW5wdXQsIHVwZGF0ZSBhcmlhLWV4cGFuZGVkXG4gICAgICAgIGlmICgkY29udHJvbC5hdHRyKCdhcmlhLWNvbnRyb2xzJykpIHtcbiAgICAgICAgICAkY29udHJvbC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGlkZSB0b2dnbGVkIGNvbnRlbnQgZm9yIGNvbnRyb2xcbiAgICBmdW5jdGlvbiBoaWRlVG9nZ2xlZENvbnRlbnQgKCRjb250cm9sLCAkY29udGVudCkge1xuICAgICAgJGNvbnRlbnQgPSAkY29udGVudCB8fCBnZXRUb2dnbGVkQ29udGVudCgkY29udHJvbClcblxuICAgICAgLy8gSGlkZSBjb250ZW50XG4gICAgICBpZiAoISRjb250ZW50Lmhhc0NsYXNzKCdqcy1oaWRkZW4nKSkge1xuICAgICAgICAkY29udGVudC5hZGRDbGFzcygnanMtaGlkZGVuJylcbiAgICAgICAgJGNvbnRlbnQuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpXG5cbiAgICAgICAgLy8gSWYgdGhlIGNvbnRyb2xsaW5nIGlucHV0LCB1cGRhdGUgYXJpYS1leHBhbmRlZFxuICAgICAgICBpZiAoJGNvbnRyb2wuYXR0cignYXJpYS1jb250cm9scycpKSB7XG4gICAgICAgICAgJGNvbnRyb2wuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcmFkaW8gc2hvdy9oaWRlXG4gICAgZnVuY3Rpb24gaGFuZGxlUmFkaW9Db250ZW50ICgkY29udHJvbCwgJGNvbnRlbnQpIHtcbiAgICAgIC8vIEFsbCByYWRpb3MgaW4gdGhpcyBncm91cCB3aGljaCBjb250cm9sIGNvbnRlbnRcbiAgICAgIHZhciBzZWxlY3RvciA9IHNlbGVjdG9ycy5yYWRpbyArICdbbmFtZT0nICsgZXNjYXBlRWxlbWVudE5hbWUoJGNvbnRyb2wuYXR0cignbmFtZScpKSArICddW2FyaWEtY29udHJvbHNdJ1xuICAgICAgdmFyICRmb3JtID0gJGNvbnRyb2wuY2xvc2VzdCgnZm9ybScpXG4gICAgICB2YXIgJHJhZGlvcyA9ICRmb3JtLmxlbmd0aCA/ICRmb3JtLmZpbmQoc2VsZWN0b3IpIDogJChzZWxlY3RvcilcblxuICAgICAgLy8gSGlkZSBjb250ZW50IGZvciByYWRpb3MgaW4gZ3JvdXBcbiAgICAgICRyYWRpb3MuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhpZGVUb2dnbGVkQ29udGVudCgkKHRoaXMpKVxuICAgICAgfSlcblxuICAgICAgLy8gU2VsZWN0IGNvbnRlbnQgZm9yIHRoaXMgY29udHJvbFxuICAgICAgaWYgKCRjb250cm9sLmlzKCdbYXJpYS1jb250cm9sc10nKSkge1xuICAgICAgICBzaG93VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjaGVja2JveCBzaG93L2hpZGVcbiAgICBmdW5jdGlvbiBoYW5kbGVDaGVja2JveENvbnRlbnQgKCRjb250cm9sLCAkY29udGVudCkge1xuICAgICAgLy8gU2hvdyBjaGVja2JveCBjb250ZW50XG4gICAgICBpZiAoJGNvbnRyb2wuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudClcbiAgICAgIH0gZWxzZSB7IC8vIEhpZGUgY2hlY2tib3ggY29udGVudFxuICAgICAgICBoaWRlVG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wsICRjb250ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjaGVja2JveCBzaG93L2hpZGVcbiAgICBmdW5jdGlvbiBoYW5kbGVMaW5rQ29udGVudCAoJGNvbnRyb2wsICRjb250ZW50LCAkZXZlbnQpIHtcbiAgICAgIGlmICgkY29udGVudC5oYXNDbGFzcygnanMtaGlkZGVuJykpIHtcbiAgICAgICAgc2hvd1RvZ2dsZWRDb250ZW50KCRjb250cm9sLCAkY29udGVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhpZGVUb2dnbGVkQ29udGVudCgkY29udHJvbCwgJGNvbnRlbnQpXG4gICAgICB9XG4gICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cblxuICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBldGNcbiAgICBmdW5jdGlvbiBpbml0ICgkY29udGFpbmVyLCBlbGVtZW50U2VsZWN0b3IsIGV2ZW50U2VsZWN0b3JzLCBoYW5kbGVyKSB7XG4gICAgICAkY29udGFpbmVyID0gJGNvbnRhaW5lciB8fCAkKGRvY3VtZW50LmJvZHkpXG5cbiAgICAgIC8vIEhhbmRsZSBjb250cm9sIGNsaWNrc1xuICAgICAgZnVuY3Rpb24gZGVmZXJyZWQgKGV2ZW50KSB7XG4gICAgICAgIHZhciAkY29udHJvbCA9ICQodGhpcylcbiAgICAgICAgaGFuZGxlcigkY29udHJvbCwgZ2V0VG9nZ2xlZENvbnRlbnQoJGNvbnRyb2wpLCBldmVudClcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSBBUklBIGF0dHJpYnV0ZXNcbiAgICAgIHZhciAkY29udHJvbHMgPSAkKGVsZW1lbnRTZWxlY3RvcilcbiAgICAgICRjb250cm9scy5lYWNoKGluaXRUb2dnbGVkQ29udGVudClcblxuICAgICAgLy8gSGFuZGxlIGV2ZW50c1xuICAgICAgJC5lYWNoKGV2ZW50U2VsZWN0b3JzLCBmdW5jdGlvbiAoaWR4LCBldmVudFNlbGVjdG9yKSB7XG4gICAgICAgICRjb250YWluZXIub24oJ2NsaWNrLicgKyBzZWxlY3RvcnMubmFtZXNwYWNlLCBldmVudFNlbGVjdG9yLCBkZWZlcnJlZClcbiAgICAgIH0pXG5cbiAgICAgIC8vIEFueSBhbHJlYWR5IDpjaGVja2VkIG9uIGluaXQ/XG4gICAgICBpZiAoJGNvbnRyb2xzLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICRjb250cm9scy5maWx0ZXIoJzpjaGVja2VkJykuZWFjaChkZWZlcnJlZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZXQgZXZlbnQgc2VsZWN0b3JzIGZvciBhbGwgcmFkaW8gZ3JvdXBzXG4gICAgZnVuY3Rpb24gZ2V0RXZlbnRTZWxlY3RvcnNGb3JSYWRpb0dyb3VwcyAoKSB7XG4gICAgICB2YXIgcmFkaW9Hcm91cHMgPSBbXVxuXG4gICAgICAvLyBCdWlsZCBhbiBhcnJheSBvZiByYWRpbyBncm91cCBzZWxlY3RvcnNcbiAgICAgIHJldHVybiAkKHNlbGVjdG9ycy5yYWRpbykubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdyb3VwTmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpXG5cbiAgICAgICAgaWYgKCQuaW5BcnJheShncm91cE5hbWUsIHJhZGlvR3JvdXBzKSA9PT0gLTEpIHtcbiAgICAgICAgICByYWRpb0dyb3Vwcy5wdXNoKGdyb3VwTmFtZSlcbiAgICAgICAgICByZXR1cm4gJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiJyArICQodGhpcykuYXR0cignbmFtZScpICsgJ1wiXSdcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgcmFkaW8gc2hvdy9oaWRlIGNvbnRlbnQgZm9yIGNvbnRhaW5lclxuICAgIHNlbGYuc2hvd0hpZGVSYWRpb1RvZ2dsZWRDb250ZW50ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIGluaXQoJGNvbnRhaW5lciwgc2VsZWN0b3JzLnJhZGlvLCBnZXRFdmVudFNlbGVjdG9yc0ZvclJhZGlvR3JvdXBzKCksIGhhbmRsZVJhZGlvQ29udGVudClcbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgY2hlY2tib3ggc2hvdy9oaWRlIGNvbnRlbnQgZm9yIGNvbnRhaW5lclxuICAgIHNlbGYuc2hvd0hpZGVDaGVja2JveFRvZ2dsZWRDb250ZW50ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgIGluaXQoJGNvbnRhaW5lciwgc2VsZWN0b3JzLmNoZWNrYm94LCBbc2VsZWN0b3JzLmNoZWNrYm94XSwgaGFuZGxlQ2hlY2tib3hDb250ZW50KVxuICAgIH1cblxuICAgIC8vIFNldCB1cCBsaW5rcyBzaG93L2hpZGUgY29udGVudCBmb3IgY29udGFpbmVyXG4gICAgc2VsZi5zaG93SGlkZUxpbmtUb2dnbGVkQ29udGVudCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gICAgICBpbml0KCRjb250YWluZXIsIHNlbGVjdG9ycy5saW5rLCBbc2VsZWN0b3JzLmxpbmtdLCBoYW5kbGVMaW5rQ29udGVudClcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgZXZlbnQgaGFuZGxlcnNcbiAgICBzZWxmLmRlc3Ryb3kgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgJGNvbnRhaW5lciA9ICRjb250YWluZXIgfHwgJChkb2N1bWVudC5ib2R5KVxuICAgICAgJGNvbnRhaW5lci5vZmYoJy4nICsgc2VsZWN0b3JzLm5hbWVzcGFjZSlcbiAgICB9XG4gIH1cblxuICBTaG93SGlkZUNvbnRlbnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgIHRoaXMuc2hvd0hpZGVSYWRpb1RvZ2dsZWRDb250ZW50KCRjb250YWluZXIpXG4gICAgdGhpcy5zaG93SGlkZUNoZWNrYm94VG9nZ2xlZENvbnRlbnQoJGNvbnRhaW5lcilcbiAgICB0aGlzLnNob3dIaWRlTGlua1RvZ2dsZWRDb250ZW50KCRjb250YWluZXIpXG4gIH1cblxuICBHT1ZVSy5TaG93SGlkZUNvbnRlbnQgPSBTaG93SGlkZUNvbnRlbnRcbiAgZ2xvYmFsLkdPVlVLID0gR09WVUtcbn0pKHdpbmRvdylcbiIsInZhciB0b2dnbGVUaXBzID0gJCgnLnRvZ2dsZS1oZWxwJyk7XG5cbnRvZ2dsZVRpcHMuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyICR0aGF0LFxuICAgIGxpdmVSZWdpb24sXG4gICAgY29udGFpbmVyLFxuICAgIHRvZ2dsZVRpcDtcblxuICAkdGhhdCA9ICQodGhpcyk7XG5cbiAgY29udGFpbmVyID0gJCgnPHNwYW4gLz4nKS5hdHRyKCdjbGFzcycsICd0b2dnbGV0aXAnKTtcblxuICB0b2dnbGVUaXAgPSAkKCc8YnV0dG9uIC8+JylcbiAgICAuYXR0cigndHlwZScsICdidXR0b24nKVxuICAgIC5hdHRyKCdhcmlhLWxhYmVsJywgJ0hlbHAnKVxuICAgIC5hdHRyKCdkYXRhLXRvZ2dsZXRpcC1jb250ZW50JywgJHRoYXQuaHRtbCgpKVxuICAgIC50ZXh0KCc/JylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1lc3NhZ2UgPSAkKHRoaXMpLmRhdGEoJ3RvZ2dsZXRpcC1jb250ZW50Jyk7XG4gICAgICB2YXIgbGl2ZVJlZ2lvbiA9ICQodGhpcykubmV4dCgpO1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBsaXZlUmVnaW9uLmh0bWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAkKCc8c3BhbiAvPicpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkdGhhdC5odG1sKCkubGVuZ3RoID4gNTAgPyAnYnViYmxlIGxvbmcnIDogJ2J1YmJsZSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGV4dChtZXNzYWdlKVxuICAgICAgICB9KVxuICAgICAgfSwgMTAwKTtcbiAgICB9KVxuICAgIC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoKGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PT0gMjcpXG4gICAgICAgIGxpdmVSZWdpb24uaHRtbCgnJyk7XG4gICAgfSk7XG5cbiAgbGl2ZVJlZ2lvbiA9ICQoJzxzcGFuIC8+JylcbiAgICAuYXR0cigncm9sZScsICdzdGF0dXMnKTtcblxuICBjb250YWluZXIuYXBwZW5kKHRvZ2dsZVRpcCwgbGl2ZVJlZ2lvbik7XG5cbiAgJHRoYXQuYmVmb3JlKGNvbnRhaW5lcikucmVtb3ZlKCk7XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoJHRoYXRbMF0gIT09ICQoZS50YXJnZXQpKSB7XG4gICAgICBsaXZlUmVnaW9uLmh0bWwoJycpO1xuICAgIH1cbiAgfSk7XG5cbn0pO1xuIiwiZnVuY3Rpb24gdmFsaWRhdGVQYXNzd29yZCgpIHtcbiAgdmFyIGlkID0gICQodGhpcykuYXR0cihcImlkXCIpXG4gIC8qQXJyYXkgb2YgcnVsZXMgYW5kIHRoZSBpbmZvcm1hdGlvbiB0YXJnZXQqL1xuICB2YXIgcnVsZXMgPSBbe1xuICAgICAgUGF0dGVybjogLyguKltBLVpdKXsyfS8sXG4gICAgICBUYXJnZXQ6IGB1cHBlci1jYXNlLSR7aWR9YFxuICAgIH0sXG4gICAge1xuICAgICAgUGF0dGVybjogLyguKlthLXpdKXsyfS8sXG4gICAgICBUYXJnZXQ6IGBsb3dlci1jYXNlLSR7aWR9YFxuICAgIH0sXG4gICAge1xuICAgICAgUGF0dGVybjogLyguKlxcZCl7Mn0vLFxuICAgICAgVGFyZ2V0OiBgbnVtYmVycy0ke2lkfWBcbiAgICB9LFxuICBdO1xuICB2YXIgcGFzc3dvcmQgPSAkKHRoaXMpLnZhbCgpO1xuICAkKGAjbGVuZ3RoLSR7aWR9YCkucmVtb3ZlQ2xhc3MocGFzc3dvcmQubGVuZ3RoID4gNyA/IFwiaWNvbi1yZW1vdmVcIiA6IFwiaWNvbi1va1wiKTtcbiAgJChgI2xlbmd0aC0ke2lkfWApLmFkZENsYXNzKHBhc3N3b3JkLmxlbmd0aCA+IDcgPyBcImljb24tb2tcIiA6IFwiaWNvbi1yZW1vdmVcIik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICQoXCIjXCIgKyBydWxlc1tpXS5UYXJnZXQpLnJlbW92ZUNsYXNzKG5ldyBSZWdFeHAocnVsZXNbaV0uUGF0dGVybikudGVzdChwYXNzd29yZCkgPyBcImljb24tcmVtb3ZlXCIgOiBcImljb24tb2tcIik7IFxuICAgICQoXCIjXCIgKyBydWxlc1tpXS5UYXJnZXQpLmFkZENsYXNzKG5ldyBSZWdFeHAocnVsZXNbaV0uUGF0dGVybikudGVzdChwYXNzd29yZCkgPyBcImljb24tb2tcIiA6IFwiaWNvbi1yZW1vdmVcIik7XG4gIH1cbn1cblxuJCgnLnBhc3N3b3JkLWlucHV0LWNoZWNrJykuZWFjaChcbiAgZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICB2YXIgJHBhc3N3b3JkSW5wdXQgPSAkKHRoaXMpXG4gICAgdmFyIGlkID0gJHBhc3N3b3JkSW5wdXQuYXR0cihcImlkXCIpXG4gICAgdmFyIHZhbGlkYXRlUGFzc3dvcmRIdG1sID0gJChgPGRpdiBpZD0ndmFsaWRhdGlvbi1mZWVkYmFjay0ke2lkfSc+YClcbiAgICAuYXBwZW5kKGA8ZGl2IGlkPSdsZW5ndGgtJHtpZH0nIGNsYXNzPSdpY29uLXJlbW92ZSc+OCBjaGFyYWN0ZXJzIG1pbmltdW08L2Rpdj5gKVxuICAgIC5hcHBlbmQoYDxkaXYgaWQ9J3VwcGVyLWNhc2UtJHtpZH0nIGNsYXNzPSdpY29uLXJlbW92ZSc+Y29udGFpbiBhdCBsZWFzdCAyIHVwcGVyLWNhc2UgY2hhcmFjdGVyczwvZGl2PmApXG4gICAgLmFwcGVuZChgPGRpdiBpZD0nbG93ZXItY2FzZS0ke2lkfScgY2xhc3M9J2ljb24tcmVtb3ZlJz5jb250YWluIGF0IGxlYXN0IDIgbG93ZXItY2FzZSBjaGFyYWN0ZXJzPC9kaXY+YClcbiAgICAuYXBwZW5kKGA8ZGl2IGlkPSdudW1iZXJzLSR7aWR9JyBjbGFzcz0naWNvbi1yZW1vdmUnIHN0eWxlPSdtYXJnaW4tYm90dG9tOiA2cHg7Jz5jb250YWluIGF0IGxlYXN0IDIgbnVtYmVyczwvZGl2PmApO1xuICBcbiAgICAkcGFzc3dvcmRJbnB1dC5iZWZvcmUodmFsaWRhdGVQYXNzd29yZEh0bWwpO1xuICB9XG4pO1xuXG4kKCcucGFzc3dvcmQtaW5wdXQtY2hlY2snKS5vbigna2V5dXAnLCB2YWxpZGF0ZVBhc3N3b3JkKTsiLCJ2YXIgZm9ybXMgPSAkKCcjY29udGVudCBmb3JtJyk7XG4vL3ZhciBpbnB1dHMgPSBmb3Jtcy5maW5kKCcuZm9ybS1ncm91cCBpbnB1dCcpO1xuXG5mb3Jtcy5hdHRyKCdub3ZhbGlkYXRlJywgJ25vdmFsaWRhdGUnKTtcblxuLypcbmZvcm1zLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XG4gIGlucHV0cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5jaGVja1ZhbGlkaXR5KCk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHNob3dWYWxpZGF0aW9uTWVzc2FnZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlkZVZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB0aGlzLmNoZWNrVmFsaWRpdHkoKTtcbn0pO1xuXG5pbnB1dHMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrVmFsaWRpdHkoKTtcbiAgaWYgKCFyZXN1bHQpIHtcbiAgICBzaG93VmFsaWRhdGlvbk1lc3NhZ2UodGhpcyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZVZhbGlkYXRpb25NZXNzYWdlKHRoaXMpO1xuICB9XG59KTtcblxudmFyIHNob3dWYWxpZGF0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChmaWVsZCkge1xuXG4gIHZhciBmaWVsZCA9IGZpZWxkLFxuICAgICRmaWVsZCA9ICQoZmllbGQpLFxuICAgICRwYXJlbnQgPSAkZmllbGQucGFyZW50KCk7XG5cbiAgaWYgKCRwYXJlbnQuaGFzQ2xhc3MoJ3Nob3ctcGFzc3dvcmQnKSkge1xuICAgICRwYXJlbnQgPSAkcGFyZW50LnBhcmVudCgpO1xuICB9XG5cbiAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpKSB7XG5cbiAgICB2YXIgbGFiZWxUZXh0ID0gJGZpZWxkLmRhdGEoJ2xhYmVsJykgfHwgJChcImxhYmVsW2Zvcj0nXCIgKyAkZmllbGQuYXR0cignaWQnKSArIFwiJ11cIikudGV4dCgpLFxuICAgICAgZXJyb3JNZXNzYWdlVGV4dCA9ICdFbnRlciBhIHZhbGlkICcgKyBsYWJlbFRleHQudG9Mb3dlckNhc2UoKSxcbiAgICAgIGVycm9yTWVzc2FnZSA9ICQoJzxwIGNsYXNzPVwiZ292dWstYm9keVwiPicpXG4gICAgICAgIC5odG1sKGVycm9yTWVzc2FnZVRleHQpXG4gICAgICAgIC5wcm9wKCdjbGFzcycsICdlcnJvci1tZXNzYWdlJylcbiAgICAgICAgLnByb3AoJ2lkJywgJ3ZhbGlkYXRpb24tJyArIHNsdWdpZnkobGFiZWxUZXh0KSk7XG5cbiAgICAkZmllbGQuYmVmb3JlKGVycm9yTWVzc2FnZSk7XG4gICAgJHBhcmVudC5hZGRDbGFzcygnZ292dWstZm9ybS1ncm91cC0tZXJyb3InKTtcbiAgICAkZmllbGQuYXR0cih7XG4gICAgICAnYXJpYS1kZXNjcmliZWRieScgOiAndmFsaWRhdGlvbi0nICsgc2x1Z2lmeShsYWJlbFRleHQpLFxuICAgICAgJ2FyaWEtaW52YWxpZCc6ICd0cnVlJ1xuICAgIH0pO1xuICB9XG59XG5cbnZhciBoaWRlVmFsaWRhdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgdmFyIGZpZWxkID0gZmllbGQsXG4gICAgJGZpZWxkID0gJChmaWVsZCksXG4gICAgJHBhcmVudCA9ICRmaWVsZC5wYXJlbnQoKTtcblxuICBpZiAoJHBhcmVudC5oYXNDbGFzcygnc2hvdy1wYXNzd29yZCcpKSB7XG4gICAgJHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XG4gIH1cblxuICAkcGFyZW50LnJlbW92ZUNsYXNzKCdnb3Z1ay1mb3JtLWdyb3VwLS1lcnJvcicpO1xuICAkcGFyZW50LmZpbmQoJ3AuZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xuICAkZmllbGQucmVtb3ZlQXR0cignYXJpYS1kZXNjcmliZWRieScpO1xuICAkZmllbGQucmVtb3ZlQXR0cignYXJpYS1pbnZhbGlkJyk7XG59XG5cbnZhciBzbHVnaWZ5ID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgcmV0dXJuIHRleHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9bXlxcd1xcLV0rL2csICcnKVxuICAgIC5yZXBsYWNlKC9cXC1cXC0rL2csICctJylcbiAgICAucmVwbGFjZSgvXi0rLywgJycpXG4gICAgLnJlcGxhY2UoLy0rJC8sICcnKTtcbn1cblxuKi9cbiIsInZhciBOU0EgPSBOU0EgfHwge307XG5cbk5TQSA9IHtcblxuICBpbml0aWFsaXNlU2hvd1Bhc3N3b3JkIDogZnVuY3Rpb24gKCkge1xuICAgIC8vIEdldCBhbGwgdGhlIHBhc3N3b3JkIGlucHV0cyBpbiB0aGUgcGFnZSBhbmQgbG9vcCB0aHJvdWdoIHRoZW0gdG8gYWRkIHRoZSBzaG93L2hpZGUgYnV0dG9uXG4gICAgdmFyICRwYXNzd29yZElucHV0cyA9ICQoJy5wYXNzd29yZC1pbnB1dCcpO1xuICAgICRwYXNzd29yZElucHV0cy5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuICAgICAgLy8gQ3JlYXRlIHNob3cvaGlkZSBidXR0b25cbiAgICAgIHZhciAkc2hvd0J1dHRvbiA9ICQoJzxidXR0b24gLz4nKS5wcm9wKHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzOiAnc2hvdy1wYXNzd29yZCBnb3Z1ay1idXR0b24gZ292dWstYnV0dG9uLS1zZWNvbmRhcnkgZ292dWstIS1tYXJnaW4tYm90dG9tLTEnLCBhcmlhTGFiZWwgPSAnU2hvdyBwYXNzd29yZCcgfSk7XG4gICAgICAkc2hvd0J1dHRvbi5odG1sKCdTaG93Jyk7XG4gICAgICAvLyBXaGVuIGNsaWNraW5nIG9uIHRoYXQgYnV0dG9uIHdlIHdpbGwgc2hvdy9oaWRlIHRoZSBwYXNzd29yZCBhY2NvcmRpbmdseVxuICAgICAgJHNob3dCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoJHRoYXQuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnKXtcbiAgICAgICAgICAkdGhhdC5hdHRyKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgICAgJHNob3dCdXR0b24udGV4dChcIkhpZGVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRoYXQuYXR0cihcInR5cGVcIiwgXCJwYXNzd29yZFwiKTtcbiAgICAgICAgICAkc2hvd0J1dHRvbi50ZXh0KFwiU2hvd1wiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBBZGQgYnV0dG9uIHRvIHRoZSBkb2N1bWVudFxuICAgICAgJHRoYXQuYWZ0ZXIoJHNob3dCdXR0b24pO1xuICAgIH0pO1xuICB9LFxuXG4gIGJhY2tMaW5rOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhY2tMaW5rID0gJCgnPGE+JylcbiAgICAgIC5hdHRyKHsgJ2hyZWYnOiAnIycsIFwiY2xhc3NcIjogXCJnb3Z1ay1iYWNrLWxpbmstYm9sZFwiIH0pXG4gICAgICAudGV4dCgnQmFjaycpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsgd2luZG93Lmhpc3RvcnkuYmFjaygpOyBlLnByZXZlbnREZWZhdWx0KCk7IH0pO1xuICAgICQoJy5qcy1iYWNrLWxpbmsnKS5odG1sKGJhY2tMaW5rKTtcbiAgfSxcbn07XG5cblxuaWYgKCQoJ3NlbGVjdC5zZWxlY3QyJykubGVuZ3RoID4gMCkge1xuICAkKCdzZWxlY3Quc2VsZWN0MicpLnNlbGVjdDIoe21hdGNoZXI6IHNlbGVjdDJNb2RlbE1hdGNoZXJ9KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0Mk1vZGVsTWF0Y2hlciAocGFyYW1zLCBkYXRhKSB7XG4gIGRhdGEucGFyZW50VGV4dCA9IGRhdGEucGFyZW50VGV4dCB8fCBcIlwiO1xuICBpZiAodHlwZW9mKHBhcmFtcy50ZXJtKSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXBhcmFtcy50ZXJtIHx8IHBhcmFtcy50ZXJtLnRyaW0oKSA9PT0gJycpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBpZiAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgbWF0Y2ggPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGF0YSk7XG4gICAgZm9yICh2YXIgYyA9IGRhdGEuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pIHtcbiAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XG4gICAgICBjaGlsZC5wYXJlbnRUZXh0ICs9IGRhdGEucGFyZW50VGV4dCArIFwiIFwiICsgZGF0YS50ZXh0O1xuICAgICAgdmFyIG1hdGNoZXMgPSBzZWxlY3QyTW9kZWxNYXRjaGVyKHBhcmFtcywgY2hpbGQpO1xuICAgICAgaWYgKG1hdGNoZXMgPT0gbnVsbCkge1xuICAgICAgICBtYXRjaC5jaGlsZHJlbi5zcGxpY2UoYywgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYXRjaC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3QyTW9kZWxNYXRjaGVyKHBhcmFtcywgbWF0Y2gpO1xuICB9XG4gIHZhciBvcmlnaW5hbCA9IChkYXRhLnBhcmVudFRleHQgKyAnICcgKyBkYXRhLnRleHQpLnRvVXBwZXJDYXNlKCk7XG4gIHZhciB0ZXJtID0gcGFyYW1zLnRlcm0udG9VcHBlckNhc2UoKTtcbiAgaWYgKG9yaWdpbmFsLmluZGV4T2YodGVybSkgPiAtMSkge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5pZiAoJCgnLnBhc3N3b3JkLWlucHV0JykubGVuZ3RoID4gMCkge1xuICBOU0EuaW5pdGlhbGlzZVNob3dQYXNzd29yZCgpO1xufVxuXG5pZiAoJCgnLmpzLWJhY2stbGluaycpKSB7XG4gIE5TQS5iYWNrTGluaygpO1xufVxuXG4kKCcudW5kZXItY29uc3RydWN0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgYWxlcnQoJ1RoaXMgZnVuY3Rpb25hbGl0eSBpcyBub3QgYXZhaWxhYmxlIHlldCcpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuaWYgKCQoJy5ub3RpZmljYXRpb24gc3Bhbi5pY29uJykubGVuZ3RoID4gMCkge1xuICAkKCcubm90aWZpY2F0aW9uIHNwYW4uaWNvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnBhcmVudCgpLmhpZGUoKTtcbiAgfSk7XG59XG5cbmlmICgkKCdhcnRpY2xlLm9yZ2FuaXNhdGlvbi1zZXJ2aWNlcycpLmxlbmd0aCA+IDApIHtcblxuICAkKCcuaW5mb3JtYXRpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBpbmZvID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcuc2VydmljZS1kZXNjcmlwdGlvbicpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpbmZvLnRvZ2dsZSgpO1xuICB9KTtcblxuICAkKCcuaW5mby1saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgbWV0YSA9ICQodGhpcykucGFyZW50KCkubmV4dCgpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBtZXRhLnRvZ2dsZSgpO1xuICB9KTtcbn1cblxudmFyIHNlYXJjaEZpZWxkcyA9ICQoJ2Zvcm0gLnNlYXJjaC1maWVsZCcpO1xuXG5pZiAoc2VhcmNoRmllbGRzLmxlbmd0aCA+IDApIHtcblxuICB2YXIgbG9hZGVyID0gJCgnPHNwYW4gLz4nKS5hZGRDbGFzcygnbG9hZGVyIHNwaW5uZXItaW5saW5lJyk7XG4gIHZhciBiMSA9ICQoJzxzcGFuIC8+JykuYWRkQ2xhc3MoJ2JhbGwgYi0xJyk7XG4gIHZhciBiMiA9ICQoJzxzcGFuIC8+JykuYWRkQ2xhc3MoJ2JhbGwgYi0yJyk7XG4gIGxvYWRlci5hcHBlbmQoYjEpLmFwcGVuZChiMik7XG5cbiAgc2VhcmNoRmllbGRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciBmb3JtID0gJCh0aGlzKS5wYXJlbnQoKTtcbiAgICB2YXIgYnV0dG9uID0gZm9ybS5maW5kKCdidXR0b24nKTtcbiAgICBmb3JtLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBidXR0b24uYWZ0ZXIobG9hZGVyKS5oaWRlKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG52YXIgZm9ybVJlZ2lzdGVyID0gJCgnLnByZXZlbnQtZm9ybS1kb3VibGUtc3VibWlzc2lvbicpO1xuXG5pZiAoZm9ybVJlZ2lzdGVyLmxlbmd0aCA+IDApIHtcbiAgZm9ybVJlZ2lzdGVyLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciAkc3VibWl0QnV0dG9ucyA9ICQoZm9ybVJlZ2lzdGVyKS5maW5kKCdidXR0b246c3VibWl0JyksICRzdWJtaXRCdXR0b24gPSAkc3VibWl0QnV0dG9ucy5lcSgwKTtcbiAgICBmb3JtUmVnaXN0ZXIub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICRzdWJtaXRCdXR0b25zLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICRzdWJtaXRCdXR0b24uY3NzKCdtaW4td2lkdGgnLCAkc3VibWl0QnV0dG9uLm91dGVyV2lkdGgoKSArICdweCcpO1xuXG4gICAgICAkc3VibWl0QnV0dG9uLmFwcGVuZChcIjxzcGFuIGNsYXNzPSdsb2FkZXIgc3Bpbm5lci1pbmxpbmUnPiA8c3BhbiBjbGFzcz0nYmFsbCBiLTEnPjwvc3Bhbj4gPHNwYW4gY2xhc3M9J2JhbGwgYi0yJz48L3NwYW4+IDxzcGFuIGNsYXNzPSdiYWxsIGItMyc+PC9zcGFuPiA8L3NwYW4+XCIpO1xuXG4gICAgfSk7XG4gIH0pO1xufVxuXG4kKCcuYXV0by1zY3JvbGwtb24tY2hhbmdlJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcbiAgJCh3aW5kb3cpLnNjcm9sbFRvcCgkKCcuYXV0by1zY3JvbGwtZGVzdCcpLnBvc2l0aW9uKCkudG9wKTtcbn0pO1xuXG4kKCcuY2xvc2UtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICB2YXIgbm90aWZpY2F0aW9uID0gZS50YXJnZXQuY2xvc2VzdChcIi5nb3Z1ay1ub3RpZmljYXRpb24tYmFubmVyXCIpO1xuICBub3RpZmljYXRpb24ucmVtb3ZlKCk7XG59KTtcblxuLy8gc2VsZWN0IG5leHQgZWxlbWVudCBpbiB0aGUgdGVtcGxhdGUsIHNob3cgaXQgYW5kIGhpZGUgdGhlIHRvZ2dsZSBsaW5rXG4kKCcudG9nZ2xlLW9wZW4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICB2YXIgbWV0YSA9ICQodGhpcykubmV4dCgpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIG1ldGEucmVtb3ZlQ2xhc3MoJ2dvdnVrLXZpc3VhbGx5LWhpZGRlbicpO1xuICAkKHRoaXMpLmFkZENsYXNzKCdnb3Z1ay12aXN1YWxseS1oaWRkZW4nKTtcbn0pO1xuXG4vLyAjcmVnaW9uIFNlc3Npb24gdGltZSBvdXRcblxudmFyIHRhYklkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbmZ1bmN0aW9uIHNlc3Npb25UaW1lb3V0KCkge1xuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXJpJyk7XG5cbiAgd2luZG93Lm9uZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgY291bnRUaW1lRGlmZigpO1xuICB9XG5cbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblxuICAgIC8vIFRhYnMgYXJlIHNldCB0byBjaGVjayBpZiBvdGhlciB0YWJzIHJ1bm5pbmcgdGltZXIgdGhlbiBzZXQgdG8gMVxuICAgIC8vIHdoZW4gc2V0IHRvIDAgbWVhbnMgJ1N0YXkgc2lnbmVkIGluJyBpcyBzZWxlY3RlZFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YWJzJywgICcxJyk7XG5cbiAgICAkKCcuc2Vzc2lvbi10aW1lb3V0LW92ZXJsYXknKS5zaG93KCk7XG4gICAgJCgnI21vZGFsLXNpZ25pbicpLmZvY3VzKCk7XG5cbiAgICBzdGFydFRpbWVyKCk7XG4gIH0sIDE0ICogNTkgKiAxMDAwKTsgLy8gbWludXRlICogc2Vjb25kcyAqIG1pbGxpc2Vjb25kcyBlLmcgMTQgKiA1OSAqIDEwMDBcbn1cblxuJCgnI21vZGFsLXNpZ25pbicpLm9uKFwiY2xpY2tcIiwgKCk9PntcbiAgY2xlYXJJbnRlcnZhbCh0aW1lb3V0VGltZXIpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFicycsICcwJylcbiAgbG9jYXRpb24ucmVsb2FkKCk7XG59KTtcblxuJCgnI21vZGFsLXNpZ25vdXQnKS5vbihcImNsaWNrXCIsICgpPT57XG4gIGNsZWFySW50ZXJ2YWwodGltZW91dFRpbWVyKTtcbiAgbG9jYXRpb24uaHJlZiA9ICcvc2lnbm91dCdcbn0pO1xuXG52YXIgdGltZW91dFRpbWVyO1xuXG5mdW5jdGlvbiBzdGFydFRpbWVyKCkge1xuICB2YXIgdGltZVBsYWNlSG9sZGVyID0gXCI0IG1pbnV0ZXMgYW5kIDYwIHNlY29uZHNcIlxuXG4gIHRpbWVvdXRUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFicycpID09PSAnMCcpe1xuICAgIGNsZWFySW50ZXJ2YWwodGltZW91dFRpbWVyKTtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxuXG4gIHZhciB0aW1lciA9IHRpbWVQbGFjZUhvbGRlci5zcGxpdCgnYW5kJyk7XG4gIHZhciBtaW51dGVzID0gcGFyc2VJbnQodGltZXJbMF0sIDEwKTtcbiAgdmFyIHNlY29uZHMgPSBwYXJzZUludCh0aW1lclsxXSwgMTApO1xuICAtLXNlY29uZHM7XG4gIG1pbnV0ZXMgPSAoc2Vjb25kcyA8IDApID8gLS1taW51dGVzIDogbWludXRlcztcbiAgc2Vjb25kcyA9IChzZWNvbmRzIDwgMCkgPyA1OSA6IHNlY29uZHM7XG4gIHNlY29uZHMgPSAoc2Vjb25kcyA8IDEwKSA/ICcwJyArIHNlY29uZHMgOiBzZWNvbmRzO1xuXG4gICQoJyNtaW51dGVzJykuaHRtbChtaW51dGVzKTtcbiAgJCgnI3NlY29uZHMnKS5odG1sKHNlY29uZHMpO1xuXG4gIGlmIChtaW51dGVzIDwgMCB8fCAoc2Vjb25kcyA8PSAwKSAmJiAobWludXRlcyA8PSAwKSkge1xuICAgIGNhbGxUaW1lb3V0KCk7XG4gICB9IGVsc2UgaWYodGFiSWQpIHtcbiAgICBjb3VudFRpbWVEaWZmKCk7XG4gICB9XG5cbiAgdGltZVBsYWNlSG9sZGVyID0gbWludXRlcyArICcgbWludXRlcyBhbmQgJyArIHNlY29uZHMgKyAnIHNlY29uZHMnO1xufSwgMTAwMCk7XG59XG5cbmZ1bmN0aW9uIGNhbGxUaW1lb3V0KCkge1xuICBjbGVhckludGVydmFsKHRpbWVvdXRUaW1lcik7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1cmknLCBsb2NhdGlvbi5wYXRobmFtZSk7XG4gIGxvY2F0aW9uLmhyZWYgPSAnL3NpZ25vdXQnO1xufVxuXG5mdW5jdGlvbiBjb3VudFRpbWVEaWZmKCkge1xuICB2YXIgZGlmZiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gTnVtYmVyKHRhYklkKTtcbiAgdmFyIG1pbnV0ZXMgPSBkaWZmLyg2MCAqIDEwMDApO1xuXG4gIGlmIChtaW51dGVzID4gMjApIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXJpJywgbG9jYXRpb24ucGF0aG5hbWUpO1xuICAgIGNsZWFySW50ZXJ2YWwodGltZW91dFRpbWVyKTtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxufVxuXG4vLyAjZW5kcmVnaW9uXG5cbnZhciBzaG93SGlkZUNvbnRlbnQgPSBuZXcgR09WVUsuU2hvd0hpZGVDb250ZW50KClcbnNob3dIaWRlQ29udGVudC5pbml0KClcblxuR09WVUsuZGV0YWlscy5pbml0KClcbiJdfQ==
